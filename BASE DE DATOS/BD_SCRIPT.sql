USE [master]
GO
/****** Object:  Database [GestionPersonalProinsa]    Script Date: 20/7/2024 11:19:03 p. m. ******/
CREATE DATABASE [GestionPersonalProinsa]
GO

USE [GestionPersonalProinsa]
GO
/****** Object:  UserDefinedTableType [dbo].[DeduccionNominaDetalleType]    Script Date: 20/7/2024 11:19:03 p. m. ******/
CREATE TYPE [dbo].[DeduccionNominaDetalleType] AS TABLE(
	[MONTO] [decimal](10, 2) NULL,
	[DETALLE] [varchar](100) NULL,
	[DEDUCCION_ID] [bigint] NULL,
	[EMPLEADO_ID] [bigint] NULL
)
GO
/****** Object:  UserDefinedTableType [dbo].[IngresoNominaDetalleType]    Script Date: 20/7/2024 11:19:03 p. m. ******/
CREATE TYPE [dbo].[IngresoNominaDetalleType] AS TABLE(
	[MONTO] [decimal](10, 2) NULL,
	[DETALLE] [varchar](100) NULL,
	[INGRESO_ID] [bigint] NULL,
	[EMPLEADO_ID] [bigint] NULL,
	[CANTIDAD] [int] NULL
)
GO


/****** Object:  UserDefinedFunction [dbo].[CalcularDias]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE FUNCTION [dbo].[CalcularDias] (
    @INICIO DATE,
    @FIN DATE
)
RETURNS INT
AS
BEGIN
    DECLARE @BusinessDays INT;

    WITH FECHASRANGO AS (
        SELECT @INICIO AS DateValue
        UNION ALL
        SELECT DATEADD(DAY, 1, DateValue)
        FROM FECHASRANGO 
        WHERE DateValue < @FIN
    )
    SELECT @BusinessDays = COUNT(*)
    FROM FECHASRANGO 
    WHERE DateValue >= @INICIO AND DateValue <= @FIN -- Dentro del rango de fechas
        AND DATEPART(WEEKDAY, DateValue) NOT IN (1, 7); -- Excluye domingos (1) y s bados (7)

    RETURN @BusinessDays;
END;
GO
/****** Object:  Table [dbo].[__EFMigrationsHistory]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[__EFMigrationsHistory](
	[MigrationId] [nvarchar](150) NOT NULL,
	[ProductVersion] [nvarchar](32) NOT NULL,
 CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY CLUSTERED 
(
	[MigrationId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[APROBACIONSOLICITUD]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[APROBACIONSOLICITUD](
	[ID_APROBACIONSOLICITUD] [bigint] IDENTITY(1,1) NOT NULL,
	[FECHA_APROBACIONSOLICITUD] [datetime] NULL,
	[SECUENCIA] [int] NULL,
	[RESPUESTA_SOLICITUD] [char](10) NOT NULL,
	[COMENTARIO] [varchar](200) NULL,
	[ENCARGADO_APROBACION_ID] [bigint] NOT NULL,
	[SOLICITUD_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_APROBACIONSOLICITUD_ID] PRIMARY KEY CLUSTERED 
(
	[ID_APROBACIONSOLICITUD] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[AspNetRoleClaims]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[AspNetRoleClaims](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[RoleId] [nvarchar](450) NOT NULL,
	[ClaimType] [nvarchar](max) NULL,
	[ClaimValue] [nvarchar](max) NULL,
 CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[AspNetRoles]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[AspNetRoles](
	[Id] [nvarchar](450) NOT NULL,
	[Name] [nvarchar](256) NULL,
	[NormalizedName] [nvarchar](256) NULL,
	[ConcurrencyStamp] [nvarchar](max) NULL,
 CONSTRAINT [PK_AspNetRoles] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[AspNetUserClaims]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[AspNetUserClaims](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[UserId] [nvarchar](450) NOT NULL,
	[ClaimType] [nvarchar](max) NULL,
	[ClaimValue] [nvarchar](max) NULL,
 CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[AspNetUserLogins]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[AspNetUserLogins](
	[LoginProvider] [nvarchar](450) NOT NULL,
	[ProviderKey] [nvarchar](450) NOT NULL,
	[ProviderDisplayName] [nvarchar](max) NULL,
	[UserId] [nvarchar](450) NOT NULL,
 CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY CLUSTERED 
(
	[LoginProvider] ASC,
	[ProviderKey] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[AspNetUserRoles]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[AspNetUserRoles](
	[UserId] [nvarchar](450) NOT NULL,
	[RoleId] [nvarchar](450) NOT NULL,
 CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY CLUSTERED 
(
	[UserId] ASC,
	[RoleId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[AspNetUsers]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[AspNetUsers](
	[Id] [nvarchar](450) NOT NULL,
	[UserName] [nvarchar](256) NULL,
	[NormalizedUserName] [nvarchar](256) NULL,
	[Email] [nvarchar](256) NULL,
	[NormalizedEmail] [nvarchar](256) NULL,
	[EmailConfirmed] [bit] NOT NULL,
	[PasswordHash] [nvarchar](max) NULL,
	[SecurityStamp] [nvarchar](max) NULL,
	[ConcurrencyStamp] [nvarchar](max) NULL,
	[PhoneNumber] [nvarchar](max) NULL,
	[PhoneNumberConfirmed] [bit] NOT NULL,
	[TwoFactorEnabled] [bit] NOT NULL,
	[LockoutEnd] [datetimeoffset](7) NULL,
	[LockoutEnabled] [bit] NOT NULL,
	[AccessFailedCount] [int] NOT NULL,
 CONSTRAINT [PK_AspNetUsers] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[AspNetUserTokens]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[AspNetUserTokens](
	[UserId] [nvarchar](450) NOT NULL,
	[LoginProvider] [nvarchar](450) NOT NULL,
	[Name] [nvarchar](450) NOT NULL,
	[Value] [nvarchar](max) NULL,
 CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY CLUSTERED 
(
	[UserId] ASC,
	[LoginProvider] ASC,
	[Name] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CALCULOIMPUESTO]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[CALCULOIMPUESTO](
	[ID_CALCULOIMPUESTO] [bigint] IDENTITY(1,1) NOT NULL,
	[TOTAL_IMP] [decimal](18, 2) NULL,
	[FECHA_CALCULO] [date] NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_CALCULOIMPUESTO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_CALCULOIMPUESTO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CAPACITACION]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[CAPACITACION](
	[ID_CAPACION] [bigint] IDENTITY(1,1) NOT NULL,
	[DESCRIPCION] [varchar](100) NULL,
	[INSTITUCION] [varchar](100) NULL,
	[LINK] [varchar](100) NULL,
	[CERTIFICACION] [varchar](100) NULL,
	[FECHA_FINALIZACION] [datetime] NULL,
	[CANTIDAD_HORAS] [int] NULL,
	[ESTADO] [bit] NULL,
 CONSTRAINT [PK_CAPACITACION_ID] PRIMARY KEY CLUSTERED 
(
	[ID_CAPACION] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CARGO]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[CARGO](
	[ID_CARGO] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE_CARGO] [varchar](50) NULL,
	[DESCRIPCION] [varchar](200) NULL,
 CONSTRAINT [PK_CARGO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_CARGO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CLIENTE]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[CLIENTE](
	[ID_CLIENTE] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [varchar] (50) NOT NULL,
	[DETALLE] [varchar] (500) NULL,
	[PAIS] [varchar] (50) NOT NULL,
	[SECTOR] [varchar] (50) NOT NULL,
	[ESTADO] [bit] NOT NULL,
CONSTRAINT [PK_CLIENTE_ID] PRIMARY KEY CLUSTERED
(
[ID_CLIENTE] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CORREO]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[CORREO](
	[ID_CORREO] [bigint] IDENTITY(1,1) NOT NULL,
	[CORREO] [varchar](255) NULL,
 CONSTRAINT [PK_CORREO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_CORREO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DB_ERRORES]    Script Date: 20/7/2024 11:19:03 p. m. ******/

CREATE TABLE [dbo].[DB_ERRORES](
	[ErrorID] [int] IDENTITY(1,1) NOT NULL,
	[UserName] [varchar](100) NULL,
	[ErrorNumber] [int] NULL,
	[ErrorState] [int] NULL,
	[ErrorSeverity] [int] NULL,
	[ErrorLine] [int] NULL,
	[ErrorProcedure] [varchar](max) NULL,
	[ErrorMessage] [varchar](max) NULL,
	[ErrorDateTime] [datetime] NULL
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DEDUCCION]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[DEDUCCION](
	[ID_DEDUCCION] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE_DEDUCCION] [varchar](50) NULL,
	[DESCRIPCION] [varchar](200) NULL,
	[PORCENTAJE] [decimal](10, 2) NULL,
 CONSTRAINT [PK_DEDUCCION_ID] PRIMARY KEY CLUSTERED 
(
	[ID_DEDUCCION] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DEDUCCIONNOMINADETALLE]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[DEDUCCIONNOMINADETALLE](
	[ID_DEDUCCIONNOMINADETALLE] [bigint] IDENTITY(1,1) NOT NULL,
	[MONTO] [decimal](10, 2) NULL,
	[DETALLE] [varchar](100) NULL,
	[DEDUCCION_ID] [bigint] NULL,
	[NOMINADETALLE_ID] [bigint] NULL,
	[EMPLEADO_ID] [bigint] NULL,
 CONSTRAINT [PK_DEDUCCIONNOMINADETALLE_ID] PRIMARY KEY CLUSTERED 
(
	[ID_DEDUCCIONNOMINADETALLE] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DEEXTRAORNIDARIO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[DEEXTRAORNIDARIO](
	[ID_DEEXTRAORNIDARIO] [bigint] IDENTITY(1,1) NOT NULL,
	[FECHA_DIA_EXTRAORDINARIO] [date] NULL,
	[ESTADO] [bit] NULL,
	[CANTIDAD_HORAS_EXTRAORDINARIO] [int] NULL,
	[Comentario] [varchar](200) NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_DEEXTRAORNIDARIO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_DEEXTRAORNIDARIO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DEPARTAMENTO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[DEPARTAMENTO](
	[ID_DEPARTAMENTO] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE_DEPARTAMENTO] [varchar](50) NULL,
	[DESCRIPCION] [varchar](100) NOT NULL,
 CONSTRAINT [PK_DEPARTAMENTO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_DEPARTAMENTO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DEPARTAMENTOSUPERVISOR]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[DEPARTAMENTOSUPERVISOR](
	[ID_DEPARTAMENTOSUPERVISOR] [bigint] IDENTITY(1,1) NOT NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
	[DEPARTAMENTO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_DEPARTAMENTOSUPERVISOR_ID] PRIMARY KEY CLUSTERED 
(
	[ID_DEPARTAMENTOSUPERVISOR] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DIRRECCION]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[DIRRECCION](
	[ID_DIRECCION] [bigint] IDENTITY(1,1) NOT NULL,
	[DIRRECION] [varchar](600) NULL,
 CONSTRAINT [PK_DIRRECCION_ID] PRIMARY KEY CLUSTERED 
(
	[ID_DIRECCION] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[EMPLEADO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[EMPLEADO](
	[ID_EMPLEADO] [bigint] IDENTITY(1,1) NOT NULL,
	[IDENTIFICACION] [int] NULL,
	[NOMBRECOMPLETO] [varchar](250) NULL,
	[FECHA_NACIMIENTO] [datetime] NULL,
	[FECHA_INGRESO] [datetime] NULL,
	[FOTO] [varbinary](max) NULL,
	[TIPO_FOTO] [nvarchar](50) NULL,
	[SALARIO] [decimal](10, 2) NULL,
	[SALDO_VACACIONES] [int] NULL,
	[CARGO_ID] [bigint] NULL,
	[CORREO_ID] [bigint] NOT NULL,
	[HORARIOLABORAL_ID] [bigint] NULL,
	[DEPARTAMENTO_ID] [bigint] NULL,
	[ESTADO] [bit] NULL,
	[AspNetUsers_ID] [nvarchar](450) NULL,
 CONSTRAINT [PK_EMPLEADO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_EMPLEADO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[EMPLEADOCAPACITACION]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[EMPLEADOCAPACITACION](
	[ID_EMPLEADOCAPACITACION] [bigint] IDENTITY(1,1) NOT NULL,
	[CAPACITACION_ID] [bigint] NOT NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_EMPLEADOCAPACITACION_ID] PRIMARY KEY CLUSTERED 
(
	[ID_EMPLEADOCAPACITACION] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[EMPLEADODIRRECCION]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[EMPLEADODIRRECCION](
	[ID_EMPLEADODIRRECCION] [bigint] IDENTITY(1,1) NOT NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
	[DIRRECION_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_EMPLEADODIRRECCION_ID] PRIMARY KEY CLUSTERED 
(
	[ID_EMPLEADODIRRECCION] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[EMPLEADODOCUMENTO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[EMPLEADODOCUMENTO](
	[ID_EMPLEADODOCUMENTO] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE_DOCUMENTO] [varchar](50) NULL,
	[COMENTARIO] [varchar](200) NULL,
	[DOCUMENTO] [varbinary](max) NULL,
	[TIPODOCUMENTO_ID] [bigint] NULL,
	[EMPLEADO_ID] [bigint] NULL,
 CONSTRAINT [PK_EMPLEADODOCUMENTO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_EMPLEADODOCUMENTO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[EMPLEADOTELEFONO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[EMPLEADOTELEFONO](
	[ID_EMPLEADOTELEFONO] [bigint] IDENTITY(1,1) NOT NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
	[TELEFONO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_EMPLEADOTELEFONO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_EMPLEADOTELEFONO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

/****** Object:  Table [dbo].[FLUJOAPROBACION]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[FLUJOAPROBACION](
	[ID_FLUJOAPROBACION] [bigint] IDENTITY(1,1) NOT NULL,
	[SECUENCIA] [int] NOT NULL,
	[DEPARTAMENTO_APROBACION_ID] [bigint] NULL,
	[DEPARTAMENTO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_FLUJOAPROBACION_ID] PRIMARY KEY CLUSTERED 
(
	[ID_FLUJOAPROBACION] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[HORARIOLABORAL]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[HORARIOLABORAL](
	[ID_HORARIOLABORAL] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBREHL] [varchar](50) NOT NULL,
	[DESCRIPCION] [varchar](200) NULL,
	[HORA_INGRESO] [int] NULL,
	[HORA_SALIDA] [int] NULL,
 CONSTRAINT [PK_HORARIOLABORAL_ID] PRIMARY KEY CLUSTERED 
(
	[ID_HORARIOLABORAL] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[HORASEXTRA]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[HORASEXTRA](
	[ID_HORASEXTRA] [bigint] IDENTITY(1,1) NOT NULL,
	[FECHA_HORAS_EXTRA] [date] NULL,
	[ESTADO] [bit] NULL,
	[CANTIDAD_HORAS_EXTRA] [int] NULL,
	[Comentario] [varchar](200) NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_HORASEXTRA_ID] PRIMARY KEY CLUSTERED 
(
	[ID_HORASEXTRA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[HORASTRABAJADAS]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[HORASTRABAJADAS](
	[ID_HORASTRABAJADAS] [bigint] IDENTITY(1,1) NOT NULL,
	[PERIODO_HORAS_TRABAJADAS] [date] NULL,
	[ESTADO] [bit] NULL,
	[CANTIDAD_HORAS_TRABAJADAS] [int] NULL,
	[Comentario] [varchar](200) NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_HORASTRABAJADAS_ID] PRIMARY KEY CLUSTERED 
(
	[ID_HORASTRABAJADAS] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[IMPUESTORENTA]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[IMPUESTORENTA](
	[ID_IMPUESTORENTA] [bigint] IDENTITY(1,1) NOT NULL,
	[MIN_SALARY] [decimal](18, 2) NULL,
	[MAX_SALARY] [decimal](18, 2) NULL,
	[PORCENTAJE] [decimal](5, 2) NULL,
 CONSTRAINT [PK_IMPUESTORENTA_ID] PRIMARY KEY CLUSTERED 
(
	[ID_IMPUESTORENTA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[INGRESO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[INGRESO](
	[ID_INGRESO] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE_INGRESO] [varchar](50) NOT NULL,
	[DESCRIPCION] [varchar](200) NULL,
	[MONTO] [decimal](10, 2) NULL,
	[PORCENTAJE] [decimal](10, 2) NULL,
 CONSTRAINT [PK_INGRESO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_INGRESO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[INGRESONOMINADETALLE]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[INGRESONOMINADETALLE](
	[ID_INGRESONOMINADETALLE] [bigint] IDENTITY(1,1) NOT NULL,
	[MONTO] [decimal](10, 2) NULL,
	[DETALLE] [varchar](100) NULL,
	[INGRESO_ID] [bigint] NULL,
	[NOMINADETALLE_ID] [bigint] NULL,
	[EMPLEADO_ID] [bigint] NULL,
 CONSTRAINT [PK_INGRESONOMINADETALLE_ID] PRIMARY KEY CLUSTERED 
(
	[ID_INGRESONOMINADETALLE] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[NOMINA]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[NOMINA](
	[ID_NOMINA] [bigint] IDENTITY(1,1) NOT NULL,
	[DESCRIPCION] [varchar](100) NULL,
	[PERIODO] [varchar](50) NULL,
	[FECHA_CALCULO] [datetime] NULL,
	[FECHA_PAGO] [datetime] NULL,
	[OBSERVACIONES] [varchar](500) NULL,
	[REVISIONES] [int] NULL,
	[FECHACREACION] [datetime] NULL,
	[FECHACAPROBACION] [datetime] NULL,
	[ESTADO] [bit] NULL,
	[SALARIO_BRUTO] [decimal](10, 2) NULL,
	[SALARIO_NETO] [decimal](10, 2) NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
	[TIPONOMINA_ID] [bigint] NULL,
	[CREADOR_ID] [bigint] NULL,
	[APROBADOR_ID] [bigint] NULL,
 CONSTRAINT [PK_NOMINA_ID] PRIMARY KEY CLUSTERED 
(
	[ID_NOMINA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[NOMINADETALLE]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[NOMINADETALLE](
	[ID_NOMINADETALLE] [bigint] IDENTITY(1,1) NOT NULL,
	[HORASEXTRA_ID] [bigint] NULL,
	[HORASTRABAJADAS_ID] [bigint] NULL,
	[DEEXTRAORNIDARIO_ID] [bigint] NULL,
	[CALCULOIMPUESTO_ID] [bigint] NULL,
	[NOMINA_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_NOMINADETALLE_ID] PRIMARY KEY CLUSTERED 
(
	[ID_NOMINADETALLE] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PROYECTO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[PROYECTO](
	[ID_PROYECTO] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [varchar] (50) NOT NULL,
	[TOTAL_HORAS] [decimal] (18,2) NOT NULL,
	[INICIO_FECHA] [datetime] NOT NULL,
	[FINAL_FECHA] [datetime] NOT NULL,
	[COD_PROYECTO] [varchar] (50) NOT NULL,
	[COMENTARIO] [varchar] (200) NULL,
	[ESTADO] bit,
	[CONTACTO_ID] [bigint] NULL,
	[CLIENTE_ID] [bigint] NOT NULL,
CONSTRAINT [PK_PROYECTO_ID] PRIMARY KEY CLUSTERED
(
[ID_PROYECTO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[REGISTROACTIVIDAD]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[REGISTROACTIVIDAD](
	[ID_REGISTROACTIVIDAD] [bigint] IDENTITY(1,1) NOT NULL,
	[FECHA_INICIO] [datetime] NULL,
	[FECHA_FINAL] [datetime] NULL,
	[TOTALHORAS] [decimal](18, 2) NOT NULL,
	[DETALLE] [varchar](500) NULL,
	[ESTADO] [bigint],
	[PROYECTO_ID] [bigint] NOT NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
 CONSTRAINT [PK_REGISTROACTIVIDAD_ID] PRIMARY KEY CLUSTERED 
(
	[ID_REGISTROACTIVIDAD] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[SOLICITUD]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[SOLICITUD](
	[ID_SOLICITUD] [bigint] IDENTITY(1,1) NOT NULL,
	[FECHA_SOLICITUD] [datetime] NOT NULL,
	[FECHA_INICIO] [datetime] NULL,
	[FECHA_FINAL] [datetime] NULL,
	[COMENTARIO] [varchar](200) NULL,
	[DIAS] [int] NULL,
	[DETALLE] [varchar](300) NULL,
	[ESTADO_SOLICITUD] [char](10) NULL,
	[SOLICITANTE_ID] [bigint] NOT NULL,
	[TIPOSOLICITUD_ID] [bigint] NOT NULL,
	[ID_HORARIOLABORAL] [bigint] NULL,
 CONSTRAINT [PK_SOLICITUD_ID] PRIMARY KEY CLUSTERED 
(
	[ID_SOLICITUD] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TELEFONO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[TELEFONO](
	[ID_TELEFONO] [bigint] IDENTITY(1,1) NOT NULL,
	[TELEFONO] [varchar](22) NULL,
 CONSTRAINT [PK_TELEFONO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_TELEFONO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TIPODOCUMENTO]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[TIPODOCUMENTO](
	[ID_TIPODOCUMENTO] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE_TIPODOCUMENTO] [varchar](50) NOT NULL,
	[DESCRIPCION] [varchar](200) NULL,
 CONSTRAINT [PK_TIPODOCUMENTO_ID] PRIMARY KEY CLUSTERED 
(
	[ID_TIPODOCUMENTO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TIPONOMINA]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[TIPONOMINA](
	[ID_TIPONOMINA] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE_NOMINA] [varchar](50) NULL,
	[DESCRIPCION] [varchar](200) NULL,
 CONSTRAINT [PK_TIPONOMINA_ID] PRIMARY KEY CLUSTERED 
(
	[ID_TIPONOMINA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TIPOSOLICITUD]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE TABLE [dbo].[TIPOSOLICITUD](
	[ID_TIPOSOLICITUD] [bigint] IDENTITY(1,1) NOT NULL,
	[NOMBRE_TIPO_SOLICITUD] [varchar](50) NULL,
	[DESCRIPCION] [varchar](100) NULL,
 CONSTRAINT [PK_TIPOSOLICITUD_ID] PRIMARY KEY CLUSTERED 
(
	[ID_TIPOSOLICITUD] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[EMPLEADOPROYECTO](
	[ID_EMPLEADOPROYECTO] [bigint] IDENTITY(1,1) NOT NULL,
	[EMPLEADO_ID] [bigint] NOT NULL,
	[PROYECTO_ID] [bigint] NOT NULL,
CONSTRAINT [PK_EMPLEADOPROYECTO_ID] PRIMARY KEY CLUSTERED
(
	[ID_EMPLEADOPROYECTO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

SET IDENTITY_INSERT [dbo].[APROBACIONSOLICITUD] ON 

INSERT [dbo].[APROBACIONSOLICITUD] ([ID_APROBACIONSOLICITUD], [FECHA_APROBACIONSOLICITUD], [SECUENCIA], [RESPUESTA_SOLICITUD], [COMENTARIO], [ENCARGADO_APROBACION_ID], [SOLICITUD_ID]) VALUES (1, NULL, 2, N'P         ', NULL, 2, 3)
INSERT [dbo].[APROBACIONSOLICITUD] ([ID_APROBACIONSOLICITUD], [FECHA_APROBACIONSOLICITUD], [SECUENCIA], [RESPUESTA_SOLICITUD], [COMENTARIO], [ENCARGADO_APROBACION_ID], [SOLICITUD_ID]) VALUES (2, NULL, 1, N'P         ', NULL, 3, 4)
INSERT [dbo].[APROBACIONSOLICITUD] ([ID_APROBACIONSOLICITUD], [FECHA_APROBACIONSOLICITUD], [SECUENCIA], [RESPUESTA_SOLICITUD], [COMENTARIO], [ENCARGADO_APROBACION_ID], [SOLICITUD_ID]) VALUES (3, NULL, 2, N'P         ', NULL, 2, 4)
INSERT [dbo].[APROBACIONSOLICITUD] ([ID_APROBACIONSOLICITUD], [FECHA_APROBACIONSOLICITUD], [SECUENCIA], [RESPUESTA_SOLICITUD], [COMENTARIO], [ENCARGADO_APROBACION_ID], [SOLICITUD_ID]) VALUES (4, NULL, 1, N'P         ', NULL, 3, 5)
INSERT [dbo].[APROBACIONSOLICITUD] ([ID_APROBACIONSOLICITUD], [FECHA_APROBACIONSOLICITUD], [SECUENCIA], [RESPUESTA_SOLICITUD], [COMENTARIO], [ENCARGADO_APROBACION_ID], [SOLICITUD_ID]) VALUES (5, NULL, 2, N'P         ', NULL, 2, 5)
INSERT [dbo].[APROBACIONSOLICITUD] ([ID_APROBACIONSOLICITUD], [FECHA_APROBACIONSOLICITUD], [SECUENCIA], [RESPUESTA_SOLICITUD], [COMENTARIO], [ENCARGADO_APROBACION_ID], [SOLICITUD_ID]) VALUES (6, NULL, 1, N'P         ', NULL, 2, 8)
INSERT [dbo].[APROBACIONSOLICITUD] ([ID_APROBACIONSOLICITUD], [FECHA_APROBACIONSOLICITUD], [SECUENCIA], [RESPUESTA_SOLICITUD], [COMENTARIO], [ENCARGADO_APROBACION_ID], [SOLICITUD_ID]) VALUES (7, NULL, 1, N'P         ', NULL, 2, 9)
SET IDENTITY_INSERT [dbo].[APROBACIONSOLICITUD] OFF
GO
INSERT [dbo].[AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp]) VALUES (N'1', N'ADMINISTRADOR', N'ADMINISTRADOR', N'')
INSERT [dbo].[AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp]) VALUES (N'2', N'RECURSOS HUMANOS', N'RECURSOS HUMANOS', N'')
INSERT [dbo].[AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp]) VALUES (N'3', N'EMPLEADO', N'EMPLEADO', NULL)
GO
INSERT [dbo].[AspNetUserLogins] ([LoginProvider], [ProviderKey], [ProviderDisplayName], [UserId]) VALUES (N'Microsoft', N'369d841c-b981-4a4d-b408-56902a92632b', N'Microsoft', N'18127048-4b04-4a5d-8c78-556b315649d7')
INSERT [dbo].[AspNetUserLogins] ([LoginProvider], [ProviderKey], [ProviderDisplayName], [UserId]) VALUES (N'Microsoft', N'c70b66ca-96a1-4238-8a83-110f1d7e46ed', N'Microsoft', N'68890dd1-80fc-4c65-9481-f5a1275897ec')
GO
INSERT [dbo].[AspNetUserRoles] ([UserId], [RoleId]) VALUES (N'18127048-4b04-4a5d-8c78-556b315649d7', N'1')
INSERT [dbo].[AspNetUserRoles] ([UserId], [RoleId]) VALUES (N'68890dd1-80fc-4c65-9481-f5a1275897ec', N'1')
GO
INSERT [dbo].[AspNetUsers] ([Id], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [EmailConfirmed], [PasswordHash], [SecurityStamp], [ConcurrencyStamp], [PhoneNumber], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnd], [LockoutEnabled], [AccessFailedCount]) VALUES (N'18127048-4b04-4a5d-8c78-556b315649d7', N'Practicante1@proinsalat.com', N'PRACTICANTE1@PROINSALAT.COM', N'Practicante1@proinsalat.com', N'PRACTICANTE1@PROINSALAT.COM', 0, NULL, N'SNXBJZO7YYRNUGAWFG6WTIGNXVO6GV5Y', N'fcf65fb7-f741-43a8-b952-abd19ddd14a5', NULL, 0, 0, NULL, 1, 0)
INSERT [dbo].[AspNetUsers] ([Id], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [EmailConfirmed], [PasswordHash], [SecurityStamp], [ConcurrencyStamp], [PhoneNumber], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnd], [LockoutEnabled], [AccessFailedCount]) VALUES (N'68890dd1-80fc-4c65-9481-f5a1275897ec', N'tcamacho@proinsalat.com', N'TCAMACHO@PROINSALAT.COM', N'tcamacho@proinsalat.com', N'TCAMACHO@PROINSALAT.COM', 0, NULL, N'PLBWFLLIIWIZE4HX2F5VACRBK2U2Q6KK', N'0c2f56a4-d4a9-4cd8-bc37-a8f09bffcb9f', NULL, 0, 0, NULL, 1, 0)
GO
SET IDENTITY_INSERT [dbo].[CARGO] ON 

INSERT [dbo].[CARGO] ([ID_CARGO], [NOMBRE_CARGO], [DESCRIPCION]) VALUES (1, N'CONSULTING MANAGER', N'CONSULTING MANAGER')
INSERT [dbo].[CARGO] ([ID_CARGO], [NOMBRE_CARGO], [DESCRIPCION]) VALUES (2, N'SOFTWARE DEVELOPER', N'SOFTWARE DEVELOPER')
INSERT [dbo].[CARGO] ([ID_CARGO], [NOMBRE_CARGO], [DESCRIPCION]) VALUES (3, N'CONSULTOR', N'CONSULTOR')
INSERT [dbo].[CARGO] ([ID_CARGO], [NOMBRE_CARGO], [DESCRIPCION]) VALUES (4, N'SUPPORT', N'SUPPORT')
INSERT [dbo].[CARGO] ([ID_CARGO], [NOMBRE_CARGO], [DESCRIPCION]) VALUES (5, N'SOFTWARE DEVELOPMENT MANAGER', N'SOFTWARE DEVELOPMENT MANAGER')
SET IDENTITY_INSERT [dbo].[CARGO] OFF
GO
SET IDENTITY_INSERT [dbo].[CORREO] ON 

INSERT [dbo].[CORREO] ([ID_CORREO], [CORREO]) VALUES (2, N'Practicante1@proinsalat.com')
INSERT [dbo].[CORREO] ([ID_CORREO], [CORREO]) VALUES (3, N'tcamacho@proinsalat.com')
SET IDENTITY_INSERT [dbo].[CORREO] OFF
GO
SET IDENTITY_INSERT [dbo].[DB_ERRORES] ON 

INSERT [dbo].[DB_ERRORES] ([ErrorID], [UserName], [ErrorNumber], [ErrorState], [ErrorSeverity], [ErrorLine], [ErrorProcedure], [ErrorMessage], [ErrorDateTime]) VALUES (1, N'PROINSA\tcamacho', 515, 2, 16, 32, N'dbo.RegistrarAprobaciones', N'Cannot insert the value NULL into column ''FECHA_APROBACIONSOLICITUD'', table ''GestionPersonalProinsa10.dbo.APROBACIONSOLICITUD''; column does not allow nulls. INSERT fails.', CAST(N'2024-06-29T15:24:18.683' AS DateTime))
INSERT [dbo].[DB_ERRORES] ([ErrorID], [UserName], [ErrorNumber], [ErrorState], [ErrorSeverity], [ErrorLine], [ErrorProcedure], [ErrorMessage], [ErrorDateTime]) VALUES (2, N'PROINSA\tcamacho', 14624, 1, 16, 260, N'msdb.dbo.sp_send_dbmail', N'At least one of the following parameters must be specified. "@recipients, @copy_recipients, @blind_copy_recipients".', CAST(N'2024-06-29T15:27:45.267' AS DateTime))
INSERT [dbo].[DB_ERRORES] ([ErrorID], [UserName], [ErrorNumber], [ErrorState], [ErrorSeverity], [ErrorLine], [ErrorProcedure], [ErrorMessage], [ErrorDateTime]) VALUES (3, N'sa', 14624, 1, 16, 260, N'msdb.dbo.sp_send_dbmail', N'At least one of the following parameters must be specified. "@recipients, @copy_recipients, @blind_copy_recipients".', CAST(N'2024-06-29T16:09:21.687' AS DateTime))
INSERT [dbo].[DB_ERRORES] ([ErrorID], [UserName], [ErrorNumber], [ErrorState], [ErrorSeverity], [ErrorLine], [ErrorProcedure], [ErrorMessage], [ErrorDateTime]) VALUES (4, N'sa', 14624, 1, 16, 260, N'msdb.dbo.sp_send_dbmail', N'At least one of the following parameters must be specified. "@recipients, @copy_recipients, @blind_copy_recipients".', CAST(N'2024-06-29T16:11:29.253' AS DateTime))
INSERT [dbo].[DB_ERRORES] ([ErrorID], [UserName], [ErrorNumber], [ErrorState], [ErrorSeverity], [ErrorLine], [ErrorProcedure], [ErrorMessage], [ErrorDateTime]) VALUES (5, N'sa', 14624, 1, 16, 260, N'msdb.dbo.sp_send_dbmail', N'At least one of the following parameters must be specified. "@recipients, @copy_recipients, @blind_copy_recipients".', CAST(N'2024-06-29T16:11:42.267' AS DateTime))
SET IDENTITY_INSERT [dbo].[DB_ERRORES] OFF
GO
SET IDENTITY_INSERT [dbo].[DEDUCCION] ON 

INSERT [dbo].[DEDUCCION] ([ID_DEDUCCION], [NOMBRE_DEDUCCION], [DESCRIPCION], [PORCENTAJE]) VALUES (1, N'CCSS', N'', CAST(10.67 AS Decimal(10, 2)))
INSERT [dbo].[DEDUCCION] ([ID_DEDUCCION], [NOMBRE_DEDUCCION], [DESCRIPCION], [PORCENTAJE]) VALUES (2, N'RENTA', NULL, CAST(0.00 AS Decimal(10, 2)))
INSERT [dbo].[DEDUCCION] ([ID_DEDUCCION], [NOMBRE_DEDUCCION], [DESCRIPCION], [PORCENTAJE]) VALUES (3, N'ESPECIAL', NULL, CAST(0.00 AS Decimal(10, 2)))
SET IDENTITY_INSERT [dbo].[DEDUCCION] OFF
GO
SET IDENTITY_INSERT [dbo].[DEPARTAMENTO] ON 

INSERT [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO], [NOMBRE_DEPARTAMENTO], [DESCRIPCION]) VALUES (1, N'DESARROLLO', N'SOFTWARE DEVELOPMENT')
INSERT [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO], [NOMBRE_DEPARTAMENTO], [DESCRIPCION]) VALUES (2, N'CONSULTORIA', N'CONSULTORIA')
INSERT [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO], [NOMBRE_DEPARTAMENTO], [DESCRIPCION]) VALUES (3, N'SOPORTE ', N'SOPORTE')
INSERT [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO], [NOMBRE_DEPARTAMENTO], [DESCRIPCION]) VALUES (4, N'OPERACIONES', N'OPERACIONES')
INSERT [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO], [NOMBRE_DEPARTAMENTO], [DESCRIPCION]) VALUES (5, N'SERVICIO AL CLIENTE', N'SERVICIO AL CLIENTE')
INSERT [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO], [NOMBRE_DEPARTAMENTO], [DESCRIPCION]) VALUES (6, N'GERENCIA GENERAL', N'GERERENCIA GENERAL')
INSERT [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO], [NOMBRE_DEPARTAMENTO], [DESCRIPCION]) VALUES (7, N'FINANZAS', N'FINANZAS')
INSERT [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO], [NOMBRE_DEPARTAMENTO], [DESCRIPCION]) VALUES (8, N'RECURSOS HUMANOS', N'RECURSOS HUMANOS')
SET IDENTITY_INSERT [dbo].[DEPARTAMENTO] OFF
GO
SET IDENTITY_INSERT [dbo].[DEPARTAMENTOSUPERVISOR] ON 

INSERT [dbo].[DEPARTAMENTOSUPERVISOR] ([ID_DEPARTAMENTOSUPERVISOR], [EMPLEADO_ID], [DEPARTAMENTO_ID]) VALUES (1, 2, 2)
INSERT [dbo].[DEPARTAMENTOSUPERVISOR] ([ID_DEPARTAMENTOSUPERVISOR], [EMPLEADO_ID], [DEPARTAMENTO_ID]) VALUES (2, 3, 1)
SET IDENTITY_INSERT [dbo].[DEPARTAMENTOSUPERVISOR] OFF
GO
SET IDENTITY_INSERT [dbo].[DIRRECCION] ON 

INSERT [dbo].[DIRRECCION] ([ID_DIRECCION], [DIRRECION]) VALUES (1, N'Tejar , El guarco , Cartago')
INSERT [dbo].[DIRRECCION] ([ID_DIRECCION], [DIRRECION]) VALUES (2, N'Cristo Rey , San Cristobal , San José')
SET IDENTITY_INSERT [dbo].[DIRRECCION] OFF
GO
SET IDENTITY_INSERT [dbo].[EMPLEADO] ON 

INSERT [dbo].[EMPLEADO] ([ID_EMPLEADO], [IDENTIFICACION], [NOMBRECOMPLETO], [FECHA_NACIMIENTO], [FECHA_INGRESO], [FOTO], [TIPO_FOTO], [SALARIO], [SALDO_VACACIONES], [CARGO_ID], [CORREO_ID], [HORARIOLABORAL_ID], [DEPARTAMENTO_ID], [ESTADO], [AspNetUsers_ID]) VALUES (2, 305070198, N'PRACTICANTE', CAST(N'1999-01-01T00:00:00.000' AS DateTime), CAST(N'2023-01-01T00:00:00.000' AS DateTime), 0xFFD8FFE000104A46494600010102001C001C0000FFDB00430006040506050406060506070706080A100A0A09090A140E0F0C1017141818171416161A1D251F1A1B231C1616202C20232627292A29191F2D302D283025282928FFDB0043010707070A080A130A0A13281A161A2828282828282828282828282828282828282828282828282828282828282828282828282828282828282828282828282828FFC200110801E3025203012200021101031101FFC4001B00010003010101010000000000000000000004050603020107FFC400190101010101010100000000000000000000000102030405FFDA000C03010002100310000001FD50000000000000000000000000000000000000000000000000000000000000000000000000000001C6196456964CA7B9AD42B21A5FB2519ADB306378C44A35AA4B2664BCFAB0000000000000000000000000000000000000000514B7ACCC09765419CECDADABA2E6CCAF91316BBEDBFB9204895D523F59299E1F24089C2C851C2D4AEB136D7F01797DED2EE61D8F2815A9EB83EF66D54F71AC0000000000000000000000000000001173D2E96065E1E776FC692CA6F4B0293E49F3DDF4E2B6777F8C727DF90001F3E800000039F4003E7D15CB1E16DEF6C85A6F376F1EF59000000000000000000000000011FE6226BD68614EE7A3E67A26E7FBEBF5AAABF9BE6F3FBF6BE3A4C8B063E756881D6253E7D0000000000000003DFAE5EEC8126D7CED2FEE66EAC982C000000000000000000004027C5C9D567A5DD579959DD821D1493FB77D957199CEB2F291115D9D49A8695AABB79FC3588F1BEFCC8250003D790F3E877E04FBE67D7D7A72EB280000911E6D9DDCFD6E48A4B8EB5576945356C05C8000000000000000003F3BD96573D2E7B9CE3C7ACA5BE2CFC6CEDFBE3C40BCC71C6A2C18FABBAE961F2AB5CFDF1314140000951A7D6D95B699BD234127D9D5736CA99B2281AB83849DDE3D9DB9F99B642951459F18DCE9D39B36CA8A776D4B0F79BD26E0580000000000000003E191EB4769CFB5B79CAC18B6F31B6D521EAB9C833A66AE6AEEAE6F20F7B88DC8C814000012124E6AFB17AD7BD3D0DF4A234CC0B1B0CE6B5A8CF5A7999813F33A65A8B8A7B23B74E6926C29F0F53C0CD004338E92B2AF6D88DE0000000000000015459E4AAA5E7AD0D8E8FBE2D3D1CAB2B6CAE38C572F23347333BA0CE6A6EA742F7CD8094078F75C7794007CB1AAB2D4ACCBCF9CE916EF39A3919FBDCF1B9E1257188D0708136F5659534D45A2C79B1469333D644299A90C6680F9F4408B33D5D5ECACB6A7A730B00000000000029A9AFF003F8E96DF4C45758E3EE9AF81607AF24C80A9B6CC5D585BF0EF202002391E7439CA088D26016D1E4E6AA9FF0040CD5E5DE5F4D4779253CACEEFED901CD88DBC56AAE816335CE2D5686DAFD3E3EF12D38D6584CF19F03B4490807CCE693237565B8FCFF75BCF61AC000000000000301BFC54DDC7DADF3CAFACF47D06B77633CC00192D367EEB4E2640014F3E3DB622403845AFBEB7CE3EC6D2EAFF003DA9C1A5AF99F938B0DB409F60320657CEA308DC1B3890EF493D64CA4B8FBC7B63972ABB9CDDD692BEC23CCC856D90CEE8B2F75274701B9A71AE6000000000000C56CB159DD57BF1719EB9DDB65F5B321303E1F4159192AEAC84C803E1456302F2EA14DE55B25BC5E1516C8B2EB985E9FA0C39D73CF03A8A659112BB7CB243980201330D716EDFE79754BAABBCE6EBF3BFD22E72D7B9FD062329ABCA1AB46933399D3662F6EA565755943654BA9CB74CEBC5C00000000000040C168BB63AFDA2D26472B2BC813D024000CD5DE775377EC4C0085368ED9763CFA483E14F51EEDF5D2B34153749788921CF1D1E1D83B5AE8C7204022F39C51E1319A1A4A9BD216AB2A6EF2466C9B8CCD77A8D1DB6774539D07DEB5577AECBE96859DED2DD3A730400000000001E7D0C0E8A2C5E7D6D313ACC84BB4EA4C0000190D7E435F76130033DA1CEDD688F933F6925662EEE5592AEB7DF71D6AE77749759629F7FE7B00C80008472C55A6AEEF1575E734BA4B9C668599B8EFD232BA67A16AE9F1D20EC7296E9EF39A2A0353E6B759716437CC0000000000000A7CCEAF398E95B16DEA674DA8CF20000321AFC86BEEC2600F99EBBC85DE8B3F1FA5D73E979A3D4C7CC46CACFCC7D2EB39FD549E7321200000ABB4FA7AAE8B95DDFD1BF39BBA2E7A91CFA3E766EEE70BBEFA2C1DE663F48DEF17E2657CB2627DB4883BEC46DF7CC2E000000000000008B80D2F8C74ED8CDBE1B3ADD3CFA980007CFBF0C8EBF21AFBA0997CFB44B0A22F35D107C6BEE6C7C6277FAE7F9BF7E3DBC1B70EEE59D15DFE79B9F7A48D400001F7E0C4C5F7F7CDBE1DE545F3E47DCBEDF7A89DD6B6A7D0C64ABA4C5C7685B0A1BECCA4DBE276DBC86B0000000000000065674FCD73DDB63367979ABE95556B20200063F618FD85D84C79CAE833377A1CE68FD559D66AF0DBC5676EBDBC1AAF9473C8EF870B4E7E7B5D70F6E400000307F6756F9B7A5A0D0F4F9F9CC5AD8FBA42951FD1745E3DC7FA7CFF3D6C28B1DEDFA19E743BAC06FFA035800000000000001576832116FF1DCFB4CD1E3367204C803C192D862F6777F44C7CC9EB79DB95D2E72E75AD7E1B739AD628B4796D7FC7B9BE7A4AD92B6F3C58E4833A075BA11F4F20000010F07FA46633A8B798E97F39A9F39D8584ED6D0EA3E9C793710A68CA5A56594D67F758BD7EA481BC00000000000000079C06CF239E959A8AEE38D6884C01E6A9A8B7157B5B32EA68CE00E193D7D36B77F69573F5CFF003DD548C97977B172EBF320ADAEFD6AF59F4C1DF2000046EBF782CA094743BA3588BFB857DF15129A856D8CBF6ACFBD0CF63A67F4F9293B6868ADECB51BC000000000000000296E8B80ADD9E1F1DB6DD282FF001873E95A9D34B4F71A66B859D2357A44CE6583E6774799BADE9CEE50E9EEB5BCB79D633BCADC5A7563B38F67300000000001CBAD4B55127B52EBBD9D65DD61DA6515916353A8A1CF1F93AB65D9A31BE60000000000000000339A34BF94EC6663B3D75D53690F19977593D6691319BDFCF175B59675125BBE7D9196D4E62EB7797BCCD6F736455E8DBAE56F52D224F869A219F3807D1F1F47C7A1E5EFE5797A4797A1E60CE2D2C6B0EFAEF98B19DDAD8D0AE244CF4A0BFCD67971ECE36EC06F9000000000000000000286F92FE79A5F39DC74E5FA0E3279A5C0EFB225AD777F527A915967233FA0A8B7DF5856BBEBEA0DBD75D75E1DE795377C27CCFB19E1F7D7CFB6000000000787DF9281F1F400C66BF10DE86AAE29536C3A7300000000000000000001556A3F3AE3CA0E3BFE990721B8668ADF37A5CA8AF682FD1027F193F3EDD60F59D7A69FA76A7CE6C7D44B33CFA2600F5F4B003E44262B3B2CD08001E7E1280008054F0AF96E97549774533B91D79800000000000000000008B2A8E5FCF22F78EB61D39C19D2EB65F9FEEB2A7BC8292C04CE02FEB731D7A5AC28BB0DCD9581C798007AFBF3ED90AA6F7B2E57AE94B43C748339693FCA7A7CFA8F9F7C9F04A00867AC571D33A74A3D06564D567B439A3F411D7900000000000000000000C96B7073796E5EBCDC58D758D767A76DA61F511A2A1D065F3750F9F667318DDE623B6F968B39F773F5DB3FC6BF51E52D067207DF5E3D57D0800000F83C928072CB5B6B4B67A5B6920E9B1B25CE4F594D9D58D0CE86BBFF00BC7B75E200000000000000000003F35FD2BF289D2B05E5615F61033D7E5C53CF37F97D054E2CF9F9AD2A55E27F40C4DE94FE6EF877E5533B9F09DBF4FD0FE2BB2E7CF70E5D73803EFDF23DBC2CF6F03DFCF297EFC02AA92EB599F8BA4B337A994B02E58ED8E626A5D658D4F3D3859D75D6BE55758F4E408000000000000000000FC8BF5DFC9A6AB85C4F833614EBF27419A9A3999AD873DE2F7181D4D5B603F41C62576FF050FA4D4D1E7AD1AFACEDE336DB5ADEF9BA9FB9BD0673D021CF812D4D9E6B7507F2B89B9FA253676BEEBF53BFFCC35F269DCBADE6000813C6462778DCFB6BF0DFA2E1359D25BD1DE5C058000000000000000000C3EE384BF8F79BDA4254393195322495EDA8CC49C75F9D2665B53F4EC9DE41C67F3983E247A3970D4D45BCDD4469DCBA6216B73D1F9DFD66CFF0E93CF5FB6F9FC552FEC15BF98F9AD863BCC8E99F1D7E3A66D333A6A4E5BEB3B3F3359D76B3F2EB1CEFF69F7F9B7E879CF61720676A36B86C74DBC0972B58A1BEE1DC0B00000000000000000000E58DDBA5FC8A37E93F9DB7CDEB9B337C78E33ADF66BB48D49DA2FCE7F44CE7F35F12A2F7C26439CB3B8F88B8DFA8D632359A45DF38A8A9D4D749E53FB6955EAE3891A6C0BA9738FBF3A63C57D9FCCABECABFAE2E977DF996E73D3721C8051DE7C58D2BC7B4000000000000000000000000A4FCCFF4BFCD26BC7BF1EEE7AFDF9D73DB3D6F57E3BF399D62D2E1ABA79517713A0DA4BEABECEB33DDEBE7DDF3F9EF8FBCF591F63F9D7095E39358F8E7D78FB57B417EE39FE53A0F4E21A9E6B6740E4BDDBE27673AFE84272000000000000000000000000000028BF3726B97419EBE89D6B219DF9AB892C46DEAE0C6BCD7137F475E1E470FA1F7E1AE7EB9935EBE971E6E8C6F9D39BF3781D31C611CD7BB633D77C27200000000000003FFC400311000010302040406030002020300000000030102040005101112132021224014233031323324345015410625354370FFDA0008010100010502FF00EFA42304D0CD09495326323225C24E91DD9B5E3E3697DD4094EBBD2DD8D5FE52457F93914DBA9A9977A1DCE3BA9A713911C8BFD9739ADA99726B2900690FF0C3DB7A122D3642295641CB4910CFA6C0A48224A48A14AD8156D0EB6474B1C4B4B0C2B4E8094F8456D69D0A166E56535B5E3268E9B76CA87728EEA191844FE7CE9E82552CC4421E7AD110EFA01441524FADC926A6C122D36032921852BC286B672A45727A2A99D3E28D551C41535C8E47351D44862752C27B559324C658D7009BF9642B074E959D4E9656D4102E06923151651094186F250A2899D9E94CF80B106FA0964445111A567F1A499A0122C82B4914FA95925959B91ED9C44A3CB7928111E4A10062A46AAD6D3EB6DD4A9976EF639D48D902232E0CCDAE47A7F0CE66058E23E7CAC654A68E911E67C686D65302AB4D1B5B4E7B5B4E3AD2AAAF72DCA9463223A2100E0CFC951734FE01CC816CF2B9EF881D91D2F2A953355478EE32C68C8D6B588DA7911B4F2B9D81640C748631290665A68DC9DC3572A1B9AB45030A9A0D0DD1A430EDEFA49DA01BCF924570D1FE3035E30352A4A956244DCA081111551A8432AE062B449ACD29411583A40B969C2D3EAB511F4A992FA41D3A944D5A4D4CAE4E49317274493B9DE499628E86BA95CAEDF90AD8655A6C05A743131AECB543879D087A688446539CAE5A952502808EE2A8859D35A8D4799129555578DA99BAB3EAC5322B48D5A1BB5A7A0E166827E74E73874C7B5D84C8D50E46F8FBA6FE54D6098CC5EE463649D4CE8512843D0852E9C659F65B0E3EA508F5539C8C42115FE9474EB5F723BF33145C95E9B8C3794F45CD381992D2A64B417E957AB7548761ADD909DADB211D1CCC723D9DC5C4BB512D8CE782AE492E46F3A0C6CE843D2852E25220871D8B24C366A739518D7395CBE90BA44AB9209FADF8B5D9B82FD2E3B3250BF60D4672B18D7239B87DACC15EAADC5ABA5D232755B9EA237717C275C36688F4AA8953A46BA851F71403A3138263D4C708D0631B74308FD6EF4CDD22B8134859D21C558FDB0910ACCF58670B58A19B746BCEA2AED1B063B4B8EDE3CF349AD5D314C870F6CAA88857F899849A36D12595F4ECD6A28779F1C746269E0944DA0DB879A85BA9F21FEA01337C85CDF3C9ACF25BA1D84826D861B74C490C583244F4C17F165D5C1B9509FB83C00B9B5C9A5DC245DA7FBA5B9FE1E676AE546A5CA73483F7A14323EB6051C69A8E58E24635CA826704F7EB3059B630F48D79AF0B9C8D68F53F83FD87A4672681C31EF4A9ABAAE984F76B2B532490269C51DEE8C6AB88F50ADE4D622B758EDE5D2EC06BA5F2538953340AEDBEE0CA8C5DE07673268E3D1092263850286260F09C6DC25B85A582E86B9752E2F7686426EEC9AD5D1C49F90FE0075A9D724B912ACA2E48BB973A72E96C0453CFC2E91B74704FADAE4D4D03BC3C9A929B726393745811DA85C5299A87CA447B2139765743900004662A272C66976C5145BC5F6A5555E1B8BF20DB5990B8CEE57BDA88D6E277681456A0D857E48AAE319AD48F16DC999EAE24C8765164CC678562C80910A3B8B3235BCDA9B736F99009A0B83C8C6514BD3C2BED00BA08C5F0F74ECAE42DD896E7E62C651774D087B61E2B8BB51C2DD02E23110438A356B381DE6CA22E49712D59C1A89737E8876C6F4D1DEA63807B41C64850E188F501EE2DCC037A8DF3722C556E71DB2D9B2D79A45082C1D4D4FC68EED61E1562BA4CA76E042FDC0F64EFC4B86134C8C1461EE1B8DBE74CE3779F2F80CF418EDD9A308F4633A8E68E24086F6FE505BA634E2ED86D21D67E1BC47A03FC4456375244222802E22B62B1BE270226A1DB5D98E8ABB25C58BA6EB2D9B65B4BB542ECAF79788824D6197276A955556DA3C9BC477690DB9B99F8A413685047A03C135FBA66A696DC0DA9F688F9255C9DBB35A9A5B289BC6841D88FC24621182CE2CB55D8969F28FF008F72BB8B6A409FB83C222E8994766E0A09770581B95C2F2CCAAC6BE5F6456F899412B80A01EE2FBA89BA07C5705CA3DB13A78A526E48C8ACA6486AAE1209B42B70F53E59B687080B24E888D47BB432226ECA9E5D02B547DC37139C8C6DC4CC906F65BC0F4C92BF35983F130ADA4C4CBB737063B6276123F7AE8CD70AC4BE6762F5D2C8E440C5009C724DC851A0B35C8E3B9AF2B7A651B8A17987A20DA44519814194C7D4C26F198D6842573A41E1C748E1ABB13445B7B740DEAE9322389001E1932580AF0E796EF0C3F0EE456BAE8DD706ADEED50A4B7C2DC709FF00B31DDA815714C8F19FB81A7F54F337506C49D7D8CF76986C47C87086D132E6EF36D8DE5C7725F3A2A651F8663B44780DD31F1B8A0D181D63A952B79B6B89B6DC2EE4D72653F40ED31B43784E85720230C38DDC5A24199AED350E788116E32852923CB66DB5ED755C3F66DCECC15744AB63F08DD771AB6C7D9ECAE257482004D0B2A6AE7261374C6E39EB9C96264CE1B9BA989A5982F242B964C890448C183077DA31498D423A3D5EE463109996DF196417D17B9AC6DC6608C324A311BC08AA94E72BD6D8EEBAB9FD509DA6439726DA1BAA6F64E4CDB1DEE8E7C0CB99869A47C67EA97C47EBB86371364911A800C48EE98644C930BB974468719D24836346CF4264B64669CE490F0DBCE5A1DA1B496BCA5F818D4EB7465A9C0F0F21F188D4A1BD46F13D083B97D0D5C9D2DD946B133B4BD8914704FB8C905408DBD4FF0043DE67103AEE181658D94E72B9E6338B439C61B5B752D06E417D22A2A198EB84A10DA267A12CE91C51A2126BC1184049F34EC5D6423984922A877247BAAF82E986FCE2C10F89952C5B122D8EF2EE7F569F2A63FF001ADC2DA89D9DD7F5A68D424311D2481FBBD007397C2BC92DBCCB225B474533CB8318E7D360C97532D475A4B43A96D0FA4892C4D131A31FA2689BF27D922CA490554CEA50D07369EC4725AA52AD4D1EEC50134C5B18BA6F0994CB62F99745AD3FF5F087E264F69734CE15C0B9321895A007DDE844FDAE13AE41691CD65398E655BE0EF34D2030865B99C8BE225D32E124751268A452FA695773ED46852962BDD77E4D5521307E694022181A1DB91C4810DF13CFB77DF717667DA5F0366E999DA4A4458C162C93B93CB1F227A10FF6B817954B91BAA2138AE408E28E309F364B34251C033B72DA3E0E655B66EF52FA77976B96AC45ADA6F02A2A5599DE5061B5926AFB56C4EB4F3E555BF95D3B4BB1956A3076474BC9C9CD38E27ED705C4D95209CA3B72A2472B9F2E42359021DBE4699D521754EC5D9B563190E0F4A6F3B8D187A13170D1C3B5F4CCC2F6FCE43176A05B47845E9BBF684F225E12534C88CBA81C71F94AC5CB92471AC834C4CA235EE51DBA278765F09C90798925496B04CCB86D0FD2FF004AE29A6E1471EE31CD56AD46064B50BFF234F723187D65AE67563518DACF4DDBB4971DB204023844AB8B723DB9D9838DBCA5E32FF5A39764B3151625902D56D5E973995B6BB58847B8E58AEA8EC7067FA57B1F53573689DAC6A88B48D6A60E7696DA7A968CC695B711ABE2B18B08F84DE52FB59F1524B2299556E79656C7644E3274CBE0960D97B0DF8F63FA2AF6994B4F66B1140462B1D8451E8653FF007BD2961DF00974BA3976DCD723929551A93646BA862D88D9E32C0920108AAE4AB9A75B173676B3E1EF5497BC858EFD06E27391A877238C9ED8BDA8F6C98CE0D58C8D4755EC59882B9B13D883691162BA85191AB807CCB8FA77487AA864CE93956EBE886AB5C376A5E1B83362522E69734E88CB9C7ED5CBA5B17CF99259B668AFDC0702AE4836BA71AEAC464A0AE61E03FD01191D56F9A921A662144AD7473457EB17049320476C12B01E8483200437A11984AB70CCAEB7CA6532DB25F512DE2052AD6A4AB8CADA635DD2C223C95285BC080FD42B8A671E02E70FB59A379A3437A01F721F2B69327701F390710DA21DED3CE86B9C6E02266CB2AFE4C886D2380E22B6E50FC432399C020C8D2370913062A8719F289E8BDA8F6C616C0B8A71797B20BF2A74A36C86066D8F18FBCED49AD7C9B94EFD5B5AE707B6B8C2490D11B97504CC723D983DDA196766785EDBE5DB9738FC36CE99D83DE83497087269F02505DB9352BC3CD3D46B6B07D93E82BE227DC8BA016D1680CA778997712ED8A2FE3C4B766F6DDD344895CE2D997F0BB7B942DE47679DB8B8CF5CA35ABF4AAECDCE1DAD7033951F883A2E54E7A350455972F3E748FCE985D4A4234630AB945D85C49B60821D9017F2E74B26C47B70F4302D5972EE2E57505A8C15ED3CAF940B1AFE3F717283B948AAD7472A147572FD7B42E70EA5B75C6B6AE47A97C8989FA27B9724BA1B268F2870E12395938FB2CCFC2C388DD202BBC44BEC4C0DC2CC26D02DE0DA11F397325B1CA28E168070D9BD22AF3FAD1B9C1B12F4F73360B0E8123A319AA8E49ADD51AC8FEAC01E54CAB8F2663714C8EAF4D988C59325FF009931551AD8C8B2A5C9FC8987220856E1AB59D91C0A53AA2D0C4D12568D48C6231B57977950D328B63FB7BAB943DF4892365DC9C827785988B9A55C136E72734B82671C0BA8385D139AB94F1652F878F101B02B8115D5D31225B85A5864F132189DD5DDDA8EC4D2CB4F4CFEEEE1050D51A4380E9E3D6CB449D4DABDB3CC88ED51E526A8F6F7671F0B927936B92D1A846A4215E831C312E651A9CCA9C8224635A99772F5C903F9136A072BAF79361324A23C910AFC8458921B2057766A896D76625E696E5C9D84E4CE315FA1D6B9A8561E3A19745685A4652265DD5DA46965B9A880A0F4DE3BD9A4D676BEA399C0235EC9B16DAEC8D49E5DC70326A1494E8FF8F872A7391A84B94765449A394BE93E48595E3A3532501EBEACB90D8E28E374925B57A29795D7BC94FDB8E5F6A5E4813398A07E522AE29A488B9A6125B95469A3890E5CF29DC3452BA08123C7E33C91829C7986A58124B4DB4B2BFC58296D23A1C4931E852335F4A419A11F993A431A8C6C55D33A8EB95C7BCBC3F4C32FBD2FC5172A63B3A13B58A73354782FD51F09CDF3955556AC91F597D068DAD7712A2391397A324EC032498875031A31D39DA2754DFDCEF2FAEA27CABFD50BE56F766054CD202E8361724F3DDC951335F16E8EC832D92C5DBCC9CC05478A59AFB801A96F86ED51EA4A798076B0DC7F613DBBBBC3B54D5F7AFF00549C96DAEC894676D4EC2E69C8C9E631725A8921D1CB0A6324B7B4291826C89C490E876D46E0F6EA65B972C063DD996D779773FB43CC3DDDC1DAA5E09ED8467E82D5C5323C27EB8F5714CE39C4AE556AB718E751BA0DC1A5EC9EF6B1245CD28708F29C000C0DC489B375A8DCAEF96C5CEE9EF15738DDDC95CDD837E3837E31DFB81B9A55B49912A526A8EE769A6F994E0A53C2E4ACB2A11558B06E4AC4191A56FAA69E01512E262A8EDF20EB1E2081C5796654D5CDABD375BCB32AB8F506DEB9C2EECCB8B7E3833E36D255C1B9C71BB411ABA9AA99A193946238273C982FA2242753F4A526C91DB6E6AC794F0BA2DC864A4E7E87B516584746BAD6E9659016A625084C1271CE16EC580FD51E5F4CD962DE8EAED50AD4B9C1EEE6A693E0CF8609F5C72687913702FE4B6E26A1D496E47711ADA749A2CB5CE67B3D8AD5837146A80506522D9DA941892814CD5A7076AA738A94F2CCA953E4095D737155643D6A62E42611CCA8771232A3DD5AB43230ADE3637C3CFB9727255C59B122CDFA7DDDEE3E4554C969BF5E0EE434F6B79750A4B349A29368D5736F9AAB953C99D306AEA97F5D3C59D0CA502C3BE3C740BB8DE8DB8475AF1B1E967464A7DCC2944BABD6A55C1D520CE92E6374A27BCF6ABA3308ADA4545A11D5B403AA2C5BA531C8F6F0DDD8A8971EA107986E51FC402CB9F84EECE269873E2380F54CABFF005605C231768B716F99B8E491089B81BA3688AAE70C5849EA6118AC760E122D2308C549321B5E38B5E38B5E224AD2B8EFA412703CA8B1DE3475753158445A455451C9A8339C1A1110A3E02B10832B5C91A2AE71A843DBEF483691B32D8E6511AB5A56989D4ABA9F4E7A35756E4598DEAB5C8C9D706E71C8C469708F9B8AF7A6A5031D4E8EF4A5454E07FCF16B55D5B68DA70D14183911C8F62B698454A1F98BF1258C998B86E01A8BFADFC0BB8D9E1549CD5F9A37E44E552FEB887E676EA185FB6F8C4F11164A646C227D927E68B9534CE4A43356B409F4B19B5E169F009A9B15D92454ADB1329E5C1BF15F7C483CAA0BB4481BB5C9B2BB295C2A99A31A8C6FF02F1FA4EF9537E45A2A6A0D00DAAA4668FB44D509EE8DCA4E113EC955FEFDF1472D6EBEB75F5BAFA52396B3E02FD98BB2DB17D80FBAD1FBDFC7BCFE9BBE54DF91699F07A697D2BF5317915E5DC661187A564FB2D2629ED49C39D27B185C05FAC7F38FF75ABF7FF8F79FD327CE99F2350BDA57DB83FEDC1BEEABF9127D97DB0FF4DA5A4C1692969B4CFA63FC1FC9F817EB17D91BEEB47EEF67FFC4002F1100020103020601030304030000000000000102112131101203203032415122404271041333052361813450F1FFDA0008010301013F01FF00B4A1936336B3633F6D9B1947F58954DA28172A8DDE8AB2BA54DCCDDA7C4D9E86A9F4A90A08A5AC6DF66EF457A95F638FAFA38C6A312A95511BA9429D6AFB1AFA05C3F658514C94A9646448B22B5EBD6835E575A1655D12A92952CB57633CEF4667969A2B0D53AB4B50D837B6DAAB5C7CF044B4C8AC343F7CD95D34AA28A591CCC2A99D65EB9D8AC8911F7A3BDC5754237B737F924A8FA4B1A455493AEB1C8F91E884AAC96684B23B2A689D0C330C922878D624FA50CD0A5E876AE48E3917BD7085F15523915D92757AABA3257C68B02D223BC7A51193E4FB791FAD12B99649D45643F8AE4561E513B12F643497B202ED7D25F144723CF23C6AB23D3161FA5A606EBCB46E835536F814684B27DA2C32BD2CAA90E596B1D228A336B2249D796AA27C98EA425713F64AEAA4703B47A70E69EB15612A0E5E11F21B92375797028D5114E39D1FB2763ED3091C4CF4E36443967A25530AC374FC925B4915A0D79E676A15D3C15A8BB4913E9E486479E49E91C09D111BC8DC375D1733C6BE344EDA4FC74D3A11BDC9E7925A274258B10CF4A2FC18324BD6AFD92C2EA4303BAD703C6B1C0FDA3BAFABF5CFB99B9B170CD8894282C0FB7A89D08BA8D5044B27DBAC745065075E8C73C8BB878EAA743B859259238167486482B6AFA29D0524F494A84723C3EB2743BAE895D54864C3191C8BD6B274EAC7D8B0FAE9D0AA1ADAC96490895052639BE6A3E83C505D759279252A3257B9E34C8D562B96A6E66E656BCDDA448F5E191E4E211BC48FAD2B44AB8388E5C3F8325171CF4D2A9BA9816088BBBAF0D389E0E191C92C9C396DB928377A9C46B6FEE3EE1C7A1B59643957486442F0C7D6587A4F08E18F352446F636A5E4DD6372964FC8F5DA586D458D37CAB243D12CF593A128D09F823863562B616748E1E899547C4AC472AE93C89D0DCA59251A6B06618EEFAEA541D1DCFF00086F277213F23C91C8EB7AA3E2CD8CD8CD8C6A993877D5194F54E9F45F6885DCD09ED2B7190C9C39373FDBF0CE34F7CF6AC1C6E0C7871DEBFF000842728B9A78149D4FD4F0B87C175597E05C3970DD243D63DAFE97ED1645DE4B3AA23FCCBF289649F6717F247FE2CBF27F4E5FDDFF004716FF00A9FF0067EA3F9E43ED5AC7B7A7FFC4002A11000202010303040202030100000000000001021110203031031240042141512232133323425061FFDA0008010201013F01FF00AD78B2CBF3ACBC597A6CB2CEE2FC66E8BC56F597E1D8F35F6777D7817E05E8BA39C57DEEAC7227BD2D0DFD678D4C785A39C378BDE6561BAF6CAFBD7F23D6FEF445EE365E38CBD6843161E163E37E5843CAD8FF00CC3D4F4A23B4F1C685B0B751F3B52C3D1F1E0218B2B6DB1788B0CA19F02DB685A5E5616CD0E9119465C0F0C4476DEA7959728AE44D3E07AACEA492889D7074A7DE843C2DB90B4BD0963AEAA4464E3EE884FBE37ABAF276A87372E71E92772AC318B6E485A5E10862EBB8929393B78F4F3FCAB57A85C314BB473B3D1AFCEF4477287A1E50CEB2ED742992959E957F9354A3DCA8EA74A9FB91E8B91D2E9FF1C72C8EE4B4BCA2CF53D1EEF7588C5C9D23A3D1FE35B3451588EED6B5844BA719728AAE365698EF35A96D56A785BED695E147C263C7C62F798BC058794AC7F8DF80B7DE112163A624A5EE35B745121780F08621885D417BFE3F038E8B2F4565887CF82863188A6CEDF73DE23AD2A1628D9C69F91F86C4AC45B970553472381DA51DAC50FBC28B2D3F663835C687E2242FC59354C5C12E04BE8FC91DE894933BD0A57C13F6C38D96D7B0D5790D77125EC47D912E0FF5EE22A95919393A1F6A74523A729489CBBBDD0B12E49F3E3FC11E09E18BF410B988FF00B11D7FD48FF58BF442FD9E25C93E76FF00FFC4003B10000102030505040A030002020300000001000203112110123141512022326171133040810423334252627291A1B15082C1144363D17092F1FFDA0008010100063F02FF00E7D9C470685718EAD95ABB457FB16DD5EB2191D14FB40B743DCB7217DCAA31817BBF658B7ECAAD615BF0BEC5566CEA14C4467DD508FE677881D55C81BCED55F8C48EAAE5DA29C3F4897CA53A2466768F3A9A2934CBA29B88F32B79FF0060AB78AE05ECDBF65C0DFB2F66DFB2F66160479ADD79F35493BA2F58C2BD4FA43DA745BB1A6B7D81DE4BD642FB15525BD429C370774FE43B385BD17F4B75EC3E4A5FA55867ECA4E845AED57AB6FDD6EDE972A2DF700B79CE2B867E6B87F2B71EF6F9ADE91E63B9AA9B770EA17AC17DBF105369985BC0154DDE8A70DFFE294605EDE6A4771DA1FE2F7DC02F550C9E6EA2BBDA49DA3725DAC4C72B35768163746814DDBA39AC2679F8398A1D9A6E9E4A4FF5907F4AF30CC7F0EE7BBC95F318B279045C1F78F55FF6792BCEE2E6B7802A4DDD0A6775AB74575540B0582AF87DD885AAFC3735DA894A6A519AE8679A9B4823F84BCF284E8C1969B175BBCE54A95376F3D6F5160AA56EAA9F13BD3529F9395FF477167E9067A536E3B5C94C61FC0CCD49C06AAEB8CDD9CBF4ABC471B2AAEC2C355A375526890D551735A59575740BD5C390D5CB7A37D82F6AE3D7C4544D6E99722A442F55BCCF80ADDA3B369CBC7DE7790D53A2C470314E0DD118919DBCB8BF0B13F6521462BD13874D5098F2555BB4164DE56E6E43D5505E76AB45570EF6428E55EEF7968ABBC355A85DA43375E3357226EC51F9F19BE6BA05EA80685375F7AC00EAB79EAF3DEE92DD9CB9A0E883A355715CD56C90ABD7691FECA946AA2DDAAAF700592CF6247882960E0B9E63B99C3571F8AD5AA965F87470C0AAD22368E1E2C9770924ADD681692EC17CB9041EF15C82E6A4DC6DA7195DAC5AE8A670555CBBA9E9643190FF00762615E18AED461EF298D9BA7C8A91B24705BFE45000D929ABAE5DB332E21A841CDC0F8979CCD027BFCAD99521C01088F1D02AE2A4DB4B8A2F89C2A595933DD92A655F39C56FFBB0F1A2E457228C17F0FBA6CBC04E481181B7E6168072D89A072213BD1DD862CF130E1E954DE75B2A64AE30EEE6AFBF87F6AF1575BB021B301441A157BD92966E5E8FF3449FEB60FA543F88CC6A15E6AE615E1C4D55E218D8E80EC316DB357C77022338D954D78F3F0E49C022E34693F85266F2C6E8E4A6E9AF9462B0DD0A431D8273C02310F4165D1DE7452D14B26D17A1C2D00FDDAE72843E5579BEC9CA62AD22CF97FCB1B15B8B5070CED2D288DABFEE1E2FFDD8E80EE1761E1A6E320BB282673C4AA2AEE8E68BDDBC79AF98A0C6A90C76430649ADD1176D92EC15F75064364B8A73CA603ACCA68D242D6426A034458ECD183170B2F66D574E2D4E6EA176673C2D081DA915D8BBFA9E49B15B8B531FAF849713F45991A64BD63BC82DC68164870B55F38957CF9299D82E392BC72AD9776E7FF5370E67649D4A0C08431D4A7C53D0227E63612700838FD56F68DE36FE42B8EE208839A93B0C0D8E96B341DF7B5BAEDDE6F1B2A17D41448472AF831D9E749E884476F935AAA5B4E27297BB9D8396CDDF89177C47B810599F11D020060360918E014F2689273DCBE67152C98D44F2B0307BC9F10E741B02243E13508382BDF12ECDD88C135DA8570E0EB779C026B84C006BB661BB029A7277FBE0DE3315459F0EC1396010D5D5DBBBA04D6E836CB8ABCFE3754ECB5830654F5418324218EA518A706E1D53F9D13DDE5653A04C60C86C3987C9186FA64A7F0941C3241E3AA6C4191BA50738EF68B73D5C3D5506F6A53931DCB69ED6F14CC9428B98A14C7EA3C1B87BB3FC5A5A0EF14D6E59F71D5DDC5DF721E3B25C5188789E5171C96AE714D60C943679A6F3AA90C5D457CE0CFDED08CDE8E4E69E2949386729A890DE64249D06189DFC95C8A3FF00DB5C3509CDD0D8D7FB8EA1D86FD6A3C2C8EFB537953C1B258DDAA91C5B45759C7FA5338A2FD69B6F3C94F41B6E7679299C5D5D96C16A006017663018AED9DFD6C70196EA03454C3009ADF7B13B45AEC0A2C761814E329804D109D0260CA72FBA115BEF7ED35DADAE6EB31639AA4789B6CFE60A145FEA5456E87C1FA49D374274B1344E7C4E015275B1ADD36FA94F76DB210F35BA43C686855D74D8ED1D697679274572A711C14BDDC5C5003009CE38013578FD455D1C4E5DA3B859FBDB9B8C82BD081901528141C307850DD9C919632BC13A19EA2D27474ED23226569EA13F95545E83C11768268C4762E2BF65086DCD0E55EE1810E7B71229B24F1353846FB3E12A4775DA1418DC0514B20A831A00837DECCD92CDD44F88E54C4D026B065B55ABF26857BD24DC664C09D09AD00108B4E214089A4AC8479494FDD35F2B5C9879593D426BB3B3FBA7B750A29E43C1453C93183068974575A9ADD027BBCBB868E4A1F4DA773A21CEBB13237CE08456B26020D024335DAC41BE70E568863DD4D80DCB8976CFE2386D010886EAED14C55FF11C6DBE307A97FE306C631D78B868997438386A9A1E64E0B75C0A3D14B4364329CCF3B19F5CEC8A7574BEDE0BFE3C2C0711526FDEC7A6F3AF70E4072DA633CD01A0B6AA9D020C67122F88486E4BD5B84567C268AEB8398FD1C8B8E02A9D15D8E3E6AFC4E01F9EEA6F200E6BB36026BC4AE979BB8486CD14DC6653DBCAC6F54DE7444E881D013E0C81446145D6D79E69A341DC3BEA96DB5BA4B63B36E2714633F3C1189138148616DD18BD4B060C4A0D60901DCD6AF3805379E8170DD1F32F59109E8BFF00062BD905C12E851609DDC4298179BCAC0E6E28386687D4814F3A8515FE5E119100DE9C95D771045D9E48733DCFF7FF0076DC749DB4378F2579D542720064106B48BA3292DE634A93A6C3CD4C1A2DCF62CA5E418C121DC971C7208C58C4869CF55EADB5D735264330DBF110AB11D3E654D915DF7573D205D7EB6438A32A1409F755D7615253E1CE724E6E8537AABDCE4A0B75134C199A9F08393C21161D269B21804CEA3B96FD5B6F3C949BBCE5BC7CACDC697740A908F9AA9637CD5628FB2A456FD9160338671BA506B049A3BA6BE23A70DA385681450DE16CA4AA9ED6E00DBFF1E29DE1C25446F251827C539D02EA0278E4A1853F9A6980F0B057C2C4E55570625448999699287F50EE59D769FD139ADA5EC6C1784A6AFBE8DC906CBA342F57260E5553ED5DF75BF278521BAFF84F7B74713E8890260E216EC2AF54E88FC4DA1ECE36D426BFE208C218DE926C3192867E55E4A5A05700AC9387CA7C2C507E12AB866881A26F5EE59B526F029302BEFDE72DE34C5C55C6CB7725288D9A7C3D0DB36D1CBB28BED47E7BC0CD06D542890FE12A2463524D395907CD3DDC97D46C3FDBC2B7D1E1F13B152CF3B4770CEBB3D9B7CD3A27BA1389D506B07408F2FC957E29E2C4D9108F8B6044651CD4D8833C7BB758CE636034A88DF96D6B3E1089CDE8C43D059D67FAF0AEED6A5F83FF00CB5E39A61E5DC33AEC127244BB0C4A70182EC9B99FBA9BBDA1C792870FCD73C57677DD2533B312165C43BB7739592CD48D979FF6B23FD36173B0154EF4870DD7394386DC820D180B18798F0B75D8E4745D847E2181B27A852D0F703EBD87CB441D9669C4609D14F10321601A36CBF96C4950850AF7BD31DDB220E88140AA89AA002C24E4A3C5F89D2B2EBB855C63666625241B12575FEF5AC3D3C353DA0C0A30A2D22353354E6EA3B83F5ECD380E09F09DFD5441F3580FCB6069D148DB3389B3D1BCFBB7333C9163A8557856E99D953257199E1CD31998C760B0E39230DFC6CB1879269E5E1BB48548C3F2807893852498EE7B7371904E73703B25AEC14F166AA2309A9C2C6441EEE2BA20AAA8429BAB69D21B7BCEDE10AFBC3FD52762A8B8CFDD6A57FC88DFD46D323B70751CA69879A847E51E18B8E01188EFA938269CF6667059880DFCADD12174261E5B313E945D0B16568AEBE9147E5398EC08458FC90D46C939E4AFBF8E257B9BEE048E4839B81B4BA1FAB7FE16E8BDF4B96FC9A399579FBEFB4361F1BBF084F14F68F76C7315D38B68BA1507E9F0CE64320129D0A20BAE9E29B13C8A2C39D46C8F4787FD8A0C66014376A13365C39270F955F867B38BA8528CD01C331815799ED07E549C30C94DA6DA6F3B92EDFD238321AF745AEA82AE4E606DB61371799795978F08AA2ECF241C7176F14F9700A4F55727BD8A7372727A87E7FBF0F79948A3F28C0F48A653392F99A5070C0DA5DA28919D8932B21BB4325D0ED01D45B371533BAFF8829C2DEE6D2A575FFF00D16F4C0E664A7177DDF8F06E7FBACC15D18B95E38B9086DE1144213313FA40BB21329F1DFC510FE142889FD1799F117E1FB41F95238AECCF95A79A6F5361E4669E2C84353B03EBB2AAF7FD70F058D9429C34A22F760134BF135F026589A055E2352AE8E108CB1C027477A2F770E2990198B935A3001433A15FD13C7CDE24C58237F31AA98A1083B3CEC1F521C8D9147CA88D45903EAD89FCC0D9D9B7138A9BB88A3122713D49BC6EC109E207E536789A94C80381B577826BDC68DC1BCD38E780579DC6E571BC0C4D8308634E815D6F994EF483860DB07D4BC8A8C3A78A2E6D22221DD1C14C609FF75121F9DA068E958C768ED8EA1079C2ECD3A33F8415747B26299A008C5770B704C82385B8A73B45DA3B8DF5F06C9FB36D7A9B24C12B248016346A533A28A3978BBECF683F2AE3F87F4B91427EE9FC298C2C7CB5BCA6BA14C3CAD61502043C48DEE410850B89D40A5EF1C536043E2762A997E4A311FC4F421FFD6CABBC5B2184068A23791F185F0A913F6BB38B3BBFA422B2BAAEC5D88E1B21BF5124CE89E3921C8DAD3CD184F90BDEF23E90FC3DC1C9173B008C789C6EFC201DEC9B5EA548515D678A24E08C4380AD87CFC6CF8626A9D09F51984227A3BB7711C95E18E614FE1334E6E86C88C36B934A10DE77B2E69933BA0CE5AF8EEC9B8BB153189360EBFE78E8AFE6AAAFB13EE6244A5A22DD4587475AF1C90EA9CFD14DC641625DD1110C3A9AF77BD11A3CD7B50A4D8ADEFAF1E2C82744889EDD0D90FA8F1B11DA0D8BD0DC5A535DCEC8710204676B9BA15AC4270552AA9AD9573EE37CEF64D18AF5106E0D5CBD7C7FF56F4472C5FF007547B82F5318387C2E5722B4C389A1C0F4EECB9EA670FD20D6E01446EB3B219E6DF1B2F88CB69AED423CAA872A5B142AD81C706EF1EE4B8345E389DB91131DD4DC7C95F74EEE48066165EF9AC6F978D84CF3DA96851053E19B41D422820D84659D15E6D1D98F11759BD13F4BB48C48627358241B54CFB5918E8E4C77243A78D23E1006D39BA8B0BB9DAC28DB79A64B47E9E16F447482ECFD18100FDCABFE91BCED2C73751251219C8D9E930F567FE939BF094DE898790F1918F3DA63AC9EA137514B3A1530AA2DA1F341B168ED75F0537B80577D1DB33AABFE92E2D0A50DB2E7B0ED1F6751FE27B327286A11F9478C8875368B426B931DE48B3E2B1FD2C90133A2D0AD6CE4807EFB3F215E6198EFB8AF1D1AAEC064BF255EF4875D1F95B8DAEA76A1461EE9920466A1150A30CA8A1B8285D3C679DA2D09D0FCC23CAAA632AA046054AC6446FBA66B7E4EE8D5EADD159E535BD25B8E13E4A6D2A60961FC1528BB8ED7254EE2AB79E17AA6F9941AE898EA6414E2BEF720A50DA1BDC446E729843E5A282EE9FB4F6672A2BA7163943F3F18F6E8E368B7C931E9C0661028B3E1B1E39AA95BA3EEB1FB26ABCC4047635C39ADD9B1C729ADC8A4750BD5C56CB4285F95ECE56EEC95180F9ADC80DF37275F88D6CB1BAB17BBA9590426735BA5498F9723829466DDE614E1B83872EE2242C9D50A19B2201C3144D7F63E33B4C9DB615D38B53DBCD34E581B1DCDAAAA982E4875B2942A87C900F3F7A85BCDF3699AE39750BDA85ED3F0B7439CBD5B00EB55EB631E8153845A64AB82A2AD42BD09E41577D207F60839A660ED438EDC586AA1B826740B778DB508CFE2F1858F142A470C9DB20581DF74D78C1C149C6886A2898EF252FC29BAC601995236D28B70FD8AA9FB85EEFD97BBF658CBC96F3CAAD7631AAE76571530B7FEEB73799A26BDB81D9731D8151213B184EFC2847E5163E58174FC6DD78985385BEDD335294961684279A2D3C4CA8E883909E7428F2AA7F5B5B3C95D78A29B0C952AAA360F5D8A05BF8E8B0AE36C8AE4AB50806A86C09ECF84CF68C5198BAE50A5F08FE05CFBA2F8956D08581A7144055C3345B9CA49D69E882A2AD55564B12B8BF08C9CD92AB82AB957F2A4CA0B06CCC6084F040A2356ED48A0D6D00FE04F508D81047A5975D8A91C32571FC289183AB69E89BB342562B158AC4ECBBAEC3A7A209A9BD0FF0011FD8236042C22C93B11815E6807E230B6F1CF243BE2F151B0504D50FCFF005FC47F608D810EE020877BE561B4A0826F43E13FFFC4002B100001030204050501010101000000000001001121315110416171208191A1B13040C1D1F0E1F15070FFDA0008010100013F21FF00DF77C5051310CCC8607006AFA0A25A31D9D1C5B5D3741836D18BA0321B323A533C513F28973150B61F8A23E5172775B48337EA8878B03A55596C7FEC8570BA993CB14ED09B4C3CDC8201EB99BA2319576BC9006D2401C91280B47BA3AC04E6E14149E6015927992802897F9F5FE2D55B921953368997DB1D5000D489B628E8820F7A8CAABE7CFDA05427EE48F06CA2AEFF00AA26D9B57FD02318A1A12143A1969411C081A4212D7C48224F35AE1449593CD51E28B3AA32EE1CCA06A1A42CC9B89314EF203D2121DD45883F11E880180116299C1C92B282D0991B84062133083304D43A9502495F3EA5FB84B34C24FCB5FF00962DF7D28B0E443ED66412CB00DD0464B27CE0F81D41F608BF7463C9771D3F66D1CC55B3E021C31A29F0D7FA21006D5507872FFC72102042E50B9BCC0A0052426702510A06E251660973C5D531FA209D0CC94D3BA1A943033A9255483CB03AB442606F6FDA0804E6B7F82082D5D8385AF5A07FE211B616CCABE15A5F6A98BA33D90A36274C21F105284CB2A04AE55F0B0464036A55543EE4B28B62AE03213E09677246CB440892008809508FF836A8875243FD020B02E72BE9810024980CD11C66CF7A7E6E9208BACAA50B84DD54CBD81500B34C21DEDC1543D7E496835D8C004293EDC050EE510440E439E883E197649E13A9C0D47BF13CE680A92109F9805F6AADC4E0313375AAEA40CA4BBB17DD11822326646120050724F0260A07719E1C9E06653E0D62316E255A6DCB205183EA06FA0288C03159FA4F100134754E9688E2DAAA11125888C02A807C14EC8F323C87BCAC1CB593035749462385CD155F7259306C11D820A98539A1973231BA3FE0A08BCBC500BD89F4784132656DD3AF2419059A388634A1C6D5444974F2273E86A41460A22033838E0CACCEBA91A020BACC05AC1F40566886034591BC82213F30550CD91A4A78835758D1523D60F7544D761AA325E0BB1244C152ADF14189722FF740926F5707822492E64E01665405B544AD8C81CF54E7FD69CB0190442D67A4F9585511DB593B81FAE030EA043153542731DA3A5D00047068785AD02507354185F2764C0018A424002336C091C36403D4F29853988947DDC6E0FB96BA87594D320CC4042301528D45A1AEABF22AEA6AAF64D39A7338D28C65753F405CEBA26AC8AA75E4283D4983ABCA11A800E51096A74E00861AC0ECA24A0658D3462A949BC60579C08D11937906200FDC510C58E13257701C0192B8122A65F31B5BDCB801A1E9A86B273C06B883529D532A19A8C23417268006C132E49CCF04A9119A9590BF7285963528CE6590F4C072CA18ECA0F51B9217C7379033EF8023E49D818F841A4DC59176EBDE9792E46F56A80010641453CAB10C20E68240A26BC6290B80808E2B0E8B31AA2C7DB99B6039286777086051213D202A268148CE11399456695082580665A61FE6E06CEBEA2B67434BD04AF90F519ED25A211C03EC66B2B09C7732C6F4330DD0D86A04F394C449CBF847006B160E8EBF240B87144508E69287430623FDA09F0CB88C0D205AC84020320A39A4BD597B62900199478406CD900498093A2921EF3A2218B54B8EC81B892F4417E73372861625CB9AF01E7223CCA005C8987D1121353C464982A53D93F793C0F420BE9665007E6893A0790AAD78FCD89EFA0FB94019406544FA0D8DD467B9B63F58300FF052A64F25B7C27DA72DD8BEB2A152F2788040383042294B40E6CEC4602B263F0842724EF9FB40A5DA3CB74F3232210081579201B50CF093F2B729C476764C2ECA14B50F00A840744ABD5DF02647202FC752A9F6B6E1708B6361087902AA7328864557FB2CE71E0C07410E5648A49FEE98C6B0CA26CB7A841A0818A39B31FD909A22D08863CA08AAD035C47AA719A81269CD6A740A2E664DF9F66621626E51FD21E82000C000D317F0590136151280000006010C03480E16B0A9764E657B03D0324C648021B0180E03D49EA1432490241024A7833C209ACA82754F6E44707A1356C98549F20704241F60E61660751629A8281DC2933CE099D19D17E663963D26334600C55C4338A71039059C86342B244DF9D7D9B0967C93F152EC781A0A7A09F446738D9028D735CDA38F28EA0B946137F99C25577D116402ADD445A58DE523593456F22301999B9650AD2B9F06747558A87712E162B56B8AB0E4B2121933CFF3A0FEB21E9A4855D17877054ABD9A6253CCE4C55DC32DF8817990CD27E134306DA29A096CFB31FC016394836B05A907D9E845350E72F4235736A3C392F08D4AA9630B9549F075944D43309372A17A9FC7CAD60E47826536CD47D9DF0E2A0BF1053C083BF055A231CBF8E837DC104A94CE1D8E61660C386280001840C35CC09F5ABDD703BA1A5E40E4781C9480EABF3F1F8F44DD39CFB3E5CFB89BEE4430AC4864524AA4A79C4C1B71E849278E35CA46E4C37B709A89067743A6860A49F38A7C1C98FB60590403F6E863E80C9F4C812FCD5D5E205CE3628B3E5CAC8A841B800FFA84101B864A0020BB2ED03FA8F0F13D81082E4C6D69606A308DD6DB076CB13D817C2792303C8FCEB6E27F74F679B5DC8FF13628207229D9164DD2C802D8124A089C8DC6EE2D05BF881C6277B567FB244383FF00A145D0A9311ED40D51240D00EB9A7BD17D9041BB390432D80C0042AA91220659289632360A28F9B8C68306A4AA0095D5993E65D0049853CE9F48C3691EA0A0B4B906EA8B21FD31D25316533C6C71FD2D102E63E4A06E4F64ED50892887902E88ECEEA6DAC0994869C366D8EFF24A745C4F112C093409FB7860C520A65F3008BAE0D29233528488B064A974492404494DE383A8997A334285030FA051EB959B05BF18DCF106695A829A8DDF08858CEFEA8D129042B881D042C97E2A6850C8337757116D603C2D69960DB60568B18EF8505C47759D4E8ECB6903CFB2306AC7AC2C9002C08603199BA7350755BF4B3D07AC1589A4F13EF306734EBCCF80120BD208664CCE42216AB05CAC8830393124D5ACDA9FC10CEE896AA14863617E27C3F5A4EC08E11135672C5B0513F35AC074001C0713C3B3547239E412145B869084BED257684F186EE01406D9805C3F99F06A635C1AC47D9671E7CA5D515D86CE8ECB58FA06C261D968500E28059946EF2062408498040E2927602AD7830D3547393CB526E83307EAB915A10A99F639AA42A491654F2010E9E2672F9EDE9140AEA49469AE0501080411920DC245C883709FAA8394D5C3BF75C025FD85A3E44F764750938F88F9F66620710CF642708064F7BE3AC47E569983D08CBF19A6883E7824ECCDAAA4E0C29E8DA675D0210800040030201A8752148DCB34000FC869818980F4760229FC0D9A04D477F0EC85E9C2C98731CC64E8A0FBD0983D6542A34043641AF00EF3C0F841535D3B5782882F22E99CB039AECA3E7EBDA6880F985217CE11893405CA0607D1075F8EDE62F8C0900392C106234142B984B95A7A54020C2C0194218AD1C2323B29D500004B30A526E65764DF27BFA32D745E28F15B76C51E45D9428A695C76C919E97151070D243A1434252194FD60E00FC9BE53E0CC0F240997867FAE820080E09D939AA3AFF88A2FD8461D5EC4EE7805D13921BBD7B4A9B9443A496C8A0B681DC953FCD3E8F71711386C85CFF1D3B7C6045A76B2981762DB886381B80F2BB9C39649ECA2566E4164A5FC8D1D303040F48540835A00341803A2CA3715EA80040382AD3645B3C1A46B9147255533164025AC6E257299B9C260655F727F37DF1F099B972EE057EB6CB27DF907F7DAF263A08430B4653A0444C04D8CBF62FE8CB8839F5A3A0C63B3C261103806AC8C73BB171BB21658C20A630E80EEA8395087E3AB1F214ABF82107A75290DBB2CD3557B50752FAAFE549D19F17E7315C427D1D6504B9C1AACA735B9CD3772CEFF00D55F7AD8D04E0B8312DAD538AD83D47B5A4C1F02E648B4436E60E00237760F40D17707C709002496011DF983BA9A4B9C822689A3DF44764C5DB1B2397063332098383239840C99830C677DA9042303AD44DBF6AAF4822E4831D50B008A200399DD00C2318D30719A94DF1B14D36588EAC064FF0068A4140C4074BB3FE6113AFB5568CADB200224E4AF80BC33051BA198F56201AB3F54D11B36E88B0001B9E4115710EDF32338920E4A9809AC3999C073904F80492E9C1502842163E9BDCE4478C35349BE203960AAB2041B2712A917E47166B5773F82B93B054660525DED464BC937E363CF22DB60F43B478014C0394562A75084581801CD020490EB0A920C791CBC11C039CD30219213599A7AA3167E5C242E7D30F2373B321242D009098090500E5822004CD4C02E6B079C08230DC84CD4C03E7B2029774AE50C9603612887EF06F6A4DACBC4731404CF0DA515BCA1E872EF9701119A4300D017088E390041E61026799651810850010808B0CE2DC046E5A1DD075298033203E994518879D6A30A2F9B4A1AC2DC176DC180A9207424C8C872FF00709CE5CE45D151700C929FC4180BDB18E558BBFB676C3FC6596829CD0B97ACF45BA674F424ECEEFC040208320A3B81716D156D621F738847B0776C0991916E44A3702A884508FF00DF860642B3FB7A60CFD256288332336AA1AA553B801A60F8106A88C74B982E566496B9A3663AC20EC5405C470DE4416B401F6D02C52844213F52B5825B7191880A929F69C7089C0DF803439230D9A966853299B217BE0D62A6D85340D88DCC28C9A03B1B218CE1AA002B865962D384B07D4FA8773ACBE6810046BAE8893910744C849ACF9C9942C737CA273C26129B988000A15B448260287C5ED874E0E53A4924BE1597771B2D1331DF8446230492A76E728C3011803A7C2D621F1C34F1249A712D5C1AA885503C9648C94461263F682068F09DBA42E515541FB7A2602021D093B8DC1C4E0395897245D8217FB131FE0EC8A023542440D8282C1400BA39DEB58852E8952821A09D4E022D5223745257D246C94F2D03DB5F1859E89E2454F09E13243CE8EA384CDCC2A8108CA6740F43FD5CA6DC3A884131787E420D3005C28E2113BCC408B6E34593880A09648406231004169200D17EDA7A41A193109945C0B1367E2288F0C3C72CC890426004FCF8E81442DA21AA120CE49BAA12EB2E668B7A810D1065CB17E4795B4D9DDEDD850020F81453063FDCC12A6A8F8889501D18664E7738397C757F89F05D1C47AB78318EC0EC353640BF299AA087E4C9F39DD7F842272C88D036964F646C116AA36FCEAA48CBE59A8BB3F964887D27F450624162D92008E22D3E1D0289A4B782A72EE4E00B0BDC00E26A88C49644A6C93D671C7730085B57C9839ED7C3E543B670030B06CF4E03E6E3AE0644A02C9B9875BA2F61927532762C87547B8EA8CF46E809309C2DA7B17FFCB9300048ED03E42A824468D0A1A1A09B6650988176D9059A4E76592BA4EDCA13CA73F8A72D3E23DCB7D02FECA1270AE880CD01638760F94100660F9C3594B141277C13DAF83801406CDD8A3BCE6B9B294A9F61904CB6ED1AA6EDB2E48D579EB932884136FE9EC86F40E875263FEE280330E82C806B513E536E01B8E40403B970A2D4A3C9BE1D91421A4B6892F3EE838470450EE84416050093B94829802A076264835007021C1073525CCF8E1024090F8B49B29D7B307D1043A81BE4888B50FDAA3381740803CD0F0116B8FE68CDC90354715576DC4C993264D83264C9B80CA10FC441542356625CEB838C542190A360030C1AFDD0991777546DA71EFEEC6CF04E846B8FA91D48118EA183AA00047290707E41C011B01421D3E9B056BB0E3C86422999F582C8219910AEA5082570D18948105660416EAA6C984BA5CD9481A988F58F030B2616C4AB301DCA64F2323B01077F7830215084640C169AA8D84C14662E9E0F99A85B062F0E8FF538F6745CD22635E18BD60A284051AAC50082E82657735476132DCF02C43B9A53A9C3250CE3240C0D493526E532C453D635F40270C01CA7D787F1840DCFBD9003645FBA0200705A27CC9CB53B140518C5A2B588FE0B780EA81C06861677817C767B1EE89961829DC030762822746F222796017328147B235F426AF142CCB07C398F97BE32399B20988143E59CC64420914923A9270BFCB08EA7C9FDC7554D3C4B2048E241B9946E30B325142032CC23BA809CE4806F3E912D544D8F59088FC053A009C9DBD63294A2F1473C917B9539AB9FBA61257F7BDC72B6E8A22F813A6C16D104A31FCE7CF0256823A4A15300F8B2358EE8A841323A1380FA0C8724DD224668210061F7FA0D01D2B82E48F37533BAB2B5673D881120E80041BFC3B235F9F3146E2B7004C65AFE833E03C65CA941744931F60A0D0C8B1041DF0D28377F7AF4351FCBE11C0615B64427098EA16910545EAA6BE78CD5E4F50A762611AC55365F219718C012857CC3C6D8560A0630A62788AA76598A698025AC0B2683BDF07AC8278409EF52EF12273C0E02665D6BE30F942A608628FF00AC462CA0836B14DECC945ED4EECC4FD21880E5F10F50F10C2C5AC905CD399A9D9419A8809DD981D983B98174FCCAF8196EA2416F9289C0DFDE7EC127E51B99E013056FA5D306128049E92848C3AEC26828AE8A844925CC94385104232199BF51C40FA44F09185ACB467041D0C541946F74030610108C50C84CE3F5E3019A79886BB904E9B5F2209FF6516A46EDEF344CC748F8C68ED8E9110FB60DB6254B2EF095B0538B1B28020C0412E840903180C90C2C64E5E23A7E274FC0DE0EA82275193FE1BD790C936B5D98F034325FAFF7027C6825B138E72824DFE16B778BDE1CED4A7BE3DA63DA2B8444EEA3DE4732811B8C193B94484D2E5A23CC3A84404744864C0336A3066EA05433E63D5A073013C0EACEEAA91A32048BB04BF42070F3C788C752E3C840A481C2266CC8FA463AB377908852C4C7309E3B7DD9A27839A9C5DB235C75610E6BC2143508021D34384F259864C1035050872481833198428813EA7953852C58455803540DB45255E4AFF0500031D43E910004810731E81202406EB33561281216B7A81A0106051EC84CD3683D08B3C804C435242D089744BDCEA23593F253AC99DCFBC398FF00471082096CAA148046B60414F219A36C1EE17AA5E0D90EFEA84B1C7480413A99C1A632540B6718FE2041BB37D9EA884459D467AD84154A8F2B8CB93AAEC4A8F583D407E50C075A30E68880E480A99D0403F20118782D926120F789150EDBC16B880BD0FC36CA8BD67E113806E99A3346EEFF001DD138E9EF0848BFA14460E06DC871EC5947694D5F52192A27F904C1A6AF7C2003930478C50C0263150A6A320C05D20A14540B7FB020930A00F25BC40BFD5649E44BB3906515AB92333CE4DD8262891487DA0B639954130172082A224835C943FCF5B4322CA51F899841A53811C4106936265344C73089CDCDD9159FC084001BBE07BC73B76955F97391098A05B08AA284648991503442DE0206EBACA7473CBB9122F2142C8C5CB61280713222E41BE040218871830E02037615542062761A5E8020D086FF004872E649000061031BB90CCA66972D99F2A3608F2083A2C81E453A60A64FE152AD7E1A082C86C169F9D53DD9F8B0130C75D7EF4DC33E451223EC8830D82A2888F3282F94A60B3A258EA549633219E4EE2301670A778FE329CD78468849238B409C096419201BD0242A480E88ECC37E0EE5C0498C4E8B337B7F2A820631870203B7B946A02E0774E29B00A73EC39F109A80BB66879164DB6F8BFE0947D00D9A844041823B0CCBB846E50713628C28281A8B2AF422423E48A10060BCCF829A47833AC08E5220AC9080D848DE564872C2268146C5106782F2E981A1D16723B064C5C0772858D4C3B040C42D890E18A6E7964E926617E88E47328B969B880403830420D34407FC237798770AB4616E54A28456CA6E9F24A8884166722C3E90E7710F7F9E08072949212C01743500D0A005FD42FD42AD283AB54EF4C050206DF70093BA405CE07BC5F896FF0091551DE61DF2AD261D16999C0E299064526467B1208AC4213BF54AA21146E3109CE21C9403041C513814696E173A70DEEF09F8B57FCCC1BE555F742DCA31F38C65BC88D6402EF7005300942A153856A9541C065873499834742011404F0DBE6F85FB16F69FFFDA000C03010002000300000010F3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF79D73F39C36D3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3ADE4C727D0CD3CE0995413F7CF3CF3CF3CF3CF3CF3CF3CF3CF3CF3DFDF78AF020828820820920920BFF003CF3CF3CF3CF3CF3CF3CF3CF3CD710A1FA1AC7282082082082082091771F3CF3CF3CF3CF3CF3CF3CF6E32F69613EA1908208E087C4208209F63CF3CF3CF3CF3CF3CF3CF3C92215BA626EF8C20820AE8429CC08A9C9C020DEF3CF3CF3CF3CF3CF3848E87B085EA30820824F2A82E0EB450A80820E1F3CF3CF3CF3CF3CE78288C221ABA4209708217529AF4A1FF094082080FF00CF3CF3CF3CF3CA8242088240A0821820930DA834F78BBC810982097C7CF3CF3CF3CF3CE6A7420821C20825420BDC5A1D4F7DF4C0A2C170D61FCF3CF3CF3CF3CE2AA82182CC2086C2270A5F9A3DF7D886E020CA1C3B7CF3CF3CF3CF3C6B3202082A820802C212BC4AD3DF5CE6FCB1729E09B3CF3CF3CF3CF3C81F882082A82090192196AA6F7DF7D8FB46C88CD61F3CF3CF3CF3CF3C5FB082082282092CC909C93DF7DF6FF7EB8C410715F3CF3CF3CF3CF3C0FF00282096AC218E7B77AF6FDF7DF6CBC5E8D761A7EF3CF3CF3CF3CF3CAD7A8208228228E64677E2BDF7DF7DB0B16EED28BFF3CF3CF3CF3CF3CB7A8C2086A82D73E06CFF00B7DF7DF7DBF88B1FBDA5BF3CF3CF3CF3CF3CF14DC20A7E02094DC9D3B7FDF7DF40F5EE27FD1769F3CF3CF3CF3CF3CF2C1C25DFE460B7E1D00477DF7DF7DF7DFC37CAAFCF3CF3CF3CF3CF3CF3CBAD5BE7402937636D757DC36DB4CBEB0E7507B0F3CF3CF3CF3CF3CF3CF3E3CBAB8AD1655D74F6B082082082D3DF7D595F3CF3CF3CF3CF3CF3CF3CB7BB00853F5CDFDF6208F08208273DF6DD03F3CF3CF3CF3CF3CF3CF3CEA5064002CD177DF63EE34A3097F7DEE2C56F3CF3CF3CF3CF3CF3CF3CE155F6C0A93FE7DF480820820FEF78C935AEF3CF3CF3CF3CF3CF3CF3CB3DCFA569DBB491D7D78D34E638BDEF294CAF3CF3CF3CF3CF3CF3CF3C2FD03999F869E1BA7DF7DE8F6DED3CF3DB36DFCF3CF3CF3CF3CF3CF3CFD37705C16E8981863A8A362F92BFEF3C4EE5BCF3CF3CF3CF3CF3CF3CF2F202FE94C203E80F44B5E5024B0DF3CF3DF3CF3CF3CF3CF3CF3CF3CF3CBACFA81215C562C66CAEB080796F3CF3CF3CF3CF3CF3CF3CF3CF3CF3C8FF008830000FF76283DFA078001CF3CF3CF3CF3CF3CFFFC400281101000202020202020202030100000000010011213110413051206171B1408191F050A1C1F1FFDA0008010301013F10FF0094125840551C22750F5F0B34B67F3115106F64032E623DE094ED94216EE5BDCB608EE0533DC5F60CA5B2A36DA22A7F8B6973D88B2900332930236DBE42D8D227DBF87663168D1156221A37154FB41CA3DF96AE269C993CE0AD11371895734504C29C996608BF962D43E637F1667504A027981645DCBD08402F2C0B8AB46FE6370D51C086102F8D44B870C92E579540105DB085205E5E0D2F15B5F2658CCA981789DCEE64953669991C0F5C85C4FC878D151322B313A96D8DC72CF38040721716F81D4CB661441BF497599829323D20A309588EFE034916078BBCE2C4B1C9B856AF21789E87033C42B023B8C7F6E2E409A52FB9636469B89B7204460C0F8BFCC97857C0C13F0C0E49FD93610DD98737C0160EC8948E5F68E26488B39894D4CEC9B3E2BE522A68DB166BE1AF81D5450EA2B46066752D4CD66876F20B8221FDC550C42753269DCDAA25620B08D98F1789FE499D98ED7C312726C456DF0583DA302C94CA017D4456F36D57153E90CD32B5172E0A502E3148204F13AB06DF8F539C2DE1EED9B137128336F52DFC02F04FC9660BBA21658DC4C162E7D2128716A7BF1A71504C875F1D8E6C5062968B62F64264AEC8ADFE36E4474600B0299262863051DC332302D3C6B3FB9D8F8EDC58A8A4887ED15419182C881A7C950114EF84C88ADA0C0F71E68EA6E7E3C66366E2D21A47C36382D9258AC6DCC3D8B88ADE344F9661952A3B40B65B86F8D178D15928A9055BE1A9C5E845B0E8C4A52540877F20DBB88AA6038111A40A834D90F4EE65E4B626E6DF3ADF7332F2A93090D29BE01751814F8E2BEF800A8E04B8CCB889913244FDDE445640164B9505B515A86602F8D1202B44DABA97EE98CE3C26C5CEA7D4DC70333EFCA8EC961C6E6220A532473744A20E059F0B972E5CB88ACE60451344CBCC22B2343B208169080A522A11D47D7062BBE1F0DBC62BE932F388AC9420ED994EA1A8DAFDC548CC546F7FAAFF00D85D4D18B7BF802EA7D1F30BC100553B9F5E73608EDCA2BD46004725F5C5165F57FE3FFB09295B5CEF3EBA22DE7E003A9EA9F7C7BB839338954BEE6564DFCE6E5DA6759907A82C7827D80B3D918769AFC39FCFF4EA29433FEFFD72FC8E13488C77F71DB8AAD86A91F3636F1A466A4C2B0547F4F154DAE30596C57580CFE1EA54D77435F92F9A952A5702751EECB1B0EB85A7B8367D476C305F33AE6982B31020BFEA0A31DB80D9335EE347B9A8D6A0069E2A0998ED940A85D8D935C8D373D3DC71B3CD733A9B06A2C0FA8E925D488A2F7886AAF2911A629883ECA97F695751C51838621222B21853B3D73657D4B6C23B1F3B6B29DB114292538751A5A9607A4C54D736AC0FD40D4D4F53711EA0BD41DF28D2B9028316F7362E397F82E9F99B132F623A8D6C462D9029885FA7ECBF5FE35DC6D10C038AEAFF00F58A7B10AF6AB6FDFD7D666071B658C02DC5F9347A7FB8A8ECA9A1851CFF00233A7E66A9B26DE753F24226FF00A244AD7DCCCBD1FDCC50EC7E884AB3B7EC8ADBF4FD913FE3FD1F09B7C7FFC400241101000202020300030003010000000000010011213110412030514061715081A1B1FFDA0008010201013F10FF00297C52592929292CFCC5A958FCC6D984A752D97C5B2DC2E4202CBBFC50DA37D46D986E5FC94FB0440BF86D22B605C318254CC20C42AEFDA30BD90B7E02259F600C0BC1118915503A254CA8D75E4312B3E21D92CD910CA743EE58E02E05E094E387E88A1A3716F7E22820AE174C4EB90D20D372DC12E645F641B2FDB9B8E1FA250A70633312D16FC42DA8E7952E2E9891FB06A1BC3C3A3DABF1345C1A5F6F3F116C0F2C2D9817C077C0EE192A658E0723C0FB06CF55B816C56F3B472F83C11E1B4D1CE9954C12AA75C8BC458F51B2566A69E1A5F81F79D1051708658F2E48E4956706A11C4DE057A8B12E98BD07E4DC0CC32C6750C1E1A86A7C434CDB8757378EFD76D1DF83A39371E3589AC7A1541A996E1466D0CC6FEBA9F5812A5423E2420B66D106216B504D20F5EE7A42C8150260540ED415E26E34632588EF6997EE0CCEF34135F5AF26DC05C706276306E1DA7710B20FD9E44B95322AF8B4F05AFAFB26D1DF93486E60471BCDF1A140B606077E78D831C511D5D022D45E34F5EE3566DE41A9B4D227E8309330F02221F9E40EE251831AA215445BE04D3D96A8E4E42B334E5403B8A7BE2234CAF36CD96DF369D90430132DCA4691D7B6971A44A8463AF10C4C803FD204D0AF4ED3A9FA9FB9DCDBDA97C46E33A86F8DA06212FB8FCE6A54AE152B8119515426FEE4BE332421863B9B419FAE16B83CDF0FDCDBDFB95D92AF536E044BBB058AF685CD26FEF75348170CEB8AA0FDFF00D88C5EA790B8B443337F7E90E02658E33BADD4A5EB2BC9AE47C96F83EA1066F0C3F86768299AD420A4A86D486326B9BE4B9B950F8815C1B26F0541EE7671DB860C38B8E986810C05CBC512FD78544C895EC655A9F1AA83DC35EE4B8370EE3B20B231C4C18A2B48991033E31675C06EB8C14510859B84A64207939B9B21EF4B99313F7094181CF33C6A6A9B21516A65EC2E7DB1082994F71354B91BE0A7752E07297F85DC65D530C4C4181A18C14A03D89986565E3FDFEC6046589182034E03BFB081A331898E35CD7F8BDC7518D13438DFFD336FF19804FF009A65FC23A1FD9861F21E69A66BF5FF00FFC4002B1001000102040504030101010100000000011100213141516110718191A120B1C1D13040F0E1F15070FFDA0008010100013F10FF00EFAFB5D229E462F4A5EC05B2868B8D63851506FD70C6AB9140F02909F38998DE28FEB88B3A214B61126703688A717C41043D57E2B0826F3780F9A8EDCA7E1298B725F66878A731F74BD9E35940D99C8784F9A553A5EE0759560124B0F699AF17EBFF00B2417304479A47185627C2DABE2D9D3E68CCB58699052D81575F7A75A48B9313F707B5434D19A9D605F94855D6AB001EEBF9ACD3A24DDA6AC977520F2BF14D4AE4A7B05614BCC7BB5EF6035FD67C52B8FF0026D5859FE1851B71D5BE66952EC23E4454D3CA83D98A088D95DF4512A28412B83D92DCA96A98E04CBD02548731C4BCBA7168B762F09F34A0383058EF2A1CC3790639997FE822050F34606EEDCA94A2928E6AB816963AF52FE6888ECB2C3C652BD30A83A05DFDF08E9497E45BE0FBA4D1C8E81FCDEA5D3B9BBF579A14E880F6688BB35F80D0CBA723F9A7663B0F67957224B4EEBE168441191FC0DDEF1091A106ACD88F2C3B545206D82BCBCCAC2800935B5962F7527CDFD9E8CF8A8578E0ABDC28ACA174CBD0FCD28AB6610E3860CB6FFCB80EF22E3C8C5A7DC4A0D7F26311D2882182B9C857674B7D8914C9B94DDF1C2718D9D30EEE0530726090BCDC5A82BEDE44F2BED142884FFA1878A000000323D60187E30239860E633E78FA0100559131A11966C9D70768A5C85659A5A999CAE559B492371CC747FF001CDA96934EC14686E07A2CF48A7497CB2F756F34EA61662771A3A4972F1DE71A50066302BEBC53E99C849B98D5CD3DE3B1B1F352121BE3ACE5D2AFE36A5956267DCA4EB9205A27EBB0A9C403C9D5927CD3E52860F21B0BBE3455F98B860C64FF0068A306493FF101598C0BA68151054C0361F75AD0000202C1C4236159BF37576A4A39CB0007C05306641129B19BBD436C05DA8A8DE61A91021B8D02C3F31A6259DDFD90CEC91114D228B2023D69E4AB29E46ED6CE980A5C8AFC7FB450D251226CFF00E09F15DD8D1B6AE54091D132BB80DBCB42202CAE9A747DF0128295300534D61059E4D0DEB11C9B2C763568B9E4895D77A896F962D4F9DC2EBA54A1B1FDB830887F832EB5797582449AC7FDA0E65B8881D5BD2F3CEB8F81F35285939C7EBBF41488511518835A4E9FDD28E85C424AA76D729A137EB876A9BFA0C6CC4F9FDF914F0100FBA88D546038134315CEA56924B92C541DA92C1FFAD29284B7553285B6CDBFE94F306F85F41EF48C0104806FF54A4875213F70FAA6ECB56685C1BF20A074CD12449CF37629D4BA4CB3B1951920375E980CE60337F1424246333F20DB396167E969B30311A92CCF1FC45EC44654D5F0B94AF8AC49C8F206751E0055C0E38F3DD2A2D45B23F8F7D43F6D16173097D32C4C69B645A27EF6F1445E10051CB231A8A8CD47E26940ECCEFBC509A19087408C692BA0B50C378A63EAE631DFE9478883A725411BB81F9ABD268647071035B2EFFA569F5208DF436A020B22082340A8B159758BCDA9C335581F74A9C99BF81C9B404D090D18A4930A0D4227DCE22888C26094A500ADA143019129C9DF6694DEA6372C4FECBF046175D78D2A4E089938F26A441858CCECEF44D9BB02F626B05457559A0288238CD5D63C3B4B196DED4084E24E20CCD9FECBF6940AB0175A04C810445F079287050B4827BE3C44B9E52B3037FD1DE98DC254C377D5482085F46C51C98CD72FF54C954BAB9F09FE0794D551514E372D5F156490386AA98805833D8A582E99F9FC52416F23FCD4587096A745863D80F07D0E0424D0576B99A9400A501F3C9CE7B5160108609E90E3113A0E8ED45CC702FADFC7550231DC291D8B843CA8B36A968E95ABEE1219C9AD037E4E37799FD851B130D98FECC834C3537B3DA6A402C0DBB77D8EFC4B00A51802A492AB75EAA9C9228B98E88F6A28A10BECD2B9560E5B1C585B36CCB20AE99C4AC8EDFD9D31045C46454F0004067B5385E4641F8E69C65D98521D0E4720A201906C303A09E81A0AA9A487E6A09F29D9C9A24424DC5B729024FA00E1F0E7CF846E0CCD32BC722FD28BB9A438C4180E274522022308F08B00AD9B97A31D7586A6952CC211131D469559152777877FD98E64411BCB624E43DEA1241F5B0788E1B90400A2522D7567A1B15037BDCFE20A0BC49CA35AE5C0596C7A1E0B1860B8BD30EF41858DDEE35308213B9520521B681F8D0012AC148C4CC76E3526F1F2A7E0EB4A3222F780F3E86D6466A83D25EF9558DCD9315A3418F5D7A67DA9E0B10C62E63E7A5470F03D87550960911CCA531711CCC63A97E8F1C138B0D4ABCC816787D7044A9227073F6A5AEC631D5F0F7A8E913019389FAE6C1846418B46846BC77679142A336303D7FCA9E0DB221EF8D0410C8AAA6B7A3EA613B7A1BB4B9040016D8A9C7BCBA64FBF44F98EEACFA12D46A9BA5D737E3AB56026FBE2AF0DBFC4FC92B4CCFC79AB31B11D73A9BF230FE35B74A990867A4AF23884941E6558A428400E7097BD0A61E1C0D798C4DBAD4FDD09CC252088923496C8798D7E87DA8890512266559E1C0D26CF47DEB33F09A399D1E371102C6AA9F3D2CEA65EA004AA6BB87C0ED1A51740E13246B05844EC95D463F5AEC4E5E03AD2CA2B042C504E3FE51940B0095A870AE7FF006778A873BD9C80C1EF59F4A741F0054A893817CC5A8DC596F95A46454CAB9FA262A090CF1BE0A859B22EAE6F79A79AADB78C3CD387292BEA08A794CA90C53B6C7BAE465CFD0151C405EBFF00280E5EEE861E68910A04E6B03BD4834DEDE45D3CE23AD40373DB3E5C504948066D01DBDE85B8203608A312C605F2872A7030A5C329377F67C21DCACBBBC7CC3DEB178DD4B0F93A512A0C82758B798A67B0F732CE75F8E37CE25D06A231892F8F9F517A1A8C11A7A89267FD87B144F4050D265747DE9EB26DF4161DC7F520AA0B2F768E550601752FB4F9B5021CB90755ADCE505DCDC784A4C4446198FC7FDAB265B9E473EAFB1449AED8D69209F07A31EE6F782965925DCE56F2CF4E11CC112CDFE9F52C12D8AC2D36E702CDB32F4E24445EE39597AD5A3403C991525B982D723DDED58815FBA175DE0E8D5F2B98EC10F6382FF086D8A06A4DB31879871C6BDA02F9873313AD63DC2E7FB928219606C94A6215C99B7B1A401423712871B339689B23BD4650C8190C7EFAF1609BAE3910FAE5348E92E9D43DA869196463FF00268B2442530C8778FD3DC0876D9B1AB7BE5414F53B049387DD0920B0080E36269A3C4337FB5A51CE2FB69D68CB0A00200A566C4065E9929011365DF31503B20F43DE7F02831C2EC7368D1180C8F4619A4262DA3DE7A561B243AB17FEDEA24C0FD54C82240D5603D8A351CA1A8157AB2D25D8CE6EA1F7C31F4A791F6C766B0B40C9B8BD57C7A0BFC242DED3F0ED58121F702A1F4497B0F88A9C90129ECF4F6A820B33E6BE9F14F391084E599D70EDC44BEE49BB918B488AB6CADD66F98E197A818C112919444964FDFD50580715C22C5FD321F528C625B9F1346E318773DE7C716C4B4CDA7B6B3EB8D1C4D16A86476F77D6E82450DD77C455A7840E6CFCCFAE341446B181522C99DC49C3A3D38003119AB1E64CD13A1B8CCE91DE8C41A647CF6ADE29F345DE87B9564B1CF12DFC0D4483007912FB94A02B60A275264CC983BB7EB51F100933CCF567D10322661C3C1FECA8C965D65D87E3B54392C25B367DCED494C4CE7A9D4A2972A3C9B279F14F2F14C623F094E8A975380E50B2C6438D6DA07186CFD56312D52CEF4CC12F6920F86A706402D967C9C044919F429A01E6B32B6338475A60B2966E37F71EF46D094A6A97F3FA4822208E234CBC8D1767347A5BB50882323C0D5C510DD315D2D48B12BA05DFAEB4104187AEF0B9DFA19F63F038AEC2D1F8E8FA7057B4EC1DE89F90098180F79EF4EBE31AAE4756A021604377E0F62BFDC740F56A24B147CADEEA4B12153AB6F0156149F6333B5BAD4DCA384E0AF85DEDEA8B6783F8DBB542B2C97363F8DC6900C5145DCDE4BA514408B80D93BC3D6A0018A4C5291A73DA8A1524B58193AE094084020020387FDF50A9C98072FF0043DF82C66A53B274D1F41CEC191D07CD11600857822E874A14403CFA193DFF004FB00227144D23095E6193F1D298A02BB883577DA948A4A255AC47997663E7DBD705B0B8778B79A9BCB2A3BB07B4FAC6548106AB0FBE949219A771870F17EBE94D6464305FD1F3473C0F94151929651D9E9EF586BE9A6067D581D75E0E5C1C3D4C4EE6AD1473C8229E4AB88CCD7AB4620824D5E274B1D3D520E12D9A63604CC95FE0F268C5292980491DA8B10020981CE9870856703F9B518CC649A2F721EF58788A9A399DE78FDF71193DBCF035495FA173C85212CC3362E67C74E31E3E92843130A612BD125A603A489FA604D019322C1E7CEA31A4E80714DAF492F72620485D5609CA6804A8C019B9546CC1A75737BFAF5DFE47E2A3464BD09F9F5BFA12449C6F836903DEA79949846402EEA150FF00455DC9C1A2F87052C59233587DF4A90849566F176F7A1722E9E9AF47D55D90EC344EAE14404C02003029F18E4004D5FF00035BCCFBA54B461446398FC563250492D9074C7B7ACC6ECAE02B1452A4066CC645E25C6684B8AB00CC7075CBBD01E0582D0B8EC77528D126E7289F0576B856243A8A75A99CBD93D87B79E317584634617DE864938491750C8493B49C5CC1A5E29218A041AAFA5A4BB990E8BF7FA4612547426A03C1FC5E11CA4687A514AE52FBB51446C3342EBDE3BD4CC492FA61E53D2B6EA178B07C11E807CB5A94FF0078F8F51388095D0A030C4DDCA5F800EBC10653C973939520895DBE1B7F942959E1B24ECFDC560F7D99AC2FC74A2712EF9B8AF7A1503879191F2D455D86FE20C0E16AC19BDF37B23AD3503A0B2B8BDFDA808E1F627DBD6A30504C78D8BEA36EEBDB65C8A0BA2CE41B993BB7D8A7104484B3927151868EFD851187DAA3324C5D9CF90A59069530620EE3F0A9A0E56608E8CF638CA353E07C54B4CA22DCB3E4E10E1138EE49F05490CAE8567EF8063DDF062AC0167B9CA2A4FF00503F4FD24452509FC6756BB36E09577556A2782E98AD5A869B77CBFC2A06980DCAEFB9F82F8DA6EAAFD150AFFA2FF3EA8498F691F1352410A7EC780F45808960A18AEA7DD35281700B5F0B98E358A0926740E551312D35DF3E6FB75E3330060CE25F14255068678A3BDFB560CE13177F73EDCFD41BE6C1459652BBE157007B6673CBA71B384A2611B3E21EAD45C6CBFE8CA82532AB6DD61825A5D4D690BE8580BB8E321DDA9BF98A88C58679454585B4D7F074A9E9BA81B37F79E1744D67B3F7532D821F87E3803A21E12F87073A52020003DDFD22170591264F2F7A0072B76C5EAF0988C883D01EF350148056F2DBC47E041E92EC7E6883C3B41EA46F2B23C1EED0E0E27A11C4420955C028716C972337CAD3941B9C66F7F9A01988A3D532F7A19844544D1243DA80EFCF431708726946868D82688F1DB60A6DD0C7A0518523799E8D7FDA0000002C07E1C958281532015A04D0C5914BC50FF185B62210C7AFA4C9DE090956A406610A91B28F463827D2C3BAFAA992C2BD6C3CC51E1255D09A675A43A290FD32395C1C526350EE523732CB31E3165C59DD5FF2440FC12C5BE507AD674A0D8BBDFD10B60486590EBFD8D117130629B6EBE0A8195EF0B70DAD5F9A0BEA01001807034080C924DEA2E273B8DFE075A9E30982C343768DA430FEC7F0842D12ABBBAE4510BA60312E41F38D057567FF00B78A0050CC67BB35316D058F4638BE379D37AC3797ED4B84371F2A52F4A42CAA3EC4E9407423946F863488C366A3AD939266356C20B9A399C385B4131CC66890606F60F66AE2CECADABF5097EDB4620A4EF2075AC8E717C75B9EB50929446BB101EAD163F05AE7EB18E640B9167BF06420C5580A8B5C5AE13BB85422C7CE0EDCA9524183A77968FCCE000A25ABAF5F2FB54A89B66ED7CC51B6E91A44D6690497A78299DC5F6068F9F72B55CDFC3074B88BE9F2D6A430261D02E0184FBD5BCD2F74EBF05AA7CF612D79ACF2F2A163AB8876BD00586769DC29A678059F447178E0C4172D9C37FE35A2C382B42E3C4505BB81C21164798A22C48174424F7A66A6C1E8FE75A875F3ECBEE92CAC31E86A1867A240F75ED4EF4189661BBDA3F5046450EFFED2363FC8E4DFCD43189237083A2B3D0A30DCCBC3F0DF35F7A7D46BE015A5C444179CBE297087661B9BB9F2298AECB6074E1B17465E28706755EC86801DA117813CD24B86E3F251979D3DA16A68C4079BAF08431A63515B82184E7BEBF8A1680118C959DB0E714542C20B00F8A4D66C467B9EE78A0A0084491281B02A580421D263841981818949902965FE7196DCA8CA955DB1E4A59B8580DEF7829AFC132645FC93B55B7FF5686C90FB58F9AB22EB1D83E6A781F547CA92F56FD87551FABB8C15B55ED350FC64F7D0EABED40DDD5971A17AD7F2347E070AC6F53E1F55E1088DDE1A9B7A818826D3917BF032D5130B546953A4D85219A56341BE76986A6DACCE775F96F4C32E8EE288F1418A55EE13B6146D218863FC6A51E360BADDE6C1A90DFF002092044532FEA3AD0F6312EE08E4DFCD020A22CCE0F22EA5CE4E5102BA6C61C42D8806D950EA465A1484E8C953B7809CC287BD406A088E62EAAD6E05DA9A4ECE173B95125B29CDBFC9427C5130B93373A6FE8A56E7D0FEABA317AEA8F353F6A23442C1F1510105300888ADFB7D93F06272AFE76AF489614AAD8292B176309EAFC50342CCB06AB40416D159C80F9ABF3A15E320DDC0FF002949C1CACAB5BB77A2465372175130A9C1039C58607A9C452E448C5FE1A43005CB41F0F3463F114345A98DC39B95ED5834D02592A78F29500000300E319708022469846F0BB7253FD072B1C4F36FD39F02D620AC36C3A79B3F1598592ED3FA500006054B570F77E3F54CBAC05D190749C79145C508662FA29244D691EB2CECD0DC40275F5B835673DECFA544222434CBE5DAB0F857665083BD3AA71320A1010D98CD69ABA150776C70AD8F381A525CD14816627690E56E0A11094C10627C7A1BC084DA84C2005C1B277FC6C3CA8E418E0AC46E3A931E4E28012AC05175626620C6A19C21B15389B4926D893EC500A61FAD173D87BD399B63F97D8EFC1DD983E529FD5232422E087D88E2E96B1C9BFCD5D69BCE659F6FC0F92F7A3D0AD4313609A6711DD25C0E747F4A410042A4C829CA200F151FB5310D3F3AF4A60109E9A163CCD104B3B1DDCBB52BB52A0834213D9A8611080E3CFD0DCBD392940B964FC76FC68FEC8F927DC5185AB140E20B8EF4DC6F24A40055C033A9632E6C6757844516BDFF00C709E60AE804B4B1269519A0D401135857D17295D3DBA541F801C2EB40F3C8F97EA83E0373A9CB5A9264E88C89F6784192DD50B7C1524DBF446FF2FE0B5E009E8BE95B0C68B0F89A9E05D87F139D1A60A331A2687A980C15376627860AC2EAAD00030082830AE63A193DE4EDE8590624898AC297751F6A79884DC9B4FC1F8C84841B2173DFB5181983D68A5854398C6A1C6D24A7654D40E0D5C4C6FB51A6990DAE7CF0407401B045987698ED49DB81C040C74226A1E930AC0C65B2FB3C4ABE105DC5F5FAC64024859776D520085C61273CFF00ED4CD8006B64F98EF5283623CD7D3E3F0290C1BDDF41320211C12923979F70A31E406D032B68979F3A37343DC3EB82C8EF8647B9573A641A01AC4766267BD04D098390D4E28871130E465C239CAFC69DA80CAC9B8FF6B4BB01C990C4A4491C3193A95CE9630E7C1E1866A2A1BA400BA586285B664EA3BF93535B8A290E9BE0FC75A9ED444E285BC708FF00C209F75FF5D827F5AF517A16B301DF46870A9A437DEDBAD498C00E659F0FACAC1CA2C50B82F421E7515641F41A33C2357F0A81CDE07C3DE8024FED23037C3824E8CF1960749F7A955BF832A2BC104E5146DD260E34E99511A32F7812C7E78B02938309AFF91B60090DE1937D7BD1C0C01614100182A1A901137542987AEC83AD31DE296FCE65B1D79E1181E98C3440C37753DA9919291DAA7FF7013F140E2511E9FD678617CA09A07D0260CD6CF3E2A2D23BEAE7D74A96191D1ACFDF5F485A2C8C029D6842D2D39BE0DDBCF21008002C29AD8B7B3D298420E89394FB83D297929656A701B3419C7D009937D4A1825CF69C1E8DE8DFE41A6436A38B607CB27B7B7A5BB147F330A3C9C6B8990FC21A7C0452589BE5455F960E028C9451EE4127DF23B9DAB680223B41F148DCD8B2474950F0BC827FE2ED5F2A092CD0B13092563B1C0638326F3875A8D0DBEB8BD728B1694C1C88EFC0FF0095AF4171A70F1C1C632AFEC05CF9AD8CEC2DF1FAC728C1CA065965314A0E1B0092C2D33A8B377D26E3DE7BD60B8F418F8F6F4BE994164178E9EF14394B06AB9AEED6892F9949E388BB14F4FF00D3B06AED7CC3FD2A3EAABB2EA9F3EF4D13653074667268000DB0D66FA351B524D8750D263788373678826D5AC7372A0B51A52DB20CBDD5620000B01807E127E93B31A34F764B8920EE4FA557169012E14B73721792EED6EB4C00295C80A9505B639613AB1E6AC2D57D9AFAC7A52F61299CB17A054B841678EE8D8B06B43805B1E20625D09B5666190E772B9027E34AD62459D83DBF5D2E90404F268D4CE5902EF2E41CEB6064591875CC7D9A60E4436DB8DF3D6CD609AC2108BF8C53B70FF90A26920FC420FCFA5244D69DDB41BA27E38DE22045D460066BA54468880097619D22683018C6EA3E68D209FEF4B00D6F1760C7B51EF0B9184E59F5A0000002C065FA31A19D111944C4CC3BDD53D117A73BE3AD60A17A4FFD3D69EF30E9AFF978A7762432168EB877AC48E6532DE39E056A00741079A690DC5F7FA29C2603E4348D659E1F9FD81EA2B030FDD0788BA311195619929B5CCF9EFC584A1F2B3F144A0BA1EE3E385BBB9DDE8B99C133B8FB1C1C7AA2664ADDE3D1A3CF249F3C0A300AAB60DE974197935D85BE2ED1497046626F1AD08C17BD385059C330989470B211B053A49472C6A73763770A1507C18BEFD931D3F451D4159C6599C89A4829B74723A1E66815D526980D7757E2A381085931F05EAFF023286FD48F14D42D97007F3DE9CB81A4DD0749BF4A142007A18D69F21D4FF285312C8F32B2BAB321A0FD4FEC910009CA353F93CE92C910E0A2A364F90384FB876A23D77F9CFDB85959521B849E4A911B307311FBE0F2D058F583D1A34F7A56198B4AB32DC4C8757DAA200DCE752DD07CD224AB1E4E01919F5A7513602E8CFE94B1BA209D52775ED4B4912EC5325DEF539C1C5822F2F07376A2C5BF451FB4E014E373B44114A8A11D458ED8F4A5B421931C8F97FCA409921E05EEE6B639537B1403013772CB9D5C19C417CE6854540391B7B23BD040150758F968AEDE7DC942DC4F7707C7ED5CBB1B25D9F3BD1E1C82436718D4A032581825298910EA97C4D64811DCB3EE76E0462410D0712B3DDE06E3424ED3F14801824F18DF31D453E29D7421A17561048B8391C823C5250A971820DDEAB1B526826AE4053F48CA6127B18BBF3A742A92984E3E10735A85AC0D6C0153BAC81C7477C7B5181C61D2A1D2A5A54AB9EA340D2A2A1A526A350A423883210A5CF811A0133BC5595228A23092AADD6EF04188E4E16689B8C064181C0B767B3FDA95F391D4FCD2EB1DA23E7F6D49CB406165CE96B334337739E5AD0492465AE2254F975A9FE3345E8A0304707828AEE020BE6685E488726BF869B7CD5FD9643BC43C61318AFA43F2D5B1153B8F5DCD3C6F497BA88F233E68A21B535D39153D0F10644D8F9762AD21C5EA67DFC145A2BDD88C7E5BF6A90EAA0B0C9FEEF5390816B65C4E7F9B13E85B10F4A0B0074E2A05A76F2CC9BB6F1464201EC297024C6E1FF7F730C28441BF9FF736014802E72D36A6DC0057993D15703355799D189B72E10D96779A93F9A56A492F87C55929663997F8AD65F233F3C63D2E47447E8A928EA204C89A69A4EF57D893396CD71726906894EEE47569F22BEB37039C78A6071C335806C19F329141A801366252358990956299AD0479E6F1C0FD683B249A0533D96ED0C0700FF7917F74EE090264C0D4521B0969420C9A4895300853A27AF84A4F4112EFF53954B13C01BBDCED53A378C6C3EC68C3482BAD23EB206E28FC71B04962F41F1344D14D2EB8F9AB6FF80562C1D10C672A9888AD21862D86F19D071095B277A916836A32075F4181FAB2C14636F4C3B3D6B5819E560EDC189C97CBF7FBCD3C8BCDEC30780A3F12B3A350C9167E68686B0B25D969DA706A7C40B6DD7D4F059C17AC278A202529CE1AEB51CA1A0DD14AF31F0075ABBC698C14642D07B91501A44C0D2E29FF003F1009406AD3129C6053A15089371CF6A2D654291EF14324987A9BBEB8DA9B2EFF00514E19AAACFC03629F2471E647031C4335B81FBB1EB0BF420F29516B14634E282C97A0A7F6589E4EA53824DCC410A1F77862165DBA87BB4ED4903B24F04922BFE04D0A75983100802BDEC78A7E813A1C8C07BD0F1EBDD3D0A3E0460CC61C8C3D46070290C09DAC0F76D4812F81047C3C34CA82B0443D81D2866AE88F9A0415758D0A9765003C1425C9653D250E6251D9BE2EF25B64B63E8507AC3080B18AD0A6051C5EC4DE8919A028F0B306E48F13C096C18E83F75D02587A12BF9AD49A6278091DDED40561A9F6231AA528972358BF9A928970F4C7C2D494CBAFA61E138C7A671DCF9A02BA4096629D809A5CCCCB16727E7A3EB76E16F000CF39C636F5B454C464A11B02C5E78BBC7A8C10CB5894EEDC90E75A709B3DA847B82CED31785E384CB69BF8784F6C7E7F76DC703C60F9AE43B70B9F2E1C948A8B7EC96CF77B51B52E0D448A63EF2C7361F1EDC6082C4BCC53EAB3E942FCE9ACE00F34A4E361B252E82D19DE9880448DD6A6DEA70FE4507A415B53EF0620CF39D76A70C52E13A1D37A3330C9A379E8B7A911994EA8F68E11F0A872522F7F2ABF92296CB3E46A6D11984A22BC00FEE000E2BE68DCA5E05C72E11BE4CD4E691039AFA5EDC3031096623D8B4804646E3C261982EF384F66816C167B9343A35645A64AA62B497D2F1876CCD4A1C0294DFE83DBD590FE2830A59C7D0203EABBB05319B049B1F052ED240B29BB378A0200080080291A840E924508EC7DECE8FF0035E1861B2A18F90A49D9301C8C9DC6A3D4C3B2FBA7631EE83F731F337E31CAEA38A4DC121BACF85E1021EF049F054814F80C3C47096FEEC7CD0F94885DA7AD77809C23200CD069E66C2F5298FF00030BEB7C3E3D44280E7E9935A4654A7D09CC71953266B04C7433A2973117B3B14BF405CBF3DF44CEB699B609F627094909F9AC7E290544B130303CC95CDA1FE75A1008971A5BFB8A65C5CD5C6EE4BDA9B3C1CBD2EBC84E559F2356F1828F64F66A62E33F8693DB85979BC732FF001412A91B5A84B082C24A176D9D380031308E8D2D886D8D378DE62524C6BA3951F63625D1DCD9E959F5F0C364C9DBD7352EBE951100C5580A6E59E4F960A87D7680A7D5335D7FF1428A2CCD71EB974F514EDE1362FEE4D2A1246D92692C04BDC687CB7E4D8BFB93576299C927C532D97814F8FDB5092F0533C04A43AF1734B139F0F0AAD37FA87E3CD6A789DE3E6936FF00623FB5A79E40DB3417A0CBAD318886FB5251B891B8689275A3C0B390F281EF536A580FDC98A121A4C5A4D20B6E73272AB7346583CB4A1F8019B6130A95756BA7AFF2B6F43D1A44913F04C01D54500C939F2A312EE581DAA5AED2CC2BD3A884FC9E2F8A0D8739CF3717F04521171CC3DA3AD4F2963E589E18E95FDE90D1C28A9B260DCF3594C089C14C7953A524C4AFB3178FDC36D10DCE8E2EE6CD38BC3C93E28C33708331B2769A5004A460C9669696BA0D5F19A79BFECF7381164480992C9EF52E04C977B146911649076AC2A0DDFC99D4DB94EE1F54416562C2F5295B0BA6A374BADCEA529815944B5523F96A9EBA2FF00878A8C3C333F428B7469378858967B483C601059A68F8AC733643CD480ACBC5215642C22934D4F29A8E4975F104D35DE127CD2261B9C05471ED58CC315755053B3B4161A6C88C4BDC313CD046DD4473D3F04C0C5ABB83B29D2A71E8593B2A80CC00D341EB81002A0E68A289C87B3F3FB8A565DC182479D77DA991C270BCE9F2714C19C6860682A4A6592737876C3B510505A068B2786A6D61771F567A517C29D121209AC3F0A6E40C56A7E6F334545FBAE7CA8DED09E1E093126264FD51F91E7FB5DA8E21B40F49F0614A915921D988A9B29A7C21A124EB83E2B147E67D8A7D1330443DD1F14220F54BE0F7A5652D63F8CE82A5AE3637DD412FB8A66D5D2612516BB48630634893686651B325414FB8D9C9A14238DE1CCA74C42C4711FC185163A93913D52A514139E4E93EF4DBE6F1B49F14E8E3DD0522014E6EBD47B55966231213107ACFEE0882755926894A06E922C747476A4028D483D3CF0120336A32BBB51876A61CE559AC7EFA50171C1B34CFB255C5084C00707DAA1D373F6307B7B35600D4764F9A4A028064D0304726539F0848C29E90DFC9471306441C9C1D09324929C96BDAE76A2FFD426142A6620277288F0EE7DD3FCDF748CB0D0F705441D5908539C82B140800C008E06B4C804679E737951088D367CE9B3BF88542FC534206F05452013767DCA6F022AC4E7B1A6E24E75351E5E91A05AE498DFA63530266B2981E5AB95243256C72F087200865027CCFEEE33C80C3734A7CD7D913774CCDF6ABC294A5C74AC43A17A461217276A996601CA8C4E68F1444A524F01D1D2A75489B3C04E93DAA0058CB99FDE2A490C5239FF1DDA8B71F84F9A4FBCC79B3C52214072FE5A2ECA04524EA5498CB55124EE0DFB35044F411E8FE66B46071E4159341E4729F0E6F82ADD366410E31F1C548C8F7372A658980F66A165F2140749C72E74DB0249D2DF34A88B019C4A7C9EA8080170438CF217229B8A9141CACB7FE0CBE6E017137E545E405296012B2D78AF7A75992BED482602B4A858556D142BA5AA383CC6A7F944EEB01CB7E945EC1B4CC89FC6E521C864F638994D1FB9421F67CB4F537A3150811DECD5D8DC610A624B77CBB153CED3221E2BFD5FF0054CF280A0DF68A84040982FD505B36C7DAA3954D527A54BCBE10F4D2965971A124E113C52318A4E2080236473A271662B2E5432AA3BEE4F215883A41A10C1531ED89B889F3EA2F0350488E2512D1C2660D3FF05A44C483BDEBCB7BF0F15EF5E33499F23ACBFC50A85225C4A301602E1FEEA7F8D60486938D4B041D6F13FF0066F6CC84A4142C11C9D07176777B9538D9BF6A2657898D0915B1458A1965152618D40A2606F306B6DDBF55FD8FD504BC90C7B56356EA9A00E38F0305A150032F73D0D3048C1C8FBE950B9AFC57F56CD3EAFB8FFC851BFF002579EE06792A76B669056F6552B19C74CB822B265314CC7EE8AD244289CE69163B63711C474E2549333A2CCD1BBA23C57BDDA801A4A18C6A50D89B2546114E0D3A4BD3838342C31A882994CA800C106B1A5C017BBDBD0A3907B95E2A8CEC4BE1A682293177FF00C83F8B668041B3E0E1E77C502145D87B52B740442259E38FFC61C40249103DEAE0B601A5A9DBDD4E1450801C0CB9DEB139D246946E73E099936A25D9F059AAE9D8A1E58526FD0C879509F010684F1F6DEE5019357D9AF0FDCA3FA94FFFD9, N'image/jpeg', CAST(500.00 AS Decimal(10, 2)), 12, 1, 2, 1, 2, 1, N'18127048-4b04-4a5d-8c78-556b315649d7')
INSERT [dbo].[EMPLEADO] ([ID_EMPLEADO], [IDENTIFICACION], [NOMBRECOMPLETO], [FECHA_NACIMIENTO], [FECHA_INGRESO], [FOTO], [TIPO_FOTO], [SALARIO], [SALDO_VACACIONES], [CARGO_ID], [CORREO_ID], [HORARIOLABORAL_ID], [DEPARTAMENTO_ID], [ESTADO], [AspNetUsers_ID]) VALUES (3, 305070198, N'TIFANNY CAMACHO', CAST(N'1999-01-01T00:00:00.000' AS DateTime), CAST(N'2023-01-01T00:00:00.000' AS DateTime), 0x4E, NULL, CAST(500.00 AS Decimal(10, 2)), 12, 5, 3, 1, 1, 1, N'68890dd1-80fc-4c65-9481-f5a1275897ec')
SET IDENTITY_INSERT [dbo].[EMPLEADO] OFF
GO
SET IDENTITY_INSERT [dbo].[EMPLEADODIRRECCION] ON 

INSERT [dbo].[EMPLEADODIRRECCION] ([ID_EMPLEADODIRRECCION], [EMPLEADO_ID], [DIRRECION_ID]) VALUES (1, 2, 1)
INSERT [dbo].[EMPLEADODIRRECCION] ([ID_EMPLEADODIRRECCION], [EMPLEADO_ID], [DIRRECION_ID]) VALUES (2, 3, 2)
SET IDENTITY_INSERT [dbo].[EMPLEADODIRRECCION] OFF
GO
SET IDENTITY_INSERT [dbo].[EMPLEADOTELEFONO] ON 

INSERT [dbo].[EMPLEADOTELEFONO] ([ID_EMPLEADOTELEFONO], [EMPLEADO_ID], [TELEFONO_ID]) VALUES (1, 2, 1)
INSERT [dbo].[EMPLEADOTELEFONO] ([ID_EMPLEADOTELEFONO], [EMPLEADO_ID], [TELEFONO_ID]) VALUES (2, 2, 2)
INSERT [dbo].[EMPLEADOTELEFONO] ([ID_EMPLEADOTELEFONO], [EMPLEADO_ID], [TELEFONO_ID]) VALUES (3, 3, 3)
INSERT [dbo].[EMPLEADOTELEFONO] ([ID_EMPLEADOTELEFONO], [EMPLEADO_ID], [TELEFONO_ID]) VALUES (4, 3, 4)
SET IDENTITY_INSERT [dbo].[EMPLEADOTELEFONO] OFF
GO
SET IDENTITY_INSERT [dbo].[FLUJOAPROBACION] ON 

INSERT [dbo].[FLUJOAPROBACION] ([ID_FLUJOAPROBACION], [SECUENCIA], [DEPARTAMENTO_APROBACION_ID], [DEPARTAMENTO_ID]) VALUES (4, 1, 2, 2)
INSERT [dbo].[FLUJOAPROBACION] ([ID_FLUJOAPROBACION], [SECUENCIA], [DEPARTAMENTO_APROBACION_ID], [DEPARTAMENTO_ID]) VALUES (5, 2, 2, 1)
SET IDENTITY_INSERT [dbo].[FLUJOAPROBACION] OFF
GO
SET IDENTITY_INSERT [dbo].[HORARIOLABORAL] ON 

INSERT [dbo].[HORARIOLABORAL] ([ID_HORARIOLABORAL], [NOMBREHL], [DESCRIPCION], [HORA_INGRESO], [HORA_SALIDA]) VALUES (1, N'JORNADA HABITUAL', N'JORNADA HABITUAL', 8, 17)
INSERT [dbo].[HORARIOLABORAL] ([ID_HORARIOLABORAL], [NOMBREHL], [DESCRIPCION], [HORA_INGRESO], [HORA_SALIDA]) VALUES (2, N'HORARIO TARDE', N'HORARIO TARDE', 13, 18)
INSERT [dbo].[HORARIOLABORAL] ([ID_HORARIOLABORAL], [NOMBREHL], [DESCRIPCION], [HORA_INGRESO], [HORA_SALIDA]) VALUES (3, N'HORARIO NOCHE', N'HORARIO NOCHE', 16, 22)
SET IDENTITY_INSERT [dbo].[HORARIOLABORAL] OFF
GO
SET IDENTITY_INSERT [dbo].[IMPUESTORENTA] ON 

INSERT [dbo].[IMPUESTORENTA] ([ID_IMPUESTORENTA], [MIN_SALARY], [MAX_SALARY], [PORCENTAJE]) VALUES (1, CAST(0.00 AS Decimal(18, 2)), CAST(941000.00 AS Decimal(18, 2)), CAST(0.00 AS Decimal(5, 2)))
INSERT [dbo].[IMPUESTORENTA] ([ID_IMPUESTORENTA], [MIN_SALARY], [MAX_SALARY], [PORCENTAJE]) VALUES (2, CAST(941001.00 AS Decimal(18, 2)), CAST(1384000.00 AS Decimal(18, 2)), CAST(10.00 AS Decimal(5, 2)))
INSERT [dbo].[IMPUESTORENTA] ([ID_IMPUESTORENTA], [MIN_SALARY], [MAX_SALARY], [PORCENTAJE]) VALUES (3, CAST(1384001.00 AS Decimal(18, 2)), CAST(2432000.00 AS Decimal(18, 2)), CAST(15.00 AS Decimal(5, 2)))
INSERT [dbo].[IMPUESTORENTA] ([ID_IMPUESTORENTA], [MIN_SALARY], [MAX_SALARY], [PORCENTAJE]) VALUES (4, CAST(2432001.00 AS Decimal(18, 2)), CAST(4317000.00 AS Decimal(18, 2)), CAST(20.00 AS Decimal(5, 2)))
INSERT [dbo].[IMPUESTORENTA] ([ID_IMPUESTORENTA], [MIN_SALARY], [MAX_SALARY], [PORCENTAJE]) VALUES (5, CAST(4317000.00 AS Decimal(18, 2)), NULL, CAST(25.00 AS Decimal(5, 2)))
SET IDENTITY_INSERT [dbo].[IMPUESTORENTA] OFF
GO
SET IDENTITY_INSERT [dbo].[INGRESO] ON 

INSERT [dbo].[INGRESO] ([ID_INGRESO], [NOMBRE_INGRESO], [DESCRIPCION], [MONTO], [PORCENTAJE]) VALUES (1, N'Salario', N'Salario', CAST(0.00 AS Decimal(10, 2)), CAST(0.00 AS Decimal(10, 2)))
INSERT [dbo].[INGRESO] ([ID_INGRESO], [NOMBRE_INGRESO], [DESCRIPCION], [MONTO], [PORCENTAJE]) VALUES (2, N'Horas Extra', N'Horas Extra', CAST(0.00 AS Decimal(10, 2)), CAST(0.00 AS Decimal(10, 2)))
INSERT [dbo].[INGRESO] ([ID_INGRESO], [NOMBRE_INGRESO], [DESCRIPCION], [MONTO], [PORCENTAJE]) VALUES (3, N'Dias Extra', N'Horas Extra', NULL, NULL)
INSERT [dbo].[INGRESO] ([ID_INGRESO], [NOMBRE_INGRESO], [DESCRIPCION], [MONTO], [PORCENTAJE]) VALUES (4, N'Viaticos', N'Viaticos', NULL, NULL)
SET IDENTITY_INSERT [dbo].[INGRESO] OFF
GO
SET IDENTITY_INSERT [dbo].[SOLICITUD] ON 

INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (1, CAST(N'2024-06-29T15:21:54.443' AS DateTime), NULL, NULL, N'KKK', NULL, N'KKK', N'P         ', 3, 4, 2)
INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (2, CAST(N'2024-06-29T15:24:18.663' AS DateTime), CAST(N'2024-06-20T00:00:00.000' AS DateTime), CAST(N'2024-06-26T00:00:00.000' AS DateTime), N'UU', 5, N'UUU', N'P         ', 3, 2, NULL)
INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (3, CAST(N'2024-06-29T15:27:44.940' AS DateTime), CAST(N'2024-07-01T00:00:00.000' AS DateTime), CAST(N'2024-07-02T00:00:00.000' AS DateTime), N'UU', 2, N'UUUUU', N'P         ', 3, 1, NULL)
INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (4, CAST(N'2024-06-29T16:15:37.790' AS DateTime), NULL, NULL, N'hh', NULL, N'hh', N'P         ', 3, 4, 2)
INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (5, CAST(N'2024-06-29T16:23:03.110' AS DateTime), CAST(N'2024-06-14T00:00:00.000' AS DateTime), CAST(N'2024-06-21T00:00:00.000' AS DateTime), N'ee', 6, N'ee', N'P         ', 3, 1, NULL)
INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (6, CAST(N'2024-07-05T21:51:39.633' AS DateTime), CAST(N'2024-08-07T00:00:00.000' AS DateTime), CAST(N'2024-08-09T00:00:00.000' AS DateTime), N'a', 3, N'a', N'P         ', 2, 3, NULL)
INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (7, CAST(N'2024-07-05T22:57:02.713' AS DateTime), CAST(N'2024-07-31T00:00:00.000' AS DateTime), CAST(N'2024-08-02T00:00:00.000' AS DateTime), N'a', 3, N'a', N'P         ', 2, 1, NULL)
INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (8, CAST(N'2024-07-05T23:00:15.270' AS DateTime), CAST(N'2024-07-24T00:00:00.000' AS DateTime), CAST(N'2024-07-26T00:00:00.000' AS DateTime), N'a', 3, N'a', N'P         ', 2, 2, NULL)
INSERT [dbo].[SOLICITUD] ([ID_SOLICITUD], [FECHA_SOLICITUD], [FECHA_INICIO], [FECHA_FINAL], [COMENTARIO], [DIAS], [DETALLE], [ESTADO_SOLICITUD], [SOLICITANTE_ID], [TIPOSOLICITUD_ID], [ID_HORARIOLABORAL]) VALUES (9, CAST(N'2024-07-06T21:43:33.993' AS DateTime), CAST(N'2024-07-17T00:00:00.000' AS DateTime), CAST(N'2024-07-25T00:00:00.000' AS DateTime), N'Prueba', 7, N'Prueba', N'P         ', 2, 3, NULL)
SET IDENTITY_INSERT [dbo].[SOLICITUD] OFF
GO
SET IDENTITY_INSERT [dbo].[TELEFONO] ON 

INSERT [dbo].[TELEFONO] ([ID_TELEFONO], [TELEFONO]) VALUES (1, N'000 000 000')
INSERT [dbo].[TELEFONO] ([ID_TELEFONO], [TELEFONO]) VALUES (2, N'000 000 000')
INSERT [dbo].[TELEFONO] ([ID_TELEFONO], [TELEFONO]) VALUES (3, N'000 000 000')
INSERT [dbo].[TELEFONO] ([ID_TELEFONO], [TELEFONO]) VALUES (4, N'000 000 001')
SET IDENTITY_INSERT [dbo].[TELEFONO] OFF
GO
SET IDENTITY_INSERT [dbo].[TIPODOCUMENTO] ON 

INSERT [dbo].[TIPODOCUMENTO] ([ID_TIPODOCUMENTO], [NOMBRE_TIPODOCUMENTO], [DESCRIPCION]) VALUES (1, N'NÓMINA', N'NÓMINA')
INSERT [dbo].[TIPODOCUMENTO] ([ID_TIPODOCUMENTO], [NOMBRE_TIPODOCUMENTO], [DESCRIPCION]) VALUES (2, N'EVALUACIÓN DE DESEMPEÑO', N'EVALUACIÓN DE DESEMPEÑO')
INSERT [dbo].[TIPODOCUMENTO] ([ID_TIPODOCUMENTO], [NOMBRE_TIPODOCUMENTO], [DESCRIPCION]) VALUES (3, N'CERTIFICADO ', N'CERTIFICADOS DE CAPACITACIÓN')
SET IDENTITY_INSERT [dbo].[TIPODOCUMENTO] OFF
GO
SET IDENTITY_INSERT [dbo].[TIPONOMINA] ON 

INSERT [dbo].[TIPONOMINA] ([ID_TIPONOMINA], [NOMBRE_NOMINA], [DESCRIPCION]) VALUES (1, N'MENSUAL', N'NOMINA MENSUAL')
SET IDENTITY_INSERT [dbo].[TIPONOMINA] OFF
GO
SET IDENTITY_INSERT [dbo].[TIPOSOLICITUD] ON 

INSERT [dbo].[TIPOSOLICITUD] ([ID_TIPOSOLICITUD], [NOMBRE_TIPO_SOLICITUD], [DESCRIPCION]) VALUES (1, N'VACACIONES', N'VACACIONES')
INSERT [dbo].[TIPOSOLICITUD] ([ID_TIPOSOLICITUD], [NOMBRE_TIPO_SOLICITUD], [DESCRIPCION]) VALUES (2, N'PERMISO ESPECIAL', N'PERMISO ESPECIAL')
INSERT [dbo].[TIPOSOLICITUD] ([ID_TIPOSOLICITUD], [NOMBRE_TIPO_SOLICITUD], [DESCRIPCION]) VALUES (3, N'INCAPACIDAD', N'INCAPACIDAD')
INSERT [dbo].[TIPOSOLICITUD] ([ID_TIPOSOLICITUD], [NOMBRE_TIPO_SOLICITUD], [DESCRIPCION]) VALUES (4, N'CAMBIO DE HORARIO', N'CAMBIO DE HORARIO')
SET IDENTITY_INSERT [dbo].[TIPOSOLICITUD] OFF
GO
ALTER TABLE [dbo].[APROBACIONSOLICITUD]  WITH CHECK ADD  CONSTRAINT [FK_APROBACIONSOLICITUD_EMPLEADO] FOREIGN KEY([ENCARGADO_APROBACION_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[APROBACIONSOLICITUD] CHECK CONSTRAINT [FK_APROBACIONSOLICITUD_EMPLEADO]
GO
ALTER TABLE [dbo].[APROBACIONSOLICITUD]  WITH CHECK ADD  CONSTRAINT [FK_APROBACIONSOLICITUD_SOLICITUD] FOREIGN KEY([SOLICITUD_ID])
REFERENCES [dbo].[SOLICITUD] ([ID_SOLICITUD])
GO
ALTER TABLE [dbo].[APROBACIONSOLICITUD] CHECK CONSTRAINT [FK_APROBACIONSOLICITUD_SOLICITUD]
GO
ALTER TABLE [dbo].[AspNetRoleClaims]  WITH CHECK ADD  CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY([RoleId])
REFERENCES [dbo].[AspNetRoles] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[AspNetRoleClaims] CHECK CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId]
GO
ALTER TABLE [dbo].[AspNetUserClaims]  WITH CHECK ADD  CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[AspNetUsers] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[AspNetUserClaims] CHECK CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId]
GO
ALTER TABLE [dbo].[AspNetUserLogins]  WITH CHECK ADD  CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[AspNetUsers] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[AspNetUserLogins] CHECK CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId]
GO
ALTER TABLE [dbo].[AspNetUserRoles]  WITH CHECK ADD  CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY([RoleId])
REFERENCES [dbo].[AspNetRoles] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[AspNetUserRoles] CHECK CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId]
GO
ALTER TABLE [dbo].[AspNetUserRoles]  WITH CHECK ADD  CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[AspNetUsers] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[AspNetUserRoles] CHECK CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId]
GO
ALTER TABLE [dbo].[AspNetUserTokens]  WITH CHECK ADD  CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[AspNetUsers] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[AspNetUserTokens] CHECK CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId]
GO
ALTER TABLE [dbo].[CALCULOIMPUESTO]  WITH CHECK ADD  CONSTRAINT [FK_CALCULOIMPUESTO_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[CALCULOIMPUESTO] CHECK CONSTRAINT [FK_CALCULOIMPUESTO_EMPLEADO]
GO
ALTER TABLE [dbo].[DEDUCCIONNOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_DEDUCCIONNOMINADETALLE_DEDUCCION] FOREIGN KEY([DEDUCCION_ID])
REFERENCES [dbo].[DEDUCCION] ([ID_DEDUCCION])
GO
ALTER TABLE [dbo].[DEDUCCIONNOMINADETALLE] CHECK CONSTRAINT [FK_DEDUCCIONNOMINADETALLE_DEDUCCION]
GO
ALTER TABLE [dbo].[DEDUCCIONNOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_DEDUCCIONNOMINADETALLE_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[DEDUCCIONNOMINADETALLE] CHECK CONSTRAINT [FK_DEDUCCIONNOMINADETALLE_EMPLEADO]
GO
ALTER TABLE [dbo].[DEDUCCIONNOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_DEDUCCIONNOMINADETALLE_NOMINADETALLE] FOREIGN KEY([NOMINADETALLE_ID])
REFERENCES [dbo].[NOMINADETALLE] ([ID_NOMINADETALLE])
GO
ALTER TABLE [dbo].[DEDUCCIONNOMINADETALLE] CHECK CONSTRAINT [FK_DEDUCCIONNOMINADETALLE_NOMINADETALLE]
GO
ALTER TABLE [dbo].[DEEXTRAORNIDARIO]  WITH CHECK ADD  CONSTRAINT [FK_DEEXTRAORNIDARIO_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[DEEXTRAORNIDARIO] CHECK CONSTRAINT [FK_DEEXTRAORNIDARIO_EMPLEADO]
GO
ALTER TABLE [dbo].[DEPARTAMENTOSUPERVISOR]  WITH CHECK ADD  CONSTRAINT [FK_DEPARTAMENTOSUPERVISOR_DEPARTAMENTO] FOREIGN KEY([DEPARTAMENTO_ID])
REFERENCES [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO])
GO
ALTER TABLE [dbo].[DEPARTAMENTOSUPERVISOR] CHECK CONSTRAINT [FK_DEPARTAMENTOSUPERVISOR_DEPARTAMENTO]
GO
ALTER TABLE [dbo].[DEPARTAMENTOSUPERVISOR]  WITH CHECK ADD  CONSTRAINT [FK_DEPARTAMENTOSUPERVISOR_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[DEPARTAMENTOSUPERVISOR] CHECK CONSTRAINT [FK_DEPARTAMENTOSUPERVISOR_EMPLEADO]
GO
ALTER TABLE [dbo].[EMPLEADO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADO_AspNetUsers] FOREIGN KEY([AspNetUsers_ID])
REFERENCES [dbo].[AspNetUsers] ([Id])
GO
ALTER TABLE [dbo].[EMPLEADO] CHECK CONSTRAINT [FK_EMPLEADO_AspNetUsers]
GO
ALTER TABLE [dbo].[EMPLEADO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADO_CARGO] FOREIGN KEY([CARGO_ID])
REFERENCES [dbo].[CARGO] ([ID_CARGO])
GO
ALTER TABLE [dbo].[EMPLEADO] CHECK CONSTRAINT [FK_EMPLEADO_CARGO]
GO
ALTER TABLE [dbo].[EMPLEADO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADO_CORREO] FOREIGN KEY([CORREO_ID])
REFERENCES [dbo].[CORREO] ([ID_CORREO])
GO
ALTER TABLE [dbo].[EMPLEADO] CHECK CONSTRAINT [FK_EMPLEADO_CORREO]
GO
ALTER TABLE [dbo].[EMPLEADO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADO_DEPARTAMENTO] FOREIGN KEY([DEPARTAMENTO_ID])
REFERENCES [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO])
GO
ALTER TABLE [dbo].[EMPLEADO] CHECK CONSTRAINT [FK_EMPLEADO_DEPARTAMENTO]
GO
ALTER TABLE [dbo].[EMPLEADO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADO_HORARIOLABORAL] FOREIGN KEY([HORARIOLABORAL_ID])
REFERENCES [dbo].[HORARIOLABORAL] ([ID_HORARIOLABORAL])
GO
ALTER TABLE [dbo].[EMPLEADO] CHECK CONSTRAINT [FK_EMPLEADO_HORARIOLABORAL]
GO
ALTER TABLE [dbo].[EMPLEADOCAPACITACION]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADOCAPACITACION_CAPACITACION] FOREIGN KEY([CAPACITACION_ID])
REFERENCES [dbo].[CAPACITACION] ([ID_CAPACION])
GO
ALTER TABLE [dbo].[EMPLEADOCAPACITACION] CHECK CONSTRAINT [FK_EMPLEADOCAPACITACION_CAPACITACION]
GO
ALTER TABLE [dbo].[EMPLEADOCAPACITACION]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADOCAPACITACION_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[EMPLEADOCAPACITACION] CHECK CONSTRAINT [FK_EMPLEADOCAPACITACION_EMPLEADO]
GO
ALTER TABLE [dbo].[EMPLEADODIRRECCION]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADODIRRECCION_DIRECCION] FOREIGN KEY([DIRRECION_ID])
REFERENCES [dbo].[DIRRECCION] ([ID_DIRECCION])
GO
ALTER TABLE [dbo].[EMPLEADODIRRECCION] CHECK CONSTRAINT [FK_EMPLEADODIRRECCION_DIRECCION]
GO
ALTER TABLE [dbo].[EMPLEADODIRRECCION]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADODIRRECCION_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[EMPLEADODIRRECCION] CHECK CONSTRAINT [FK_EMPLEADODIRRECCION_EMPLEADO]
GO
ALTER TABLE [dbo].[EMPLEADODOCUMENTO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADODOCUMENTO_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[EMPLEADODOCUMENTO] CHECK CONSTRAINT [FK_EMPLEADODOCUMENTO_EMPLEADO]
GO
ALTER TABLE [dbo].[EMPLEADODOCUMENTO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADODOCUMENTO_TIPODOCUMENTO] FOREIGN KEY([TIPODOCUMENTO_ID])
REFERENCES [dbo].[TIPODOCUMENTO] ([ID_TIPODOCUMENTO])
GO
ALTER TABLE [dbo].[EMPLEADODOCUMENTO] CHECK CONSTRAINT [FK_EMPLEADODOCUMENTO_TIPODOCUMENTO]
GO
ALTER TABLE [dbo].[EMPLEADOTELEFONO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADOTELEFONO_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[EMPLEADOTELEFONO] CHECK CONSTRAINT [FK_EMPLEADOTELEFONO_EMPLEADO]
GO
ALTER TABLE [dbo].[EMPLEADOTELEFONO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADOTELEFONO_TELEFONO] FOREIGN KEY([TELEFONO_ID])
REFERENCES [dbo].[TELEFONO] ([ID_TELEFONO])
GO
ALTER TABLE [dbo].[EMPLEADOTELEFONO] CHECK CONSTRAINT [FK_EMPLEADOTELEFONO_TELEFONO]
GO

ALTER TABLE [dbo].[FLUJOAPROBACION]  WITH CHECK ADD  CONSTRAINT [FK_FLUJOAPROBACION_DEPARTAMENTO1] FOREIGN KEY([DEPARTAMENTO_APROBACION_ID])
REFERENCES [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO])
GO
ALTER TABLE [dbo].[FLUJOAPROBACION] CHECK CONSTRAINT [FK_FLUJOAPROBACION_DEPARTAMENTO1]
GO
ALTER TABLE [dbo].[FLUJOAPROBACION]  WITH CHECK ADD  CONSTRAINT [FK_FLUJOAPROBACION_DEPARTAMENTO2] FOREIGN KEY([DEPARTAMENTO_ID])
REFERENCES [dbo].[DEPARTAMENTO] ([ID_DEPARTAMENTO])
GO
ALTER TABLE [dbo].[FLUJOAPROBACION] CHECK CONSTRAINT [FK_FLUJOAPROBACION_DEPARTAMENTO2]
GO
ALTER TABLE [dbo].[HORASEXTRA]  WITH CHECK ADD  CONSTRAINT [FK_HORASEXTRA_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[HORASEXTRA] CHECK CONSTRAINT [FK_HORASEXTRA_EMPLEADO]
GO
ALTER TABLE [dbo].[HORASTRABAJADAS]  WITH CHECK ADD  CONSTRAINT [FK_HORASTRABAJADAS_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[HORASTRABAJADAS] CHECK CONSTRAINT [FK_HORASTRABAJADAS_EMPLEADO]
GO
ALTER TABLE [dbo].[INGRESONOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_INGRESONOMINADETALLE_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[INGRESONOMINADETALLE] CHECK CONSTRAINT [FK_INGRESONOMINADETALLE_EMPLEADO]
GO
ALTER TABLE [dbo].[INGRESONOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_INGRESONOMINADETALLE_INGRESO] FOREIGN KEY([INGRESO_ID])
REFERENCES [dbo].[INGRESO] ([ID_INGRESO])
GO
ALTER TABLE [dbo].[INGRESONOMINADETALLE] CHECK CONSTRAINT [FK_INGRESONOMINADETALLE_INGRESO]
GO
ALTER TABLE [dbo].[INGRESONOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_INGRESONOMINADETALLE_NOMINADETALLE] FOREIGN KEY([NOMINADETALLE_ID])
REFERENCES [dbo].[NOMINADETALLE] ([ID_NOMINADETALLE])
GO
ALTER TABLE [dbo].[INGRESONOMINADETALLE] CHECK CONSTRAINT [FK_INGRESONOMINADETALLE_NOMINADETALLE]
GO
ALTER TABLE [dbo].[NOMINA]  WITH CHECK ADD  CONSTRAINT [FK_NOMINA_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[NOMINA] CHECK CONSTRAINT [FK_NOMINA_EMPLEADO]
GO
ALTER TABLE [dbo].[NOMINA]  WITH CHECK ADD  CONSTRAINT [FK_NOMINA_EMPLEADO1] FOREIGN KEY([CREADOR_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[NOMINA] CHECK CONSTRAINT [FK_NOMINA_EMPLEADO1]
GO
ALTER TABLE [dbo].[NOMINA]  WITH CHECK ADD  CONSTRAINT [FK_NOMINA_EMPLEADO2] FOREIGN KEY([APROBADOR_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[NOMINA] CHECK CONSTRAINT [FK_NOMINA_EMPLEADO2]
GO
ALTER TABLE [dbo].[NOMINA]  WITH CHECK ADD  CONSTRAINT [FK_NOMINA_TIPONOMINA] FOREIGN KEY([TIPONOMINA_ID])
REFERENCES [dbo].[TIPONOMINA] ([ID_TIPONOMINA])
GO
ALTER TABLE [dbo].[NOMINA] CHECK CONSTRAINT [FK_NOMINA_TIPONOMINA]
GO
ALTER TABLE [dbo].[NOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_NOMINADETALLE_CALCULOIMPUESTO] FOREIGN KEY([CALCULOIMPUESTO_ID])
REFERENCES [dbo].[CALCULOIMPUESTO] ([ID_CALCULOIMPUESTO])
GO
ALTER TABLE [dbo].[NOMINADETALLE] CHECK CONSTRAINT [FK_NOMINADETALLE_CALCULOIMPUESTO]
GO
ALTER TABLE [dbo].[NOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_NOMINADETALLE_DEEXTRAORNIDARIO] FOREIGN KEY([DEEXTRAORNIDARIO_ID])
REFERENCES [dbo].[DEEXTRAORNIDARIO] ([ID_DEEXTRAORNIDARIO])
GO
ALTER TABLE [dbo].[NOMINADETALLE] CHECK CONSTRAINT [FK_NOMINADETALLE_DEEXTRAORNIDARIO]
GO
ALTER TABLE [dbo].[NOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_NOMINADETALLE_HORASEXTRA] FOREIGN KEY([HORASEXTRA_ID])
REFERENCES [dbo].[HORASEXTRA] ([ID_HORASEXTRA])
GO
ALTER TABLE [dbo].[NOMINADETALLE] CHECK CONSTRAINT [FK_NOMINADETALLE_HORASEXTRA]
GO
ALTER TABLE [dbo].[NOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_NOMINADETALLE_HORASTRABAJADAS] FOREIGN KEY([HORASTRABAJADAS_ID])
REFERENCES [dbo].[HORASTRABAJADAS] ([ID_HORASTRABAJADAS])
GO
ALTER TABLE [dbo].[NOMINADETALLE] CHECK CONSTRAINT [FK_NOMINADETALLE_HORASTRABAJADAS]
GO
ALTER TABLE [dbo].[PROYECTO]  WITH CHECK ADD  CONSTRAINT [FK_PROYECTO_CLIENTE] FOREIGN KEY([CLIENTE_ID])
REFERENCES [dbo].[CLIENTE] ([ID_CLIENTE])
GO
ALTER TABLE [dbo].[PROYECTO] CHECK CONSTRAINT [FK_PROYECTO_CLIENTE]
GO
ALTER TABLE [dbo].[PROYECTO]  WITH CHECK ADD  CONSTRAINT [FK_PROYECTO_EMPLEADO] FOREIGN KEY([CONTACTO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[PROYECTO] CHECK CONSTRAINT [FK_PROYECTO_EMPLEADO]
GO
ALTER TABLE [dbo].[REGISTROACTIVIDAD]  WITH CHECK ADD  CONSTRAINT [FK_REGISTROACTIVIDAD_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[REGISTROACTIVIDAD] CHECK CONSTRAINT [FK_REGISTROACTIVIDAD_EMPLEADO]
GO
ALTER TABLE [dbo].[REGISTROACTIVIDAD]  WITH CHECK ADD  CONSTRAINT [FK_REGISTROACTIVIDAD_PROYECTO] FOREIGN KEY([PROYECTO_ID])
REFERENCES [dbo].[PROYECTO] ([ID_PROYECTO])
GO
ALTER TABLE [dbo].[REGISTROACTIVIDAD] CHECK CONSTRAINT [FK_REGISTROACTIVIDAD_PROYECTO]
GO
ALTER TABLE [dbo].[SOLICITUD]  WITH CHECK ADD  CONSTRAINT [FK_SOLICITUD_EMPLEADO] FOREIGN KEY([SOLICITANTE_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[SOLICITUD] CHECK CONSTRAINT [FK_SOLICITUD_EMPLEADO]
GO
ALTER TABLE [dbo].[SOLICITUD]  WITH CHECK ADD  CONSTRAINT [FK_SOLICITUD_TIPOSOLICITUD] FOREIGN KEY([TIPOSOLICITUD_ID])
REFERENCES [dbo].[TIPOSOLICITUD] ([ID_TIPOSOLICITUD])
GO
ALTER TABLE [dbo].[SOLICITUD] CHECK CONSTRAINT [FK_SOLICITUD_TIPOSOLICITUD]
GO
ALTER TABLE [dbo].[EMPLEADOPROYECTO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADOPROYECTO_EMPLEADO] FOREIGN KEY([EMPLEADO_ID])
REFERENCES [dbo].[EMPLEADO] ([ID_EMPLEADO])
GO
ALTER TABLE [dbo].[EMPLEADOPROYECTO] CHECK CONSTRAINT [FK_EMPLEADOPROYECTO_EMPLEADO]
GO
ALTER TABLE [dbo].[EMPLEADOPROYECTO]  WITH CHECK ADD  CONSTRAINT [FK_EMPLEADOPROYECTO_PROYECTO] FOREIGN KEY([PROYECTO_ID])
REFERENCES [dbo].[PROYECTO] ([ID_PROYECTO])
GO
ALTER TABLE [dbo].[EMPLEADOPROYECTO] CHECK CONSTRAINT [FK_EMPLEADOPROYECTO_PROYECTO]
GO
/****** Object:  StoredProcedure [dbo].[ActualizarDatosUsuario]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE   PROCEDURE [dbo].[ActualizarDatosUsuario]
@ID_EMPLEADO BIGINT,
@ID_TELEFONO1 BIGINT,
@TELEFONO1 NVARCHAR(22),
@ID_TELEFONO2 BIGINT,
@TELEFONO2 NVARCHAR(22),
@DIRRECCION NVARCHAR(600),
@FOTO VARBINARY(MAX),
@TIPO_FOTO NVARCHAR(50)
AS
BEGIN
    -- Actualizar TELEFONO 1 si el ID y el teléfono no son nulos
    IF @ID_TELEFONO1 IS NOT NULL AND @TELEFONO1 IS NOT NULL
    BEGIN
        UPDATE [dbo].[TELEFONO]
        SET [TELEFONO] = @TELEFONO1
        WHERE ID_TELEFONO = @ID_TELEFONO1
        AND EXISTS (
            SELECT 1
            FROM [dbo].[EMPLEADOTELEFONO] ET
            WHERE ET.EMPLEADO_ID = @ID_EMPLEADO
            AND ET.TELEFONO_ID = @ID_TELEFONO1
        );
    END;

    -- Actualizar TELEFONO 2 si el ID y el teléfono no son nulos
    IF @ID_TELEFONO2 IS NOT NULL AND @TELEFONO2 IS NOT NULL
    BEGIN
        UPDATE [dbo].[TELEFONO]
        SET [TELEFONO] = @TELEFONO2
        WHERE ID_TELEFONO = @ID_TELEFONO2
        AND EXISTS (
            SELECT 1
            FROM [dbo].[EMPLEADOTELEFONO] ET
            WHERE ET.EMPLEADO_ID = @ID_EMPLEADO
            AND ET.TELEFONO_ID = @ID_TELEFONO2
        );
    END;

    -- Actualizar DIRECCION si @DIRRECCION no es nulo
    IF @DIRRECCION IS NOT NULL
    BEGIN
        UPDATE [dbo].[DIRRECCION]
        SET [DIRRECION] = COALESCE(@DIRRECCION, [DIRRECION])
        WHERE ID_DIRECCION IN (
            SELECT ED.DIRRECION_ID
            FROM [dbo].[EMPLEADODIRRECCION] ED
            WHERE ED.EMPLEADO_ID = @ID_EMPLEADO
        );
    END;

    -- Actualizar FOTO y TIPO_FOTO, manteniendo los valores existentes si los nuevos son NULL
    UPDATE [dbo].[EMPLEADO]
    SET [FOTO] = COALESCE(@FOTO, [FOTO]),
        [TIPO_FOTO] = COALESCE(@TIPO_FOTO, [TIPO_FOTO])
    WHERE ID_EMPLEADO = @ID_EMPLEADO;
END
GO
/****** Object:  StoredProcedure [dbo].[ActualizarFlujoAprobacion]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE PROCEDURE [dbo].[ActualizarFlujoAprobacion] 

  @id_solicitud BIGINT,
  @id_empleado BIGINT,
  @RESPUESTA VARCHAR(1),
  @comentario VARCHAR(MAX)
AS 
BEGIN
  BEGIN TRY
    DECLARE @tipo_solicitud BIGINT
	DECLARE @id_solicitante BIGINT
	DECLARE @identificador_empleado BIGINT
	DECLARE @SECUENCIA INT
    SET @tipo_solicitud = (SELECT TIPOSOLICITUD_ID FROM SOLICITUD WHERE ID_SOLICITUD = @id_solicitud)
	SET @id_solicitante = (SELECT SOLICITANTE_ID FROM SOLICITUD WHERE ID_SOLICITUD = @id_solicitud)
	SET @SECUENCIA = (SELECT SECUENCIA FROM APROBACIONSOLICITUD WHERE SOLICITUD_ID=@id_solicitud AND  ENCARGADO_APROBACION_ID=@id_empleado)
	
	

    -- Actualizar la aprobación del empleado actual
    UPDATE APROBACIONSOLICITUD
    SET RESPUESTA_SOLICITUD = @RESPUESTA,
        COMENTARIO = @comentario , FECHA_APROBACIONSOLICITUD=GETDATE()
    WHERE SOLICITUD_ID = @id_solicitud 
     
	AND SECUENCIA=@SECUENCIA

    IF @RESPUESTA = 'R'
    BEGIN
      -- Rechazar toda la solicitud y las demás secuencias
      UPDATE APROBACIONSOLICITUD
      SET RESPUESTA_SOLICITUD = 'R'
      WHERE SOLICITUD_ID = @id_solicitud

      UPDATE SOLICITUD 
      SET ESTADO_SOLICITUD = 'R'
      WHERE ID_SOLICITUD = @id_solicitud

      -- Ejecutar la notificación de resultado de la solicitud

	  SELECT 'HAN SIDO RECHAZADAS'

	-- exec [dbo].[NotificacionResultadoSolicitud] @id_solicitud, @RESPUESTA,@id_empleado
      
    END
    ELSE IF @RESPUESTA = 'A'
    BEGIN
      -- Verificar si todas las secuencias están aprobadas
      DECLARE @total_secuencias INT
      DECLARE @aprobadas INT

      SELECT @total_secuencias = COUNT(*)
      FROM APROBACIONSOLICITUD
      WHERE SOLICITUD_ID = @id_solicitud

      SELECT @aprobadas = COUNT(*)
      FROM APROBACIONSOLICITUD
      WHERE SOLICITUD_ID = @id_solicitud
        AND RESPUESTA_SOLICITUD = 'A'

      IF @total_secuencias = @aprobadas
      BEGIN
        -- Actualizar el estado de la solicitud a aprobada
        UPDATE SOLICITUD
        SET ESTADO_SOLICITUD = 'A'
        WHERE ID_SOLICITUD = @id_solicitud

        -- Ejecutar la notificación de resultado de la solicitud

		SELECT 'TODAS LAS  SON APROBADAS'
  --       exec [dbo].[NotificacionResultadoSolicitud] @id_solicitud, @RESPUESTA,@id_empleado

        IF @tipo_solicitud IN (1, 2, 3)
        BEGIN
          -- Restar los días de vacaciones al empleado
          DECLARE @SOLICITANTE BIGINT
          DECLARE @DIAS INT

          SELECT @SOLICITANTE = SOLICITANTE_ID, @DIAS = DIAS
          FROM SOLICITUD
          WHERE ID_SOLICITUD = @id_solicitud

          UPDATE EMPLEADO 
          SET SALDO_VACACIONES = SALDO_VACACIONES - @DIAS
          WHERE ID_EMPLEADO = @SOLICITANTE
        END
        ELSE
        BEGIN
          -- Actualizar el horario laboral
          DECLARE @HORARIONUEVO BIGINT
          SET @HORARIONUEVO = (SELECT ID_HORARIOLABORAL FROM SOLICITUD WHERE ID_SOLICITUD = @id_solicitud)

          UPDATE EMPLEADO 
          SET HORARIOLABORAL_ID = @HORARIONUEVO 
          WHERE ID_EMPLEADO =  @id_solicitante
        END
      END

	  ELSE
      BEGIN

 --        exec [dbo].[NotificacionResultadoSolicitud] @id_solicitud, @RESPUESTA,@id_empleado

		 SELECT 'PARA APROBAR'

	  END
    END
  END TRY
  BEGIN CATCH
    INSERT INTO [dbo].[DB_ERRORES]
           ([UserName],
            [ErrorNumber],
            [ErrorState],
            [ErrorSeverity],
            [ErrorLine],
            [ErrorProcedure],
            [ErrorMessage],
            [ErrorDateTime])
        VALUES
          (SUSER_SNAME(),
           ERROR_NUMBER(),
           ERROR_STATE(),
           ERROR_SEVERITY(),
           ERROR_LINE(),
           ERROR_PROCEDURE(),
           ERROR_MESSAGE(),
           GETDATE());
 END CATCH
END
GO
/****** Object:  StoredProcedure [dbo].[AnnadirDireccion]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/23/2024
-- Description: A ade nueva direccion a empleado.
-- =============================================
CREATE PROCEDURE [dbo].[AnnadirDireccion]
(
    -- Add the parameters for the stored procedure here
    @ID_EMPLEADO BIGINT,
    @NUEVA_DIRECCION VARCHAR(600)
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here

        DECLARE @ID_DIRECCION BIGINT;

    BEGIN TRY
        BEGIN TRANSACTION;

        -- Insertar la nueva direcci n en la tabla DIRRECCION
        INSERT INTO [dbo].[DIRRECCION] ([DIRRECION])
        VALUES (@NUEVA_DIRECCION);

        -- Obtener el ID de la direcci n reci n insertada
        SET @ID_DIRECCION = SCOPE_IDENTITY();

        -- Asociar la nueva direcci n con el empleado en la tabla EMPLEADODIRRECCION
        INSERT INTO [dbo].[EMPLEADODIRRECCION] ([EMPLEADO_ID], [DIRRECION_ID])
        VALUES (@ID_EMPLEADO, @ID_DIRECCION);

        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH
        ROLLBACK TRANSACTION;
        -- Manejar el error
        DECLARE @ErrorMessage NVARCHAR(4000);
        DECLARE @ErrorSeverity INT;
        DECLARE @ErrorState INT;

        SELECT 
            @ErrorMessage = ERROR_MESSAGE(),
            @ErrorSeverity = ERROR_SEVERITY(),
            @ErrorState = ERROR_STATE();

        RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);
    END CATCH
END
GO
/****** Object:  StoredProcedure [dbo].[AnnadirTelefono]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/23/2024
-- Description: A ade nuevo telefono a empleado
-- =============================================
CREATE PROCEDURE [dbo].[AnnadirTelefono]
(
    -- Add the parameters for the stored procedure here
    @ID_EMPLEADO BIGINT,
    @NUEVO_TELEFONO VARCHAR(22)
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here

        DECLARE @ID_TELEFONO BIGINT;

    BEGIN TRY
        BEGIN TRANSACTION;

        -- Insertar el nuevo tel fono en la tabla TELEFONO
        INSERT INTO [dbo].[TELEFONO] ([TELEFONO])
        VALUES (@NUEVO_TELEFONO);

        -- Obtener el ID del tel fono reci n insertado
        SET @ID_TELEFONO = SCOPE_IDENTITY();

        -- Asociar el nuevo tel fono con el empleado en la tabla EMPLEADOTELEFONO
        INSERT INTO [dbo].[EMPLEADOTELEFONO] ([EMPLEADO_ID], [TELEFONO_ID])
        VALUES (@ID_EMPLEADO, @ID_TELEFONO);

        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH
        ROLLBACK TRANSACTION;
        -- Manejar el error
        DECLARE @ErrorMessage NVARCHAR(4000);
        DECLARE @ErrorSeverity INT;
        DECLARE @ErrorState INT;

        SELECT 
            @ErrorMessage = ERROR_MESSAGE(),
            @ErrorSeverity = ERROR_SEVERITY(),
            @ErrorState = ERROR_STATE();

        RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);
    END CATCH
END
GO
/****** Object:  StoredProcedure [dbo].[CambiarEstadoUsuarioAdmin]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      My Name
-- Create Date: 06/28/2024
-- Description: Cambia el estado de un empleado a su estado contrario).
-- =============================================
CREATE PROCEDURE [dbo].[CambiarEstadoUsuarioAdmin]
(
    -- Add the parameters for the stored procedure here
    @id_empleado bigint
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

	Declare @estado_actual bit;

	SET @estado_actual = (SELECT ESTADO FROM EMPLEADO WHERE ID_EMPLEADO = @id_empleado);

    -- Insert statements for procedure here
	IF @estado_actual = 0
	BEGIN
		UPDATE EMPLEADO
		SET ESTADO = 1
		WHERE ID_EMPLEADO = @id_empleado;
	END
	ELSE
	BEGIN
		UPDATE EMPLEADO
		SET ESTADO = 0
		WHERE ID_EMPLEADO = @id_empleado;
	END
END
GO
/****** Object:  StoredProcedure [dbo].[Consultar_DocumentoEmpleado]    Script Date: 20/7/2024 10:48:04 p. m. ******/

CREATE   PROCEDURE [dbo].[Consultar_DocumentoEmpleado]
@EMPLEADO_ID		BIGINT
AS
BEGIN

	SELECT [ID_EMPLEADODOCUMENTO],[NOMBRE_DOCUMENTO],[COMENTARIO],[DOCUMENTO],ED.[TIPODOCUMENTO_ID], TD.DESCRIPCION AS NOMBRE_TIPODOCUMENTO,[EMPLEADO_ID]
	FROM [dbo].[EMPLEADODOCUMENTO] ED
	INNER JOIN TIPODOCUMENTO TD ON ED.TIPODOCUMENTO_ID = TD.ID_TIPODOCUMENTO
	WHERE EMPLEADO_ID = @EMPLEADO_ID

END
GO
/****** Object:  StoredProcedure [dbo].[Consultar_TiposDocumento]    Script Date: 20/7/2024 10:48:04 p. m. ******/

CREATE   PROCEDURE [dbo].[Consultar_TiposDocumento]
AS
BEGIN
	SELECT [ID_TIPODOCUMENTO] 'value',[NOMBRE_TIPODOCUMENTO] 'text'
	FROM [dbo].[TIPODOCUMENTO]
END
GO
/****** Object:  StoredProcedure [dbo].[ConsultarDatosEmpleado]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE   PROCEDURE [dbo].[ConsultarDatosEmpleado] 
@CORREO NVARCHAR(255)
AS
BEGIN
    DECLARE @NOMBREROL NVARCHAR(300);
    DECLARE @IDROL     INT;

    -- Obtener el rol del empleado
    SELECT @NOMBREROL = r.[Name], @IDROL = r.Id
    FROM [dbo].[AspNetUsers] u
    JOIN [dbo].[AspNetUserRoles] ur ON u.[Id] = ur.[UserId]
    JOIN [dbo].[AspNetRoles] r ON ur.[RoleId] = r.[Id]
    WHERE u.[Email] = @CORREO;

    -- Consultar los detalles del empleado
    SELECT e.ID_EMPLEADO , E.[IDENTIFICACION], E.[NOMBRECOMPLETO], E.[FECHA_INGRESO],
           E.[FOTO], E.[TIPO_FOTO], E.[SALARIO], E.[SALDO_VACACIONES], CA.NOMBRE_CARGO AS CARGO, C.CORREO,
           E.[HORARIOLABORAL_ID], D.NOMBRE_DEPARTAMENTO AS DEPARTAMENTO, T.TELEFONO, DI.DIRRECION,
           @NOMBREROL AS NOMBREROL, @IDROL AS IDROL
    FROM [dbo].[EMPLEADO] E
    INNER JOIN CORREO C ON C.ID_CORREO = E.CORREO_ID
    INNER JOIN DEPARTAMENTO D ON E.DEPARTAMENTO_ID = D.ID_DEPARTAMENTO
    INNER JOIN CARGO CA ON E.CARGO_ID = CA.ID_CARGO
    INNER JOIN EMPLEADOTELEFONO ET ON ET.EMPLEADO_ID = E.ID_EMPLEADO
    INNER JOIN TELEFONO T ON T.ID_TELEFONO = ET.TELEFONO_ID
    INNER JOIN EMPLEADODIRRECCION ED ON ED.EMPLEADO_ID = E.ID_EMPLEADO
    INNER JOIN DIRRECCION DI ON DI.ID_DIRECCION = ED.DIRRECION_ID    
    WHERE C.CORREO = @CORREO;
END
GO
/****** Object:  StoredProcedure [dbo].[EditarDatosVistaAdmin]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/22/2024
-- Description: Modifica los datos desde la vista del administrador
-- =============================================
CREATE   PROCEDURE [dbo].[EditarDatosVistaAdmin]
(
    -- Add the parameters for the stored procedure here
    @ID_EMPLEADO BIGINT,
    @IDENTIFICACION INT,
    @NOMBRECOMPLETO VARCHAR(250),
    @SALARIO DECIMAL(10, 2),
    @FOTO VARBINARY(MAX),
    @CORREO_ID NVARCHAR(255),
    @CARGO_ID BIGINT,
    @HORARIOLABORAL_ID BIGINT,
    @DEPARTAMENTO_ID BIGINT,
    @ROL_ID BIGINT,
    @ID_TELEFONO1 BIGINT,
    @TELEFONO1 NVARCHAR(22),
    @ID_TELEFONO2 BIGINT,
    @TELEFONO2 NVARCHAR(22),
    @DIRRECCION NVARCHAR(600)
)
AS
BEGIN 
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    DECLARE @AspNetUserID_ACTUAL NVARCHAR(450);
	DECLARE @CORREOID Bigint;
 
    SET @AspNetUserID_ACTUAL = (SELECT AspNetUsers_ID FROM EMPLEADO WHERE ID_EMPLEADO = @ID_EMPLEADO);

    IF EXISTS (SELECT 1 FROM [dbo].[EMPLEADO] WHERE [ID_EMPLEADO] = @ID_EMPLEADO)
    BEGIN


        UPDATE [dbo].[EMPLEADO]
        SET 
            [IDENTIFICACION] = COALESCE(@IDENTIFICACION, [IDENTIFICACION]),
            [NOMBRECOMPLETO] = COALESCE(@NOMBRECOMPLETO, [NOMBRECOMPLETO]),
            [SALARIO] = COALESCE(@SALARIO, [SALARIO]),
            [FOTO] = COALESCE(@FOTO, [FOTO]),
            [CORREO_ID] = COALESCE(@CORREO_ID, [CORREO_ID]),
            [CARGO_ID] = COALESCE(@CARGO_ID, [CARGO_ID]),
            [HORARIOLABORAL_ID] = COALESCE(@HORARIOLABORAL_ID, [HORARIOLABORAL_ID]),
            [DEPARTAMENTO_ID] = COALESCE(@DEPARTAMENTO_ID, [DEPARTAMENTO_ID])
        WHERE [ID_EMPLEADO] = @ID_EMPLEADO;
 
        IF @ID_TELEFONO1 IS NOT NULL AND @TELEFONO1 IS NOT NULL
        BEGIN
            UPDATE [dbo].[TELEFONO]
            SET [TELEFONO] = COALESCE(@TELEFONO1, [TELEFONO])
            WHERE ID_TELEFONO = @ID_TELEFONO1
            AND EXISTS (
                SELECT 1
                FROM [dbo].[EMPLEADOTELEFONO] ET
                WHERE ET.EMPLEADO_ID = @ID_EMPLEADO
                AND ET.TELEFONO_ID = @ID_TELEFONO1
            );
        END;
 
        IF @ID_TELEFONO2 IS NOT NULL AND @TELEFONO2 IS NOT NULL
        BEGIN
            UPDATE [dbo].[TELEFONO]
            SET [TELEFONO] = COALESCE(@TELEFONO2, [TELEFONO])
            WHERE ID_TELEFONO = @ID_TELEFONO2
            AND EXISTS (
                SELECT 1
                FROM [dbo].[EMPLEADOTELEFONO] ET
                WHERE ET.EMPLEADO_ID = @ID_EMPLEADO
                AND ET.TELEFONO_ID = @ID_TELEFONO2
            );
        END;
 
        IF @DIRRECCION IS NOT NULL
        BEGIN
            UPDATE [dbo].[DIRRECCION]
            SET [DIRRECION] = COALESCE(@DIRRECCION, [DIRRECION])
            WHERE ID_DIRECCION IN (
                SELECT ED.DIRRECION_ID
                FROM [dbo].[EMPLEADODIRRECCION] ED
                WHERE ED.EMPLEADO_ID = @ID_EMPLEADO
            );
        END;
 
        IF @ROL_ID IS NOT NULL
        BEGIN
            UPDATE [dbo].[AspNetUserRoles]
            SET [RoleId] = @ROL_ID
            WHERE UserId = @AspNetUserID_ACTUAL;
        END;
    END
    ELSE
    BEGIN
        RAISERROR ('El empleado con ID %d no existe.', 16, 1, @ID_EMPLEADO);
    END
 
end
/****** Object:  StoredProcedure [dbo].[ModificarDireccion]    Script Date: 6/29/2024 4:38:57 PM ******/
SET ANSI_NULLS ON
GO
/****** Object:  StoredProcedure [dbo].[ModificarDireccion]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/23/2024
-- Description: Modifica direccion
-- =============================================
CREATE PROCEDURE [dbo].[ModificarDireccion]
(
    -- Add the parameters for the stored procedure here
    @ID_DIRECCION BIGINT,
    @NUEVA_DIRECCION VARCHAR(600)
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here

        -- Verificar si la direcci n existe
    IF EXISTS (SELECT 1 FROM [dbo].[DIRRECCION] WHERE [ID_DIRECCION] = @ID_DIRECCION)
    BEGIN
        -- Actualizar la direcci n
        UPDATE [dbo].[DIRRECCION]
        SET 
            [DIRRECION] = @NUEVA_DIRECCION
        WHERE 
            [ID_DIRECCION] = @ID_DIRECCION;
    END
    ELSE
    BEGIN
        -- Si la direcci n no existe, lanzar un error
        RAISERROR ('La direcci n con ID %d no existe.', 16, 1, @ID_DIRECCION);
    END
END
GO
/****** Object:  StoredProcedure [dbo].[ModificarTelefono]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/23/2024
-- Description: Modifica un telefono con el ID
-- =============================================
CREATE PROCEDURE [dbo].[ModificarTelefono]
(
    -- Add the parameters for the stored procedure here
    @ID_TELEFONO BIGINT,
    @NUEVO_TELEFONO VARCHAR(22)
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here

        -- Verificar si el tel fono existe
    IF EXISTS (SELECT 1 FROM [dbo].[TELEFONO] WHERE [ID_TELEFONO] = @ID_TELEFONO)
    BEGIN
        -- Actualizar el tel fono
        UPDATE [dbo].[TELEFONO]
        SET 
            [TELEFONO] = @NUEVO_TELEFONO
        WHERE 
            [ID_TELEFONO] = @ID_TELEFONO;
    END
    ELSE
    BEGIN
        -- Si el tel fono no existe, lanzar un error
        RAISERROR ('El tel fono con ID %d no existe.', 16, 1, @ID_TELEFONO);
    END
END
GO
/****** Object:  StoredProcedure [dbo].[MostrarEmpleadoVistaAdmin]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      WilsonArias
-- Create Date: 06/22/2024
-- Description: Muestra los datos de empleado especifico usando el ID para un administrador
-- =============================================
CREATE   PROCEDURE [dbo].[MostrarEmpleadoVistaAdmin]
(
    @ID_EMPLEADO bigint
)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT 
        e.IDENTIFICACION,
        e.ID_EMPLEADO,
        e.NOMBRECOMPLETO,
        e.SALARIO,
        e.FOTO,
        c.CORREO,
        ca.NOMBRE_CARGO AS CARGO,
		ca.ID_CARGO,
        hl.DESCRIPCION AS NOMBRE_HL,
		hl.ID_HORARIOLABORAL,
        d.NOMBRE_DEPARTAMENTO AS DEPARTAMENTO,
		d.ID_DEPARTAMENTO,
        -- Concatenar direcciones
        (SELECT dir.DIRRECION
         FROM EMPLEADODIRRECCION ed
         INNER JOIN DIRRECCION dir ON ed.DIRRECION_ID = dir.ID_DIRECCION
         WHERE ed.EMPLEADO_ID = e.ID_EMPLEADO) AS DIRRECION,
        
        CASE WHEN e.ESTADO = 1 THEN 'Activo' ELSE 'Inactivo' END AS ESTADO,
        -- Obtener el rol del usuario
        (SELECT r.Name
         FROM AspNetUserRoles ur
         INNER JOIN AspNetRoles r ON ur.RoleId = r.Id
         WHERE ur.UserId = e.AspNetUsers_ID) AS NOMBREROL
		 
    FROM EMPLEADO e
    LEFT JOIN CORREO c ON e.CORREO_ID = c.ID_CORREO
    LEFT JOIN CARGO ca ON e.CARGO_ID = ca.ID_CARGO
    LEFT JOIN HORARIOLABORAL hl ON e.HORARIOLABORAL_ID = hl.ID_HORARIOLABORAL
    LEFT JOIN DEPARTAMENTO d ON e.DEPARTAMENTO_ID = d.ID_DEPARTAMENTO
    WHERE e.ID_EMPLEADO = @ID_EMPLEADO;
END
GO
/****** Object:  StoredProcedure [dbo].[MostrarInfoVistaAdmin]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/22/2024
-- Description: Muestra todos los empleados para un administrador
-- =============================================
CREATE PROCEDURE [dbo].[MostrarInfoVistaAdmin]

    -- Add the parameters for the stored procedure here

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
    SELECT 
        e.ID_EMPLEADO,
        e.NOMBRECOMPLETO,
		        -- Obtener el rol del usuario
        (SELECT STRING_AGG(r.Name, ', ')
         FROM AspNetUserRoles ur
         INNER JOIN AspNetRoles r ON ur.RoleId = r.Id
         WHERE ur.UserId = e.AspNetUsers_ID) AS NOMBREROL,
		 d.NOMBRE_DEPARTAMENTO AS DEPARTAMENTO,
         ca.NOMBRE_CARGO AS CARGO,
		CASE WHEN e.ESTADO = 1 THEN 'Activo' ELSE 'Inactivo' END AS ESTADO
    FROM EMPLEADO e
    LEFT JOIN CARGO ca ON e.CARGO_ID = ca.ID_CARGO
    LEFT JOIN DEPARTAMENTO d ON e.DEPARTAMENTO_ID = d.ID_DEPARTAMENTO
END
GO
/****** Object:  StoredProcedure [dbo].[MostrarTodosCargos]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/28/2024
-- Description: Muestra todos los cargos del sistema.
-- =============================================
CREATE PROCEDURE [dbo].[MostrarTodosCargos]

    -- Add the parameters for the stored procedure here

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
    SELECT ID_CARGO, NOMBRE_CARGO AS CARGO
       FROM CARGO;
END
GO
/****** Object:  StoredProcedure [dbo].[MostrarTodosDepartamentos]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/28/2024
-- Description: Muestra todos los departamentos en el sistema.
-- =============================================
CREATE PROCEDURE [dbo].[MostrarTodosDepartamentos]

    -- Add the parameters for the stored procedure here

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
    SELECT ID_DEPARTAMENTO, NOMBRE_DEPARTAMENTO AS DEPARTAMENTO
       FROM DEPARTAMENTO;
END
GO
/****** Object:  StoredProcedure [dbo].[MostrarTodosHorarios]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/28/2024
-- Description: Muestra todos los horarios disponibles en el sistema.
-- =============================================
CREATE PROCEDURE [dbo].[MostrarTodosHorarios]

    -- Add the parameters for the stored procedure here

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
    SELECT ID_HORARIOLABORAL,
            CONCAT(NOMBREHL, ' - ', CONVERT(varchar(5), HORA_INGRESO, 108), ' hasta ', CONVERT(varchar(5), HORA_SALIDA, 108)) AS NOMBRE_HL
       FROM HORARIOLABORAL;
END
GO
/****** Object:  StoredProcedure [dbo].[MostrarTodosRoles]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/28/2024
-- Description: Muestra todos los roles disponibles.
-- =============================================
CREATE PROCEDURE [dbo].[MostrarTodosRoles]

    -- Add the parameters for the stored procedure here

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
    SELECT Id AS IDROL, Name AS NOMBREROL
       FROM AspNetRoles;
END
GO
/****** Object:  StoredProcedure [dbo].[NotificacionResultadoSolicitud]    Script Date: 20/7/2024 11:19:04 p. m. ******/



CREATE PROCEDURE [dbo].[NotificacionResultadoSolicitud]  
    @id_solicitud varchar(50),
	@Respuesta varchar(1),
	@ENCARGADO int
AS
BEGIN TRY
	SET NOCOUNT ON;	

	DECLARE	@Titule NVARCHAR(MAX),
			@Head NVARCHAR(MAX),
		    @Body NVARCHAR(MAX),
	        @MENSAJE_SOLICITUD NVARCHAR(MAX),
			@tipo_solicitud  VARCHAR(MAX),
			@Email_Usuario VARCHAR(MAX),
			@Descripcion_movimiento VARCHAR(MAX),
			@id_tipo_solicitud VARCHAR(MAX),
			@fecha_solicitud VARCHAR(MAX),
			@responsable_solicitud VARCHAR(MAX),
			@comentario_movimiento VARCHAR(MAX),
			@usuario_creador_solicitud VARCHAR(MAX),
			@Email_Usuario_aprobar VARCHAR(MAX),
			@id_responsable_solicitud VARCHAR(MAX),
			@horario_actual VARCHAR(MAX),
			@horario_nuevo VARCHAR(MAX),
			@footer VARCHAR(MAX),
			@fecha VARCHAR(MAX)

	DECLARE @Resultado INT,
			
			@TablePermiso   nvarchar(max),
			@TableAprobacion nvarchar(max),
		    @EncabezadoAprobacion  nvarchar(max),
			@INICIO_CORREO NVARCHAR(MAX),
		    @Encabezado_Correo NVARCHAR(MAX),
			@Alerta_Solicitud NVARCHAR(MAX),
			@Alerta_Aprobacion NVARCHAR(MAX),
			@MENSAJE_APROBACION  NVARCHAR(MAX),
			@APROBACION  NVARCHAR(MAX)
			
	
	
	

/****** Script to check for the next pending approval ******/


DECLARE @SECUENCIAACTUAL INT;
DECLARE @APROBACIONPENDIENTE INT;
DECLARE @CORREOAPROBAR VARCHAR(50);
DECLARE @ID_APROBADOR INT

SET @APROBACIONPENDIENTE =(SELECT 
    COUNT(*) AS PendingApprovals
FROM 
    [dbo].[APROBACIONSOLICITUD]
WHERE 
    SOLICITUD_ID = @id_solicitud
    AND RESPUESTA_SOLICITUD='P'
	)


IF(@RESPUESTA='A')
IF(@APROBACIONPENDIENTE>0)
BEGIN
set   @SECUENCIAACTUAL =(SELECT 
    SECUENCIA
FROM 
   [dbo].[APROBACIONSOLICITUD]
WHERE 
    SOLICITUD_ID = @id_solicitud AND ENCARGADO_APROBACION_ID=@ENCARGADO)
    
	

 SET @ID_APROBADOR=(SELECT 
    
    [ENCARGADO_APROBACION_ID]
   
FROM 
    [dbo].[APROBACIONSOLICITUD]
WHERE 
    SOLICITUD_ID = @id_solicitud
    AND SECUENCIA =@SECUENCIAACTUAL+1
    AND RESPUESTA_SOLICITUD='P')

	SET @CORREOAPROBAR=(select CO.CORREO FROM EMPLEADO EMPLE 
INNER JOIN CORREO CO ON EMPLE.CORREO_ID=CO.ID_CORREO
WHERE ID_EMPLEADO=@ID_APROBADOR)

select @ID_APROBADOR
select @CORREOAPROBAR

----Para la aprobacion

SELECT 'APROBACION'

 set @fecha=GETDATE()
	 SELECT @fecha
	SET @tipo_solicitud = (select tipo.NOMBRE_TIPO_SOLICITUD  from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on soli.TIPOSOLICITUD_ID=tipo.ID_TIPOSOLICITUD
  where soli.ID_SOLICITUD=@id_solicitud)
  SET @id_tipo_solicitud = (select tipo.ID_TIPOSOLICITUD  from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on soli.TIPOSOLICITUD_ID=tipo.ID_TIPOSOLICITUD
  where soli.ID_SOLICITUD=@id_solicitud)
	
	
	SET @fecha_solicitud = ( select  FECHA_SOLICITUD from SOLICITUD
   where ID_SOLICITUD= @id_solicitud )
	
    SET @Email_Usuario = ( select co.CORREO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   inner join CORREO  co on co.ID_CORREO=emple.CORREO_ID
   where soli.ID_SOLICITUD=@id_solicitud)
	SET @responsable_solicitud = ( select emple.NOMBRECOMPLETO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   where soli.ID_SOLICITUD=@id_solicitud)

   SET @id_responsable_solicitud = ( select emple.ID_EMPLEADO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   where soli.ID_SOLICITUD=@id_solicitud)

   set @Email_Usuario_aprobar=(select  co.CORREO from APROBACIONSOLICITUD apsoli

inner join EMPLEADO emple on apsoli.ENCARGADO_APROBACION_ID=emple.ID_EMPLEADO
inner join CORREO co on co.ID_CORREO=emple.CORREO_ID

where apsoli.SOLICITUD_ID=@id_solicitud and apsoli.SECUENCIA=1)

SET @horario_actual= (select hl.NOMBREHL from EMPLEADO empl
inner join HORARIOLABORAL hl on empl.HORARIOLABORAL_ID=hl.ID_HORARIOLABORAL
where empl.ID_EMPLEADO=@id_responsable_solicitud)

SET @horario_nuevo= (select hl.NOMBREHL from SOLICITUD soli
inner join HORARIOLABORAL hl on soli.ID_HORARIOLABORAL=hl.ID_HORARIOLABORAL
where soli.ID_SOLICITUD=@id_solicitud)

SELECT @id_tipo_solicitud


if(@id_tipo_solicitud=1 or @id_tipo_solicitud=2 or @id_tipo_solicitud=3)
begin
SET @INICIO_CORREO = 
		'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;padding:0;Margin:0">

		<head>
			<meta charset="UTF-8">
			<meta content="width=device-width, initial-scale=1" name="viewport">
			<meta name="x-apple-disable-message-reformatting">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta content="telephone=no" name="format-detection">
			<title>AMS</title>

			<style type="text/css">
				#outlook a {
					padding: 0;
				}
        
				.ExternalClass {
					width: 100%;
				}
        
				.ExternalClass,
				.ExternalClass p,
				.ExternalClass span,
				.ExternalClass font,
				.ExternalClass td,
				.ExternalClass div {
					line-height: 100%;
				}
        
				.es-button {
					mso-style-priority: 100!important;
					text-decoration: none!important;
				}
        
				a[x-apple-data-detectors] {
					color: inherit!important;
					text-decoration: none!important;
					font-size: inherit!important;
					font-family: inherit!important;
					font-weight: inherit!important;
					line-height: inherit!important;
				}
        
				.es-desk-hidden {
					display: none;
					float: left;
					overflow: hidden;
					width: 0;
					max-height: 0;
					line-height: 0;
					mso-hide: all;
				}
        
				[data-ogsb] .es-button {
					border-width: 0!important;
					padding: 10px 20px 10px 20px!important;
				}
        
				@media only screen and (max-width:600px) {
					p,
					ul li,
					ol li,
					a {
						line-height: 150%!important
					}
					h1,
					h2,
					h3,
					h1 a,
					h2 a,
					h3 a {
						line-height: 120%!important
					}
					h1 {
						font-size: 30px!important;
						text-align: center
					}
					h2 {
						font-size: 26px!important;
						text-align: center
					}
					h3 {
						font-size: 20px!important;
						text-align: center
					}
					.es-header-body h1 a,
					.es-content-body h1 a,
					.es-footer-body h1 a {
						font-size: 30px!important
					}
					.es-header-body h2 a,
					.es-content-body h2 a,
					.es-footer-body h2 a {
						font-size: 26px!important
					}
					.es-header-body h3 a,
					.es-content-body h3 a,
					.es-footer-body h3 a {
						font-size: 20px!important
					}
					.es-menu td a {
						font-size: 16px!important
					}
					.es-header-body p,
					.es-header-body ul li,
					.es-header-body ol li,
					.es-header-body a {
						font-size: 16px!important
					}
					.es-content-body p,
					.es-content-body ul li,
					.es-content-body ol li,
					.es-content-body a {
						font-size: 16px!important
					}
					.es-footer-body p,
					.es-footer-body ul li,
					.es-footer-body ol li,
					.es-footer-body a {
						font-size: 16px!important
					}
					.es-infoblock p,
					.es-infoblock ul li,
					.es-infoblock ol li,
					.es-infoblock a {
						font-size: 12px!important
					}
					*[class="gmail-fix"] {
						display: none!important
					}
					.es-m-txt-c,
					.es-m-txt-c h1,
					.es-m-txt-c h2,
					.es-m-txt-c h3 {
						text-align: center!important
					}
					.es-m-txt-r,
					.es-m-txt-r h1,
					.es-m-txt-r h2,
					.es-m-txt-r h3 {
						text-align: right!important
					}
					.es-m-txt-l,
					.es-m-txt-l h1,
					.es-m-txt-l h2,
					.es-m-txt-l h3 {
						text-align: left!important
					}
					.es-m-txt-r img,
					.es-m-txt-c img,
					.es-m-txt-l img {
						display: inline!important
					}
					.es-button-border {
						display: block!important
					}
					a.es-button,
					button.es-button {
						font-size: 20px!important;
						display: block!important;
						border-width: 10px 0px 10px 0px!important
					}
					.es-btn-fw {
						border-width: 10px 0px!important;
						text-align: center!important
					}
					.es-adaptive table,
					.es-btn-fw,
					.es-btn-fw-brdr,
					.es-left,
					.es-right {
						width: 100%!important
					}
					.es-content table,
					.es-header table,
					.es-footer table,
					.es-content,
					.es-footer,
					.es-header {
						width: 100%!important;
						max-width: 600px!important
					}
					.es-adapt-td {
						display: block!important;
						width: 100%!important
					}
					.adapt-img {
						width: 100%!important;
						height: auto!important
					}
					.es-m-p0 {
						padding: 0px!important
					}
					.es-m-p0r {
						padding-right: 0px!important
					}
					.es-m-p0l {
						padding-left: 0px!important
					}
					.es-m-p0t {
						padding-top: 0px!important
					}
					.es-m-p0b {
						padding-bottom: 0!important
					}
					.es-m-p20b {
						padding-bottom: 20px!important
					}
					.es-mobile-hidden,
					.es-hidden {
						display: none!important
					}
					tr.es-desk-hidden,
					td.es-desk-hidden,
					table.es-desk-hidden {
						width: auto!important;
						overflow: visible!important;
						float: none!important;
						max-height: inherit!important;
						line-height: inherit!important
					}
					tr.es-desk-hidden {
						display: table-row!important
					}
					table.es-desk-hidden {
						display: table!important
					}
					td.es-desk-menu-hidden {
						display: table-cell!important
					}
					.es-menu td {
						width: 1%!important
					}
					table.es-table-not-adapt,
					.esd-block-html table {
						width: auto!important
					}
					table.es-social {
						display: inline-block!important
					}
					table.es-social td {
						display: inline-block!important
					}
					.es-desk-hidden {
						display: table-row!important;
						width: auto!important;
						overflow: visible!important;
						max-height: inherit!important
					}
					.h-auto {
						height: auto!important
					}
				}
			</style>
		</head>

		<body style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:arial, ''helvetica neue'', helvetica, sans-serif;padding:0;Margin:0">
			<div class="es-wrapper-color" style="background-color:#E4E5E7">
				<table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;background-color:#E4E5E7">
					<tr style="border-collapse:collapse">
						<td valign="top" style="padding:0;Margin:0">
							<table class="es-header" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
								<tr style="border-collapse:collapse">
									<td align="center" style="padding:0;Margin:0">
										<table class="es-header-body" cellspacing="0" cellpadding="0" align="center" bgcolor="#094293" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#094293;width:600px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px">
													<table class="es-left" cellspacing="0" cellpadding="0" align="left" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left">
														<tr style="border-collapse:collapse">
															<td class="es-m-p0r es-m-p20b" valign="top" align="center" style="padding:0;Margin:0;width:178px">
																
															</td>
														</tr>
													</table>
													<table cellspacing="0" cellpadding="0" align="right" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td align="left" style="padding:0;Margin:0;width:362px">
																<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<td class="es-m-txt-c" align="right" style="padding:0;Margin:0;padding-top:15px;padding-bottom:20px">
																			<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#FFFFFF;font-size:14px">'+@fecha+'</p>
																		</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
																
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>'

	SET @Alerta_Solicitud = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
													<td align="center" style="padding:0;Margin:0;padding-top:20px;padding-left:40px;padding-right:40px">
														<h1 style="Margin:0;line-height:31px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:26px;font-style:normal;font-weight:normal;color:#333333">Detalles Solicitud</h1>
														<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><br></p>
													</td>
												</tr>
												
												
												
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>'

	SET @Encabezado_Correo = 
				'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ffffff;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;padding-top:15px;padding-left:20px;padding-right:20px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;padding-bottom:25px">
										<table cellspacing="0" cellpadding="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:560px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>N mero de solicitud: </strong> '+ @id_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Fecha solicitud : </strong> '+ @fecha +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Responsable de la solicitud: </strong> '+@responsable_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Tipo de Permiso: </strong> '+@tipo_solicitud+'</p>
															</td>
														</tr>

													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td style="padding:0;Margin:0;background-color:#ededed" bgcolor="#ededed" align="left">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
				<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:40px;padding-right:40px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:520px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
																<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333">Datos del Permiso:</h3>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td style="padding:0;Margin:0">
																<table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<th></th>
																	</tr>
																</table>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="center" style="padding:0;Margin:0;padding-top:10px;padding-bottom:10px">
																<table border="1" align="center" cellspacing="1" cellpadding="3" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;height:70px;width:500px" class="es-table">
																	<thead>
																		<tr style="border-collapse:collapse">
																			<th style="font-size:12px;text-align:center" scope="col">Permiso</th>
																			<th style="font-size:12px;text-align:center" scope="col">Fecha Inicio</th>
					  													    <th style="font-size:12px;text-align:center" scope="col">Fecha Final</th>
																			<th style="font-size:12px;text-align:center" scope="col">Dias</th>
																			<th style="font-size:12px;text-align:center" scope="col">Tipo Permiso</th>
																			<th style="font-size:12px;text-align:center" scope="col">Comentario</th>
																			<th style="font-size:12px;text-align:center" scope="col">Detalle</th>
																		</tr>
																	</thead>
																	<tr style="border-collapse:collapse">' 
	
	

	

	SET @TablePermiso = 
	(	select soli.ID_SOLICITUD AS [TD]	,  CONVERT(VARCHAR, soli.FECHA_INICIO, 103) AS [TD]	, convert (VARCHAR,  soli.FECHA_FINAL, 103) AS [TD]	,
   soli.DIAS AS [TD]	 ,  tipo.NOMBRE_TIPO_SOLICITUD AS [TD]	 , soli.COMENTARIO AS [TD]	, soli.DETALLE as [TD] from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on tipo.ID_TIPOSOLICITUD=soli.TIPOSOLICITUD_ID
  where soli.ID_SOLICITUD=@id_solicitud
		FOR XML RAW('tr'), ELEMENTS) + ' 
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333"><br></h3>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>' 

	
											
	SET @EncabezadoAprobacion = 
	'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
		<tr style="border-collapse:collapse">
			<td align="center" style="padding:0;Margin:0">
				<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
					<tr style="border-collapse:collapse">
						<td align="left" style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:40px;padding-right:40px">
							<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;width:520px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333">Aprobaciones:</h3>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td style="padding:0;Margin:0">
													<table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<th></th>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="center" style="padding:0;Margin:0;padding-top:10px;padding-bottom:10px">
													<table border="1" align="center" cellspacing="1" cellpadding="3" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;height:70px;width:500px" class="es-table">
														<thead>
															<tr style="border-collapse:collapse">
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Departamento</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Encargado</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Secuencia</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Estado</th>
															</tr>
														</thead>
														<tr style="border-collapse:collapse">'

	SET @TableAprobacion = 
		(SELECT DEPAP.DESCRIPCION AS [TD] ,EMPLE.NOMBRECOMPLETO AS [TD], APSOLI.SECUENCIA AS [TD],   CASE APSOLI.RESPUESTA_SOLICITUD
When 'P' Then 'PENDIENTE'
When 'A' Then 'APROBADO'
ELSE 'RECHAZADO' 
END  AS [TD] FROM APROBACIONSOLICITUD APSOLI
INNER JOIN EMPLEADO EMPLE ON APSOLI.ENCARGADO_APROBACION_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTOSUPERVISOR DEPASUP ON DEPASUP.EMPLEADO_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTO DEPAP ON DEPAP.ID_DEPARTAMENTO=DEPASUP.DEPARTAMENTO_ID

WHERE APSOLI.SOLICITUD_ID=@id_solicitud		

order by APSOLI.SECUENCIA ASC
		FOR XML RAW('tr'), ELEMENTS) + '
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333"><br></h3>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>'


	SET @APROBACION = '
						<tr>
                          <td>
                            <table cellpadding="0" cellspacing="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
                              <tr>
                                <td align="center" valign="top" style="padding:0;Margin:0;width:560px">
                                  <table cellpadding="0" cellspacing="0" width="100%" role="presentation" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
                                    <tr>
                                      <td align="center" style="padding:0;Margin:0;padding-top:15px;padding-bottom:15px">
                                        <span class="es-button-border" style="border-style:solid;color:#FFFFFF;border-color:#094293;background:#094293;border-width:4px;display:inline-block;border-radius:10px;width:auto">
										  
                                            Ingrese al m dulo Gesti n de Personal a consultar los detalles del registro del permiso
											
									    </span>
									  </td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
					'

	SET @footer = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table cellpadding="0" cellspacing="0" class="es-footer" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-footer-body" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;width:600px">
						<tr style="border-collapse:collapse">
							<td align="left" bgcolor="#094293" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;background-color:#094293">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
						</td>
					</tr>
				</table>
			</div>
		</body>
	</html> '


	
		
	
	    SET  @MENSAJE_APROBACION=	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								   @TablePermiso 	+  @EncabezadoAprobacion	+ @TableAprobacion		+@APROBACION+ @footer
 
	
	

			IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @CORREOAPROBAR,
					@subject = 'NOTIFICACION-PERMISO PARA APROBACION',
					@body =  @MENSAJE_APROBACION,
					@body_format = 'HTML';
			END

	select @responsable_solicitud
	select @MENSAJE_SOLICITUD
	select @Email_Usuario

    SET @Resultado = 1

end
else

begin

SET @INICIO_CORREO = 
		'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;padding:0;Margin:0">

		<head>
			<meta charset="UTF-8">
			<meta content="width=device-width, initial-scale=1" name="viewport">
			<meta name="x-apple-disable-message-reformatting">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta content="telephone=no" name="format-detection">
			<title>AMS</title>

			<style type="text/css">
				#outlook a {
					padding: 0;
				}
        
				.ExternalClass {
					width: 100%;
				}
        
				.ExternalClass,
				.ExternalClass p,
				.ExternalClass span,
				.ExternalClass font,
				.ExternalClass td,
				.ExternalClass div {
					line-height: 100%;
				}
        
				.es-button {
					mso-style-priority: 100!important;
					text-decoration: none!important;
				}
        
				a[x-apple-data-detectors] {
					color: inherit!important;
					text-decoration: none!important;
					font-size: inherit!important;
					font-family: inherit!important;
					font-weight: inherit!important;
					line-height: inherit!important;
				}
        
				.es-desk-hidden {
					display: none;
					float: left;
					overflow: hidden;
					width: 0;
					max-height: 0;
					line-height: 0;
					mso-hide: all;
				}
        
				[data-ogsb] .es-button {
					border-width: 0!important;
					padding: 10px 20px 10px 20px!important;
				}
        
				@media only screen and (max-width:600px) {
					p,
					ul li,
					ol li,
					a {
						line-height: 150%!important
					}
					h1,
					h2,
					h3,
					h1 a,
					h2 a,
					h3 a {
						line-height: 120%!important
					}
					h1 {
						font-size: 30px!important;
						text-align: center
					}
					h2 {
						font-size: 26px!important;
						text-align: center
					}
					h3 {
						font-size: 20px!important;
						text-align: center
					}
					.es-header-body h1 a,
					.es-content-body h1 a,
					.es-footer-body h1 a {
						font-size: 30px!important
					}
					.es-header-body h2 a,
					.es-content-body h2 a,
					.es-footer-body h2 a {
						font-size: 26px!important
					}
					.es-header-body h3 a,
					.es-content-body h3 a,
					.es-footer-body h3 a {
						font-size: 20px!important
					}
					.es-menu td a {
						font-size: 16px!important
					}
					.es-header-body p,
					.es-header-body ul li,
					.es-header-body ol li,
					.es-header-body a {
						font-size: 16px!important
					}
					.es-content-body p,
					.es-content-body ul li,
					.es-content-body ol li,
					.es-content-body a {
						font-size: 16px!important
					}
					.es-footer-body p,
					.es-footer-body ul li,
					.es-footer-body ol li,
					.es-footer-body a {
						font-size: 16px!important
					}
					.es-infoblock p,
					.es-infoblock ul li,
					.es-infoblock ol li,
					.es-infoblock a {
						font-size: 12px!important
					}
					*[class="gmail-fix"] {
						display: none!important
					}
					.es-m-txt-c,
					.es-m-txt-c h1,
					.es-m-txt-c h2,
					.es-m-txt-c h3 {
						text-align: center!important
					}
					.es-m-txt-r,
					.es-m-txt-r h1,
					.es-m-txt-r h2,
					.es-m-txt-r h3 {
						text-align: right!important
					}
					.es-m-txt-l,
					.es-m-txt-l h1,
					.es-m-txt-l h2,
					.es-m-txt-l h3 {
						text-align: left!important
					}
					.es-m-txt-r img,
					.es-m-txt-c img,
					.es-m-txt-l img {
						display: inline!important
					}
					.es-button-border {
						display: block!important
					}
					a.es-button,
					button.es-button {
						font-size: 20px!important;
						display: block!important;
						border-width: 10px 0px 10px 0px!important
					}
					.es-btn-fw {
						border-width: 10px 0px!important;
						text-align: center!important
					}
					.es-adaptive table,
					.es-btn-fw,
					.es-btn-fw-brdr,
					.es-left,
					.es-right {
						width: 100%!important
					}
					.es-content table,
					.es-header table,
					.es-footer table,
					.es-content,
					.es-footer,
					.es-header {
						width: 100%!important;
						max-width: 600px!important
					}
					.es-adapt-td {
						display: block!important;
						width: 100%!important
					}
					.adapt-img {
						width: 100%!important;
						height: auto!important
					}
					.es-m-p0 {
						padding: 0px!important
					}
					.es-m-p0r {
						padding-right: 0px!important
					}
					.es-m-p0l {
						padding-left: 0px!important
					}
					.es-m-p0t {
						padding-top: 0px!important
					}
					.es-m-p0b {
						padding-bottom: 0!important
					}
					.es-m-p20b {
						padding-bottom: 20px!important
					}
					.es-mobile-hidden,
					.es-hidden {
						display: none!important
					}
					tr.es-desk-hidden,
					td.es-desk-hidden,
					table.es-desk-hidden {
						width: auto!important;
						overflow: visible!important;
						float: none!important;
						max-height: inherit!important;
						line-height: inherit!important
					}
					tr.es-desk-hidden {
						display: table-row!important
					}
					table.es-desk-hidden {
						display: table!important
					}
					td.es-desk-menu-hidden {
						display: table-cell!important
					}
					.es-menu td {
						width: 1%!important
					}
					table.es-table-not-adapt,
					.esd-block-html table {
						width: auto!important
					}
					table.es-social {
						display: inline-block!important
					}
					table.es-social td {
						display: inline-block!important
					}
					.es-desk-hidden {
						display: table-row!important;
						width: auto!important;
						overflow: visible!important;
						max-height: inherit!important
					}
					.h-auto {
						height: auto!important
					}
				}
			</style>
		</head>

		<body style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:arial, ''helvetica neue'', helvetica, sans-serif;padding:0;Margin:0">
			<div class="es-wrapper-color" style="background-color:#E4E5E7">
				<table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;background-color:#E4E5E7">
					<tr style="border-collapse:collapse">
						<td valign="top" style="padding:0;Margin:0">
							<table class="es-header" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
								<tr style="border-collapse:collapse">
									<td align="center" style="padding:0;Margin:0">
										<table class="es-header-body" cellspacing="0" cellpadding="0" align="center" bgcolor="#094293" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#094293;width:600px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px">
													<table class="es-left" cellspacing="0" cellpadding="0" align="left" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left">
														<tr style="border-collapse:collapse">
															<td class="es-m-p0r es-m-p20b" valign="top" align="center" style="padding:0;Margin:0;width:178px">
																
															</td>
														</tr>
													</table>
													<table cellspacing="0" cellpadding="0" align="right" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td align="left" style="padding:0;Margin:0;width:362px">
																<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<td class="es-m-txt-c" align="right" style="padding:0;Margin:0;padding-top:15px;padding-bottom:20px">
																			<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#FFFFFF;font-size:14px">'+@fecha+'</p>
																		</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
																
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>'

	SET @Alerta_Solicitud = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
													<td align="center" style="padding:0;Margin:0;padding-top:20px;padding-left:40px;padding-right:40px">
														<h1 style="Margin:0;line-height:31px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:26px;font-style:normal;font-weight:normal;color:#333333">Detalles Solicitud</h1>
														<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><br></p>
													</td>
												</tr>
												
												
												
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>'

	SET @Encabezado_Correo = 
				'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ffffff;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;padding-top:15px;padding-left:20px;padding-right:20px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;padding-bottom:25px">
										<table cellspacing="0" cellpadding="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:560px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>N mero de solicitud: </strong> '+ @id_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Fecha solicitud : </strong> '+ @fecha +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Responsable de la solicitud: </strong> '+@responsable_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Tipo de Permiso: </strong> '+@tipo_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Horario Actual: </strong> '+@horario_actual+'</p>
															</td>
														</tr>

															<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Horario Nuevo: </strong> '+@horario_nuevo+'</p>
															</td>
														</tr>

													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td style="padding:0;Margin:0;background-color:#ededed" bgcolor="#ededed" align="left">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>'
											
	SET @EncabezadoAprobacion = 
	'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
		<tr style="border-collapse:collapse">
			<td align="center" style="padding:0;Margin:0">
				<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
					<tr style="border-collapse:collapse">
						<td align="left" style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:40px;padding-right:40px">
							<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;width:520px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333">Aprobaciones:</h3>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td style="padding:0;Margin:0">
													<table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<th></th>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="center" style="padding:0;Margin:0;padding-top:10px;padding-bottom:10px">
													<table border="1" align="center" cellspacing="1" cellpadding="3" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;height:70px;width:500px" class="es-table">
														<thead>
															<tr style="border-collapse:collapse">
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Departamento</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Encargado</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Secuencia</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Estado</th>
															</tr>
														</thead>
														<tr style="border-collapse:collapse">'

	SET @TableAprobacion = 
		(SELECT DEPAP.DESCRIPCION AS [TD] ,EMPLE.NOMBRECOMPLETO AS [TD], APSOLI.SECUENCIA AS [TD],   CASE APSOLI.RESPUESTA_SOLICITUD
When 'P' Then 'PENDIENTE'
When 'A' Then 'APROBADO'
ELSE 'RECHAZADO' 
END  AS [TD] FROM APROBACIONSOLICITUD APSOLI
INNER JOIN EMPLEADO EMPLE ON APSOLI.ENCARGADO_APROBACION_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTOSUPERVISOR DEPASUP ON DEPASUP.EMPLEADO_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTO DEPAP ON DEPAP.ID_DEPARTAMENTO=DEPASUP.DEPARTAMENTO_ID

WHERE APSOLI.SOLICITUD_ID=@id_solicitud		

order by APSOLI.SECUENCIA ASC
		FOR XML RAW('tr'), ELEMENTS) + '
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333"><br></h3>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>'


	SET @APROBACION = '
						<tr>
                          <td>
                            <table cellpadding="0" cellspacing="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
                              <tr>
                                <td align="center" valign="top" style="padding:0;Margin:0;width:560px">
                                  <table cellpadding="0" cellspacing="0" width="100%" role="presentation" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
                                    <tr>
                                      <td align="center" style="padding:0;Margin:0;padding-top:15px;padding-bottom:15px">
                                        <span class="es-button-border" style="border-style:solid;color:#FFFFFF;border-color:#094293;background:#094293;border-width:4px;display:inline-block;border-radius:10px;width:auto">
										  
                                            Ingrese al m dulo Gesti n de Personal a consultar los detalles del registro del permiso
											
									    </span>
									  </td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
					'

	SET @footer = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table cellpadding="0" cellspacing="0" class="es-footer" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-footer-body" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;width:600px">
						<tr style="border-collapse:collapse">
							<td align="left" bgcolor="#094293" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;background-color:#094293">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
						</td>
					</tr>
				</table>
			</div>
		</body>
	</html> '


	
		
	
	    SET  @MENSAJE_APROBACION=	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								 	+  @EncabezadoAprobacion	+ @TableAprobacion		+@APROBACION+ @footer
 

			IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @CORREOAPROBAR,
					@subject = 'NOTIFICACION-PERMISO PARA APROBACION',
					@body =  @MENSAJE_APROBACION,
					@body_format = 'HTML';
			END

	select @responsable_solicitud
	select @MENSAJE_SOLICITUD
	select @Email_Usuario

    SET @Resultado = 1

end

	

end

ELSE
BEGIN

SELECT 'APROBADO'
 set @fecha=GETDATE()
	 SELECT @fecha
	SET @tipo_solicitud = (select tipo.NOMBRE_TIPO_SOLICITUD  from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on soli.TIPOSOLICITUD_ID=tipo.ID_TIPOSOLICITUD
  where soli.ID_SOLICITUD=@id_solicitud)
  SET @id_tipo_solicitud = (select tipo.ID_TIPOSOLICITUD  from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on soli.TIPOSOLICITUD_ID=tipo.ID_TIPOSOLICITUD
  where soli.ID_SOLICITUD=@id_solicitud)
	
	
	SET @fecha_solicitud = ( select  FECHA_SOLICITUD from SOLICITUD
   where ID_SOLICITUD= @id_solicitud )
	
    SET @Email_Usuario = ( select co.CORREO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   inner join CORREO  co on co.ID_CORREO=emple.CORREO_ID
   where soli.ID_SOLICITUD=@id_solicitud)
	SET @responsable_solicitud = ( select emple.NOMBRECOMPLETO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   where soli.ID_SOLICITUD=@id_solicitud)

   SET @id_responsable_solicitud = ( select emple.ID_EMPLEADO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   where soli.ID_SOLICITUD=@id_solicitud)

   set @Email_Usuario_aprobar=(select  co.CORREO from APROBACIONSOLICITUD apsoli

inner join EMPLEADO emple on apsoli.ENCARGADO_APROBACION_ID=emple.ID_EMPLEADO
inner join CORREO co on co.ID_CORREO=emple.CORREO_ID

where apsoli.SOLICITUD_ID=@id_solicitud and apsoli.SECUENCIA=1)

SET @horario_actual= (select hl.NOMBREHL from EMPLEADO empl
inner join HORARIOLABORAL hl on empl.HORARIOLABORAL_ID=hl.ID_HORARIOLABORAL
where empl.ID_EMPLEADO=@id_responsable_solicitud)

SET @horario_nuevo= (select hl.NOMBREHL from SOLICITUD soli
inner join HORARIOLABORAL hl on soli.ID_HORARIOLABORAL=hl.ID_HORARIOLABORAL
where soli.ID_SOLICITUD=@id_solicitud)

SELECT @id_tipo_solicitud

if(@id_tipo_solicitud=1 or @id_tipo_solicitud=2 or @id_tipo_solicitud=3)
begin
SET @INICIO_CORREO = 
		'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;padding:0;Margin:0">

		<head>
			<meta charset="UTF-8">
			<meta content="width=device-width, initial-scale=1" name="viewport">
			<meta name="x-apple-disable-message-reformatting">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta content="telephone=no" name="format-detection">
			<title>AMS</title>

			<style type="text/css">
				#outlook a {
					padding: 0;
				}
        
				.ExternalClass {
					width: 100%;
				}
        
				.ExternalClass,
				.ExternalClass p,
				.ExternalClass span,
				.ExternalClass font,
				.ExternalClass td,
				.ExternalClass div {
					line-height: 100%;
				}
        
				.es-button {
					mso-style-priority: 100!important;
					text-decoration: none!important;
				}
        
				a[x-apple-data-detectors] {
					color: inherit!important;
					text-decoration: none!important;
					font-size: inherit!important;
					font-family: inherit!important;
					font-weight: inherit!important;
					line-height: inherit!important;
				}
        
				.es-desk-hidden {
					display: none;
					float: left;
					overflow: hidden;
					width: 0;
					max-height: 0;
					line-height: 0;
					mso-hide: all;
				}
        
				[data-ogsb] .es-button {
					border-width: 0!important;
					padding: 10px 20px 10px 20px!important;
				}
        
				@media only screen and (max-width:600px) {
					p,
					ul li,
					ol li,
					a {
						line-height: 150%!important
					}
					h1,
					h2,
					h3,
					h1 a,
					h2 a,
					h3 a {
						line-height: 120%!important
					}
					h1 {
						font-size: 30px!important;
						text-align: center
					}
					h2 {
						font-size: 26px!important;
						text-align: center
					}
					h3 {
						font-size: 20px!important;
						text-align: center
					}
					.es-header-body h1 a,
					.es-content-body h1 a,
					.es-footer-body h1 a {
						font-size: 30px!important
					}
					.es-header-body h2 a,
					.es-content-body h2 a,
					.es-footer-body h2 a {
						font-size: 26px!important
					}
					.es-header-body h3 a,
					.es-content-body h3 a,
					.es-footer-body h3 a {
						font-size: 20px!important
					}
					.es-menu td a {
						font-size: 16px!important
					}
					.es-header-body p,
					.es-header-body ul li,
					.es-header-body ol li,
					.es-header-body a {
						font-size: 16px!important
					}
					.es-content-body p,
					.es-content-body ul li,
					.es-content-body ol li,
					.es-content-body a {
						font-size: 16px!important
					}
					.es-footer-body p,
					.es-footer-body ul li,
					.es-footer-body ol li,
					.es-footer-body a {
						font-size: 16px!important
					}
					.es-infoblock p,
					.es-infoblock ul li,
					.es-infoblock ol li,
					.es-infoblock a {
						font-size: 12px!important
					}
					*[class="gmail-fix"] {
						display: none!important
					}
					.es-m-txt-c,
					.es-m-txt-c h1,
					.es-m-txt-c h2,
					.es-m-txt-c h3 {
						text-align: center!important
					}
					.es-m-txt-r,
					.es-m-txt-r h1,
					.es-m-txt-r h2,
					.es-m-txt-r h3 {
						text-align: right!important
					}
					.es-m-txt-l,
					.es-m-txt-l h1,
					.es-m-txt-l h2,
					.es-m-txt-l h3 {
						text-align: left!important
					}
					.es-m-txt-r img,
					.es-m-txt-c img,
					.es-m-txt-l img {
						display: inline!important
					}
					.es-button-border {
						display: block!important
					}
					a.es-button,
					button.es-button {
						font-size: 20px!important;
						display: block!important;
						border-width: 10px 0px 10px 0px!important
					}
					.es-btn-fw {
						border-width: 10px 0px!important;
						text-align: center!important
					}
					.es-adaptive table,
					.es-btn-fw,
					.es-btn-fw-brdr,
					.es-left,
					.es-right {
						width: 100%!important
					}
					.es-content table,
					.es-header table,
					.es-footer table,
					.es-content,
					.es-footer,
					.es-header {
						width: 100%!important;
						max-width: 600px!important
					}
					.es-adapt-td {
						display: block!important;
						width: 100%!important
					}
					.adapt-img {
						width: 100%!important;
						height: auto!important
					}
					.es-m-p0 {
						padding: 0px!important
					}
					.es-m-p0r {
						padding-right: 0px!important
					}
					.es-m-p0l {
						padding-left: 0px!important
					}
					.es-m-p0t {
						padding-top: 0px!important
					}
					.es-m-p0b {
						padding-bottom: 0!important
					}
					.es-m-p20b {
						padding-bottom: 20px!important
					}
					.es-mobile-hidden,
					.es-hidden {
						display: none!important
					}
					tr.es-desk-hidden,
					td.es-desk-hidden,
					table.es-desk-hidden {
						width: auto!important;
						overflow: visible!important;
						float: none!important;
						max-height: inherit!important;
						line-height: inherit!important
					}
					tr.es-desk-hidden {
						display: table-row!important
					}
					table.es-desk-hidden {
						display: table!important
					}
					td.es-desk-menu-hidden {
						display: table-cell!important
					}
					.es-menu td {
						width: 1%!important
					}
					table.es-table-not-adapt,
					.esd-block-html table {
						width: auto!important
					}
					table.es-social {
						display: inline-block!important
					}
					table.es-social td {
						display: inline-block!important
					}
					.es-desk-hidden {
						display: table-row!important;
						width: auto!important;
						overflow: visible!important;
						max-height: inherit!important
					}
					.h-auto {
						height: auto!important
					}
				}
			</style>
		</head>

		<body style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:arial, ''helvetica neue'', helvetica, sans-serif;padding:0;Margin:0">
			<div class="es-wrapper-color" style="background-color:#E4E5E7">
				<table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;background-color:#E4E5E7">
					<tr style="border-collapse:collapse">
						<td valign="top" style="padding:0;Margin:0">
							<table class="es-header" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
								<tr style="border-collapse:collapse">
									<td align="center" style="padding:0;Margin:0">
										<table class="es-header-body" cellspacing="0" cellpadding="0" align="center" bgcolor="#094293" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#094293;width:600px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px">
													<table class="es-left" cellspacing="0" cellpadding="0" align="left" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left">
														<tr style="border-collapse:collapse">
															<td class="es-m-p0r es-m-p20b" valign="top" align="center" style="padding:0;Margin:0;width:178px">
																
															</td>
														</tr>
													</table>
													<table cellspacing="0" cellpadding="0" align="right" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td align="left" style="padding:0;Margin:0;width:362px">
																<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<td class="es-m-txt-c" align="right" style="padding:0;Margin:0;padding-top:15px;padding-bottom:20px">
																			<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#FFFFFF;font-size:14px">'+@fecha+'</p>
																		</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
																
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>'

	SET @Alerta_Solicitud = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
													<td align="center" style="padding:0;Margin:0;padding-top:20px;padding-left:40px;padding-right:40px">
														<h1 style="Margin:0;line-height:31px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:26px;font-style:normal;font-weight:normal;color:#333333">Detalles Solicitud</h1>
														<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><br></p>
													</td>
												</tr>
												
												
												
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>'

	SET @Encabezado_Correo = 
				'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ffffff;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;padding-top:15px;padding-left:20px;padding-right:20px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;padding-bottom:25px">
										<table cellspacing="0" cellpadding="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:560px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>N mero de solicitud: </strong> '+ @id_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Fecha solicitud : </strong> '+ @fecha+'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Responsable de la solicitud: </strong> '+@responsable_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Tipo de Permiso: </strong> '+@tipo_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Respuesta: </strong> Su solicitud ha sido aprobada</p>
															</td>
														</tr>

													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td style="padding:0;Margin:0;background-color:#ededed" bgcolor="#ededed" align="left">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>'
				
	
	

	





	SET @footer = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table cellpadding="0" cellspacing="0" class="es-footer" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-footer-body" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;width:600px">
						<tr style="border-collapse:collapse">
							<td align="left" bgcolor="#094293" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;background-color:#094293">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
						</td>
					</tr>
				</table>
			</div>
		</body>
	</html> '


	
		
	
	    SET  @MENSAJE_APROBACION=	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								    @footer
 
	SELECT @MENSAJE_APROBACION
	SELECT @INICIO_CORREO
	SELECT @Alerta_Solicitud
	SELECT @Encabezado_Correo
	SELECT @footer
	

			IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @Email_Usuario,
					@subject = 'RESULTADO SOLICITUD',
					@body =  @MENSAJE_APROBACION,
					@body_format = 'HTML';
			END

	select @responsable_solicitud
	select @MENSAJE_SOLICITUD
	select @Email_Usuario

    SET @Resultado = 1

end
else

begin

SET @INICIO_CORREO = 
		'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;padding:0;Margin:0">

		<head>
			<meta charset="UTF-8">
			<meta content="width=device-width, initial-scale=1" name="viewport">
			<meta name="x-apple-disable-message-reformatting">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta content="telephone=no" name="format-detection">
			<title>AMS</title>

			<style type="text/css">
				#outlook a {
					padding: 0;
				}
        
				.ExternalClass {
					width: 100%;
				}
        
				.ExternalClass,
				.ExternalClass p,
				.ExternalClass span,
				.ExternalClass font,
				.ExternalClass td,
				.ExternalClass div {
					line-height: 100%;
				}
        
				.es-button {
					mso-style-priority: 100!important;
					text-decoration: none!important;
				}
        
				a[x-apple-data-detectors] {
					color: inherit!important;
					text-decoration: none!important;
					font-size: inherit!important;
					font-family: inherit!important;
					font-weight: inherit!important;
					line-height: inherit!important;
				}
        
				.es-desk-hidden {
					display: none;
					float: left;
					overflow: hidden;
					width: 0;
					max-height: 0;
					line-height: 0;
					mso-hide: all;
				}
        
				[data-ogsb] .es-button {
					border-width: 0!important;
					padding: 10px 20px 10px 20px!important;
				}
        
				@media only screen and (max-width:600px) {
					p,
					ul li,
					ol li,
					a {
						line-height: 150%!important
					}
					h1,
					h2,
					h3,
					h1 a,
					h2 a,
					h3 a {
						line-height: 120%!important
					}
					h1 {
						font-size: 30px!important;
						text-align: center
					}
					h2 {
						font-size: 26px!important;
						text-align: center
					}
					h3 {
						font-size: 20px!important;
						text-align: center
					}
					.es-header-body h1 a,
					.es-content-body h1 a,
					.es-footer-body h1 a {
						font-size: 30px!important
					}
					.es-header-body h2 a,
					.es-content-body h2 a,
					.es-footer-body h2 a {
						font-size: 26px!important
					}
					.es-header-body h3 a,
					.es-content-body h3 a,
					.es-footer-body h3 a {
						font-size: 20px!important
					}
					.es-menu td a {
						font-size: 16px!important
					}
					.es-header-body p,
					.es-header-body ul li,
					.es-header-body ol li,
					.es-header-body a {
						font-size: 16px!important
					}
					.es-content-body p,
					.es-content-body ul li,
					.es-content-body ol li,
					.es-content-body a {
						font-size: 16px!important
					}
					.es-footer-body p,
					.es-footer-body ul li,
					.es-footer-body ol li,
					.es-footer-body a {
						font-size: 16px!important
					}
					.es-infoblock p,
					.es-infoblock ul li,
					.es-infoblock ol li,
					.es-infoblock a {
						font-size: 12px!important
					}
					*[class="gmail-fix"] {
						display: none!important
					}
					.es-m-txt-c,
					.es-m-txt-c h1,
					.es-m-txt-c h2,
					.es-m-txt-c h3 {
						text-align: center!important
					}
					.es-m-txt-r,
					.es-m-txt-r h1,
					.es-m-txt-r h2,
					.es-m-txt-r h3 {
						text-align: right!important
					}
					.es-m-txt-l,
					.es-m-txt-l h1,
					.es-m-txt-l h2,
					.es-m-txt-l h3 {
						text-align: left!important
					}
					.es-m-txt-r img,
					.es-m-txt-c img,
					.es-m-txt-l img {
						display: inline!important
					}
					.es-button-border {
						display: block!important
					}
					a.es-button,
					button.es-button {
						font-size: 20px!important;
						display: block!important;
						border-width: 10px 0px 10px 0px!important
					}
					.es-btn-fw {
						border-width: 10px 0px!important;
						text-align: center!important
					}
					.es-adaptive table,
					.es-btn-fw,
					.es-btn-fw-brdr,
					.es-left,
					.es-right {
						width: 100%!important
					}
					.es-content table,
					.es-header table,
					.es-footer table,
					.es-content,
					.es-footer,
					.es-header {
						width: 100%!important;
						max-width: 600px!important
					}
					.es-adapt-td {
						display: block!important;
						width: 100%!important
					}
					.adapt-img {
						width: 100%!important;
						height: auto!important
					}
					.es-m-p0 {
						padding: 0px!important
					}
					.es-m-p0r {
						padding-right: 0px!important
					}
					.es-m-p0l {
						padding-left: 0px!important
					}
					.es-m-p0t {
						padding-top: 0px!important
					}
					.es-m-p0b {
						padding-bottom: 0!important
					}
					.es-m-p20b {
						padding-bottom: 20px!important
					}
					.es-mobile-hidden,
					.es-hidden {
						display: none!important
					}
					tr.es-desk-hidden,
					td.es-desk-hidden,
					table.es-desk-hidden {
						width: auto!important;
						overflow: visible!important;
						float: none!important;
						max-height: inherit!important;
						line-height: inherit!important
					}
					tr.es-desk-hidden {
						display: table-row!important
					}
					table.es-desk-hidden {
						display: table!important
					}
					td.es-desk-menu-hidden {
						display: table-cell!important
					}
					.es-menu td {
						width: 1%!important
					}
					table.es-table-not-adapt,
					.esd-block-html table {
						width: auto!important
					}
					table.es-social {
						display: inline-block!important
					}
					table.es-social td {
						display: inline-block!important
					}
					.es-desk-hidden {
						display: table-row!important;
						width: auto!important;
						overflow: visible!important;
						max-height: inherit!important
					}
					.h-auto {
						height: auto!important
					}
				}
			</style>
		</head>

		<body style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:arial, ''helvetica neue'', helvetica, sans-serif;padding:0;Margin:0">
			<div class="es-wrapper-color" style="background-color:#E4E5E7">
				<table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;background-color:#E4E5E7">
					<tr style="border-collapse:collapse">
						<td valign="top" style="padding:0;Margin:0">
							<table class="es-header" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
								<tr style="border-collapse:collapse">
									<td align="center" style="padding:0;Margin:0">
										<table class="es-header-body" cellspacing="0" cellpadding="0" align="center" bgcolor="#094293" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#094293;width:600px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px">
													<table class="es-left" cellspacing="0" cellpadding="0" align="left" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left">
														<tr style="border-collapse:collapse">
															<td class="es-m-p0r es-m-p20b" valign="top" align="center" style="padding:0;Margin:0;width:178px">
																
															</td>
														</tr>
													</table>
													<table cellspacing="0" cellpadding="0" align="right" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td align="left" style="padding:0;Margin:0;width:362px">
																<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<td class="es-m-txt-c" align="right" style="padding:0;Margin:0;padding-top:15px;padding-bottom:20px">
																			<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#FFFFFF;font-size:14px">'+GETDATE()+'</p>
																		</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
																
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>'

	SET @Alerta_Solicitud = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
													<td align="center" style="padding:0;Margin:0;padding-top:20px;padding-left:40px;padding-right:40px">
														<h1 style="Margin:0;line-height:31px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:26px;font-style:normal;font-weight:normal;color:#333333">Detalles Solicitud</h1>
														<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><br></p>
													</td>
												</tr>
												
												
												
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>'

	SET @Encabezado_Correo = 
				'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ffffff;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;padding-top:15px;padding-left:20px;padding-right:20px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;padding-bottom:25px">
										<table cellspacing="0" cellpadding="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:560px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>N mero de solicitud: </strong> '+ @id_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Fecha solicitud : </strong> '+ @fecha +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Responsable de la solicitud: </strong> '+@responsable_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Tipo de Permiso: </strong> '+@tipo_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Respuesta:</strong> Su solicitud ha sido aprobada</p>
															</td>
														</tr>

													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td style="padding:0;Margin:0;background-color:#ededed" bgcolor="#ededed" align="left">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>'

	SET @footer = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table cellpadding="0" cellspacing="0" class="es-footer" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-footer-body" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;width:600px">
						<tr style="border-collapse:collapse">
							<td align="left" bgcolor="#094293" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;background-color:#094293">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
						</td>
					</tr>
				</table>
			</div>
		</body>
	</html> '


	
		
	
	    SET  @MENSAJE_APROBACION=	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								 	 @footer
 

			IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @Email_Usuario,
					@subject = 'RESULTADO SOLICITUD',
					@body =  @MENSAJE_APROBACION,
					@body_format = 'HTML';
			END

	select @responsable_solicitud
	select @MENSAJE_SOLICITUD
	select @Email_Usuario

    SET @Resultado = 1

end


END
 
 

else
begin

Set @fecha=GETDATE()
	 SELECT @fecha
	SET @tipo_solicitud = (select tipo.NOMBRE_TIPO_SOLICITUD  from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on soli.TIPOSOLICITUD_ID=tipo.ID_TIPOSOLICITUD
  where soli.ID_SOLICITUD=@id_solicitud)
  SET @id_tipo_solicitud = (select tipo.ID_TIPOSOLICITUD  from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on soli.TIPOSOLICITUD_ID=tipo.ID_TIPOSOLICITUD
  where soli.ID_SOLICITUD=@id_solicitud)
	
	
	SET @fecha_solicitud = ( select  FECHA_SOLICITUD from SOLICITUD
   where ID_SOLICITUD= @id_solicitud )
	
    SET @Email_Usuario = ( select co.CORREO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   inner join CORREO  co on co.ID_CORREO=emple.CORREO_ID
   where soli.ID_SOLICITUD=@id_solicitud)
	SET @responsable_solicitud = ( select emple.NOMBRECOMPLETO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   where soli.ID_SOLICITUD=@id_solicitud)

   SET @id_responsable_solicitud = ( select emple.ID_EMPLEADO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   where soli.ID_SOLICITUD=@id_solicitud)

   set @Email_Usuario_aprobar=(select  co.CORREO from APROBACIONSOLICITUD apsoli

inner join EMPLEADO emple on apsoli.ENCARGADO_APROBACION_ID=emple.ID_EMPLEADO
inner join CORREO co on co.ID_CORREO=emple.CORREO_ID

where apsoli.SOLICITUD_ID=@id_solicitud and apsoli.SECUENCIA=1)

SET @horario_actual= (select hl.NOMBREHL from EMPLEADO empl
inner join HORARIOLABORAL hl on empl.HORARIOLABORAL_ID=hl.ID_HORARIOLABORAL
where empl.ID_EMPLEADO=@id_responsable_solicitud)

SET @horario_nuevo= (select hl.NOMBREHL from SOLICITUD soli
inner join HORARIOLABORAL hl on soli.ID_HORARIOLABORAL=hl.ID_HORARIOLABORAL
where soli.ID_SOLICITUD=@id_solicitud)

SELECT @id_tipo_solicitud

if(@id_tipo_solicitud=1 or @id_tipo_solicitud=2 or @id_tipo_solicitud=3)

begin
SET @INICIO_CORREO = 
		'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;padding:0;Margin:0">

		<head>
			<meta charset="UTF-8">
			<meta content="width=device-width, initial-scale=1" name="viewport">
			<meta name="x-apple-disable-message-reformatting">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta content="telephone=no" name="format-detection">
			<title>AMS</title>

			<style type="text/css">
				#outlook a {
					padding: 0;
				}
        
				.ExternalClass {
					width: 100%;
				}
        
				.ExternalClass,
				.ExternalClass p,
				.ExternalClass span,
				.ExternalClass font,
				.ExternalClass td,
				.ExternalClass div {
					line-height: 100%;
				}
        
				.es-button {
					mso-style-priority: 100!important;
					text-decoration: none!important;
				}
        
				a[x-apple-data-detectors] {
					color: inherit!important;
					text-decoration: none!important;
					font-size: inherit!important;
					font-family: inherit!important;
					font-weight: inherit!important;
					line-height: inherit!important;
				}
        
				.es-desk-hidden {
					display: none;
					float: left;
					overflow: hidden;
					width: 0;
					max-height: 0;
					line-height: 0;
					mso-hide: all;
				}
        
				[data-ogsb] .es-button {
					border-width: 0!important;
					padding: 10px 20px 10px 20px!important;
				}
        
				@media only screen and (max-width:600px) {
					p,
					ul li,
					ol li,
					a {
						line-height: 150%!important
					}
					h1,
					h2,
					h3,
					h1 a,
					h2 a,
					h3 a {
						line-height: 120%!important
					}
					h1 {
						font-size: 30px!important;
						text-align: center
					}
					h2 {
						font-size: 26px!important;
						text-align: center
					}
					h3 {
						font-size: 20px!important;
						text-align: center
					}
					.es-header-body h1 a,
					.es-content-body h1 a,
					.es-footer-body h1 a {
						font-size: 30px!important
					}
					.es-header-body h2 a,
					.es-content-body h2 a,
					.es-footer-body h2 a {
						font-size: 26px!important
					}
					.es-header-body h3 a,
					.es-content-body h3 a,
					.es-footer-body h3 a {
						font-size: 20px!important
					}
					.es-menu td a {
						font-size: 16px!important
					}
					.es-header-body p,
					.es-header-body ul li,
					.es-header-body ol li,
					.es-header-body a {
						font-size: 16px!important
					}
					.es-content-body p,
					.es-content-body ul li,
					.es-content-body ol li,
					.es-content-body a {
						font-size: 16px!important
					}
					.es-footer-body p,
					.es-footer-body ul li,
					.es-footer-body ol li,
					.es-footer-body a {
						font-size: 16px!important
					}
					.es-infoblock p,
					.es-infoblock ul li,
					.es-infoblock ol li,
					.es-infoblock a {
						font-size: 12px!important
					}
					*[class="gmail-fix"] {
						display: none!important
					}
					.es-m-txt-c,
					.es-m-txt-c h1,
					.es-m-txt-c h2,
					.es-m-txt-c h3 {
						text-align: center!important
					}
					.es-m-txt-r,
					.es-m-txt-r h1,
					.es-m-txt-r h2,
					.es-m-txt-r h3 {
						text-align: right!important
					}
					.es-m-txt-l,
					.es-m-txt-l h1,
					.es-m-txt-l h2,
					.es-m-txt-l h3 {
						text-align: left!important
					}
					.es-m-txt-r img,
					.es-m-txt-c img,
					.es-m-txt-l img {
						display: inline!important
					}
					.es-button-border {
						display: block!important
					}
					a.es-button,
					button.es-button {
						font-size: 20px!important;
						display: block!important;
						border-width: 10px 0px 10px 0px!important
					}
					.es-btn-fw {
						border-width: 10px 0px!important;
						text-align: center!important
					}
					.es-adaptive table,
					.es-btn-fw,
					.es-btn-fw-brdr,
					.es-left,
					.es-right {
						width: 100%!important
					}
					.es-content table,
					.es-header table,
					.es-footer table,
					.es-content,
					.es-footer,
					.es-header {
						width: 100%!important;
						max-width: 600px!important
					}
					.es-adapt-td {
						display: block!important;
						width: 100%!important
					}
					.adapt-img {
						width: 100%!important;
						height: auto!important
					}
					.es-m-p0 {
						padding: 0px!important
					}
					.es-m-p0r {
						padding-right: 0px!important
					}
					.es-m-p0l {
						padding-left: 0px!important
					}
					.es-m-p0t {
						padding-top: 0px!important
					}
					.es-m-p0b {
						padding-bottom: 0!important
					}
					.es-m-p20b {
						padding-bottom: 20px!important
					}
					.es-mobile-hidden,
					.es-hidden {
						display: none!important
					}
					tr.es-desk-hidden,
					td.es-desk-hidden,
					table.es-desk-hidden {
						width: auto!important;
						overflow: visible!important;
						float: none!important;
						max-height: inherit!important;
						line-height: inherit!important
					}
					tr.es-desk-hidden {
						display: table-row!important
					}
					table.es-desk-hidden {
						display: table!important
					}
					td.es-desk-menu-hidden {
						display: table-cell!important
					}
					.es-menu td {
						width: 1%!important
					}
					table.es-table-not-adapt,
					.esd-block-html table {
						width: auto!important
					}
					table.es-social {
						display: inline-block!important
					}
					table.es-social td {
						display: inline-block!important
					}
					.es-desk-hidden {
						display: table-row!important;
						width: auto!important;
						overflow: visible!important;
						max-height: inherit!important
					}
					.h-auto {
						height: auto!important
					}
				}
			</style>
		</head>

		<body style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:arial, ''helvetica neue'', helvetica, sans-serif;padding:0;Margin:0">
			<div class="es-wrapper-color" style="background-color:#E4E5E7">
				<table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;background-color:#E4E5E7">
					<tr style="border-collapse:collapse">
						<td valign="top" style="padding:0;Margin:0">
							<table class="es-header" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
								<tr style="border-collapse:collapse">
									<td align="center" style="padding:0;Margin:0">
										<table class="es-header-body" cellspacing="0" cellpadding="0" align="center" bgcolor="#094293" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#094293;width:600px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px">
													<table class="es-left" cellspacing="0" cellpadding="0" align="left" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left">
														<tr style="border-collapse:collapse">
															<td class="es-m-p0r es-m-p20b" valign="top" align="center" style="padding:0;Margin:0;width:178px">
																
															</td>
														</tr>
													</table>
													<table cellspacing="0" cellpadding="0" align="right" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td align="left" style="padding:0;Margin:0;width:362px">
																<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<td class="es-m-txt-c" align="right" style="padding:0;Margin:0;padding-top:15px;padding-bottom:20px">
																			<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#FFFFFF;font-size:14px">'+@fecha+'</p>
																		</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
																
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>'

	SET @Alerta_Solicitud = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
													<td align="center" style="padding:0;Margin:0;padding-top:20px;padding-left:40px;padding-right:40px">
														<h1 style="Margin:0;line-height:31px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:26px;font-style:normal;font-weight:normal;color:#333333">Detalles Solicitud</h1>
														<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><br></p>
													</td>
												</tr>
												
												
												
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>'

	SET @Encabezado_Correo = 
				'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ffffff;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;padding-top:15px;padding-left:20px;padding-right:20px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;padding-bottom:25px">
										<table cellspacing="0" cellpadding="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:560px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>N mero de solicitud: </strong> '+ @id_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Fecha solicitud : </strong> '+ @fecha+'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Responsable de la solicitud: </strong> '+@responsable_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Tipo de Permiso: </strong> '+@tipo_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Respuesta: </strong> Su solicitud ha sido rechazada</p>
															</td>
														</tr>

													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td style="padding:0;Margin:0;background-color:#ededed" bgcolor="#ededed" align="left">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>'
				
	
	

	





	SET @footer = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table cellpadding="0" cellspacing="0" class="es-footer" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-footer-body" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;width:600px">
						<tr style="border-collapse:collapse">
							<td align="left" bgcolor="#094293" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;background-color:#094293">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
						</td>
					</tr>
				</table>
			</div>
		</body>
	</html> '


	
		
	
	    SET  @MENSAJE_APROBACION=	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								    @footer
 
	
	

			IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @Email_Usuario,
					@subject = 'RESULTADO SOLICITUD',
					@body =  @MENSAJE_APROBACION,
					@body_format = 'HTML';
			END

	select @responsable_solicitud
	select @MENSAJE_SOLICITUD
	select @Email_Usuario

    SET @Resultado = 1

end
else

begin

SET @INICIO_CORREO = 
		'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;padding:0;Margin:0">

		<head>
			<meta charset="UTF-8">
			<meta content="width=device-width, initial-scale=1" name="viewport">
			<meta name="x-apple-disable-message-reformatting">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta content="telephone=no" name="format-detection">
			<title>AMS</title>

			<style type="text/css">
				#outlook a {
					padding: 0;
				}
        
				.ExternalClass {
					width: 100%;
				}
        
				.ExternalClass,
				.ExternalClass p,
				.ExternalClass span,
				.ExternalClass font,
				.ExternalClass td,
				.ExternalClass div {
					line-height: 100%;
				}
        
				.es-button {
					mso-style-priority: 100!important;
					text-decoration: none!important;
				}
        
				a[x-apple-data-detectors] {
					color: inherit!important;
					text-decoration: none!important;
					font-size: inherit!important;
					font-family: inherit!important;
					font-weight: inherit!important;
					line-height: inherit!important;
				}
        
				.es-desk-hidden {
					display: none;
					float: left;
					overflow: hidden;
					width: 0;
					max-height: 0;
					line-height: 0;
					mso-hide: all;
				}
        
				[data-ogsb] .es-button {
					border-width: 0!important;
					padding: 10px 20px 10px 20px!important;
				}
        
				@media only screen and (max-width:600px) {
					p,
					ul li,
					ol li,
					a {
						line-height: 150%!important
					}
					h1,
					h2,
					h3,
					h1 a,
					h2 a,
					h3 a {
						line-height: 120%!important
					}
					h1 {
						font-size: 30px!important;
						text-align: center
					}
					h2 {
						font-size: 26px!important;
						text-align: center
					}
					h3 {
						font-size: 20px!important;
						text-align: center
					}
					.es-header-body h1 a,
					.es-content-body h1 a,
					.es-footer-body h1 a {
						font-size: 30px!important
					}
					.es-header-body h2 a,
					.es-content-body h2 a,
					.es-footer-body h2 a {
						font-size: 26px!important
					}
					.es-header-body h3 a,
					.es-content-body h3 a,
					.es-footer-body h3 a {
						font-size: 20px!important
					}
					.es-menu td a {
						font-size: 16px!important
					}
					.es-header-body p,
					.es-header-body ul li,
					.es-header-body ol li,
					.es-header-body a {
						font-size: 16px!important
					}
					.es-content-body p,
					.es-content-body ul li,
					.es-content-body ol li,
					.es-content-body a {
						font-size: 16px!important
					}
					.es-footer-body p,
					.es-footer-body ul li,
					.es-footer-body ol li,
					.es-footer-body a {
						font-size: 16px!important
					}
					.es-infoblock p,
					.es-infoblock ul li,
					.es-infoblock ol li,
					.es-infoblock a {
						font-size: 12px!important
					}
					*[class="gmail-fix"] {
						display: none!important
					}
					.es-m-txt-c,
					.es-m-txt-c h1,
					.es-m-txt-c h2,
					.es-m-txt-c h3 {
						text-align: center!important
					}
					.es-m-txt-r,
					.es-m-txt-r h1,
					.es-m-txt-r h2,
					.es-m-txt-r h3 {
						text-align: right!important
					}
					.es-m-txt-l,
					.es-m-txt-l h1,
					.es-m-txt-l h2,
					.es-m-txt-l h3 {
						text-align: left!important
					}
					.es-m-txt-r img,
					.es-m-txt-c img,
					.es-m-txt-l img {
						display: inline!important
					}
					.es-button-border {
						display: block!important
					}
					a.es-button,
					button.es-button {
						font-size: 20px!important;
						display: block!important;
						border-width: 10px 0px 10px 0px!important
					}
					.es-btn-fw {
						border-width: 10px 0px!important;
						text-align: center!important
					}
					.es-adaptive table,
					.es-btn-fw,
					.es-btn-fw-brdr,
					.es-left,
					.es-right {
						width: 100%!important
					}
					.es-content table,
					.es-header table,
					.es-footer table,
					.es-content,
					.es-footer,
					.es-header {
						width: 100%!important;
						max-width: 600px!important
					}
					.es-adapt-td {
						display: block!important;
						width: 100%!important
					}
					.adapt-img {
						width: 100%!important;
						height: auto!important
					}
					.es-m-p0 {
						padding: 0px!important
					}
					.es-m-p0r {
						padding-right: 0px!important
					}
					.es-m-p0l {
						padding-left: 0px!important
					}
					.es-m-p0t {
						padding-top: 0px!important
					}
					.es-m-p0b {
						padding-bottom: 0!important
					}
					.es-m-p20b {
						padding-bottom: 20px!important
					}
					.es-mobile-hidden,
					.es-hidden {
						display: none!important
					}
					tr.es-desk-hidden,
					td.es-desk-hidden,
					table.es-desk-hidden {
						width: auto!important;
						overflow: visible!important;
						float: none!important;
						max-height: inherit!important;
						line-height: inherit!important
					}
					tr.es-desk-hidden {
						display: table-row!important
					}
					table.es-desk-hidden {
						display: table!important
					}
					td.es-desk-menu-hidden {
						display: table-cell!important
					}
					.es-menu td {
						width: 1%!important
					}
					table.es-table-not-adapt,
					.esd-block-html table {
						width: auto!important
					}
					table.es-social {
						display: inline-block!important
					}
					table.es-social td {
						display: inline-block!important
					}
					.es-desk-hidden {
						display: table-row!important;
						width: auto!important;
						overflow: visible!important;
						max-height: inherit!important
					}
					.h-auto {
						height: auto!important
					}
				}
			</style>
		</head>

		<body style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:arial, ''helvetica neue'', helvetica, sans-serif;padding:0;Margin:0">
			<div class="es-wrapper-color" style="background-color:#E4E5E7">
				<table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;background-color:#E4E5E7">
					<tr style="border-collapse:collapse">
						<td valign="top" style="padding:0;Margin:0">
							<table class="es-header" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
								<tr style="border-collapse:collapse">
									<td align="center" style="padding:0;Margin:0">
										<table class="es-header-body" cellspacing="0" cellpadding="0" align="center" bgcolor="#094293" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#094293;width:600px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px">
													<table class="es-left" cellspacing="0" cellpadding="0" align="left" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left">
														<tr style="border-collapse:collapse">
															<td class="es-m-p0r es-m-p20b" valign="top" align="center" style="padding:0;Margin:0;width:178px">
																
															</td>
														</tr>
													</table>
													<table cellspacing="0" cellpadding="0" align="right" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td align="left" style="padding:0;Margin:0;width:362px">
																<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<td class="es-m-txt-c" align="right" style="padding:0;Margin:0;padding-top:15px;padding-bottom:20px">
																			<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#FFFFFF;font-size:14px">'+GETDATE()+'</p>
																		</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
																
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>'

	SET @Alerta_Solicitud = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
													<td align="center" style="padding:0;Margin:0;padding-top:20px;padding-left:40px;padding-right:40px">
														<h1 style="Margin:0;line-height:31px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:26px;font-style:normal;font-weight:normal;color:#333333">Detalles Solicitud</h1>
														<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><br></p>
													</td>
												</tr>
												
												
												
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>'

	SET @Encabezado_Correo = 
				'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ffffff;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;padding-top:15px;padding-left:20px;padding-right:20px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;padding-bottom:25px">
										<table cellspacing="0" cellpadding="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:560px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>N mero de solicitud: </strong> '+ @id_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Fecha solicitud : </strong> '+ @fecha +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Responsable de la solicitud: </strong> '+@responsable_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Tipo de Permiso: </strong> '+@tipo_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Respuesta:</strong> Su solicitud ha sido rechazada</p>
															</td>
														</tr>

													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td style="padding:0;Margin:0;background-color:#ededed" bgcolor="#ededed" align="left">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>'

	SET @footer = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table cellpadding="0" cellspacing="0" class="es-footer" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-footer-body" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;width:600px">
						<tr style="border-collapse:collapse">
							<td align="left" bgcolor="#094293" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;background-color:#094293">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
						</td>
					</tr>
				</table>
			</div>
		</body>
	</html> '


	
		
	
	    SET  @MENSAJE_APROBACION=	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								 	 @footer
 

			IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @Email_Usuario,
					@subject = 'RESULTADO SOLICITUD',
					@body =  @MENSAJE_APROBACION,
					@body_format = 'HTML';
			END

	select @responsable_solicitud
	select @MENSAJE_SOLICITUD
	select @Email_Usuario

    SET @Resultado = 1

end


end






	
	
	
	
END TRY
BEGIN CATCH
	
  INSERT INTO [dbo].[DB_ERRORES]
           ([UserName]
           ,[ErrorNumber]
           ,[ErrorState]
           ,[ErrorSeverity]
           ,[ErrorLine]
           ,[ErrorProcedure]
           ,[ErrorMessage]
           ,[ErrorDateTime])

    VALUES
  (SUSER_SNAME(),
   ERROR_NUMBER(),
   ERROR_STATE(),
   ERROR_SEVERITY(),
   ERROR_LINE(),
   ERROR_PROCEDURE(),
   ERROR_MESSAGE(),
   GETDATE());
END CATCH
GO
/****** Object:  StoredProcedure [dbo].[NotificacionSolicitud]    Script Date: 20/7/2024 11:19:04 p. m. ******/



CREATE PROCEDURE [dbo].[NotificacionSolicitud] 

@id_solicitud VARCHAR(50)
AS
BEGIN TRY
	SET NOCOUNT ON;	

	DECLARE	@Titule NVARCHAR(MAX),
			@Head NVARCHAR(MAX),
		    @Body NVARCHAR(MAX),
	        @MENSAJE_SOLICITUD NVARCHAR(MAX),
			@tipo_solicitud  VARCHAR(MAX),
			@Email_Usuario VARCHAR(MAX),
			@Descripcion_movimiento VARCHAR(MAX),
			@id_tipo_solicitud VARCHAR(MAX),
			@fecha_solicitud VARCHAR(MAX),
			@responsable_solicitud VARCHAR(MAX),
			@comentario_movimiento VARCHAR(MAX),
			@usuario_creador_solicitud VARCHAR(MAX),
			@Email_Usuario_aprobar VARCHAR(MAX),
			@id_responsable_solicitud VARCHAR(MAX),
			@horario_actual VARCHAR(MAX),
			@horario_nuevo VARCHAR(MAX),
			@footer VARCHAR(MAX)		

	DECLARE @Resultado INT,
			
			@TablePermiso   nvarchar(max),
			@TableAprobacion nvarchar(max),
		    @EncabezadoAprobacion  nvarchar(max),
			@INICIO_CORREO NVARCHAR(MAX),
		    @Encabezado_Correo NVARCHAR(MAX),
			@Alerta_Solicitud NVARCHAR(MAX),
			@Alerta_Aprobacion NVARCHAR(MAX),
			@MENSAJE_APROBACION  NVARCHAR(MAX),
			@APROBACION  NVARCHAR(MAX)
			
	
	

	SET @tipo_solicitud = (select tipo.NOMBRE_TIPO_SOLICITUD  from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on soli.TIPOSOLICITUD_ID=tipo.ID_TIPOSOLICITUD
  where soli.ID_SOLICITUD=@id_solicitud)
  SET @id_tipo_solicitud = (select tipo.ID_TIPOSOLICITUD  from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on soli.TIPOSOLICITUD_ID=tipo.ID_TIPOSOLICITUD
  where soli.ID_SOLICITUD=@id_solicitud)
	
	
	SET @fecha_solicitud = ( select  FECHA_SOLICITUD from SOLICITUD
   where ID_SOLICITUD= @id_solicitud )
	
    SET @Email_Usuario = ( select co.CORREO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   inner join CORREO  co on co.ID_CORREO=emple.CORREO_ID
   where soli.ID_SOLICITUD=@id_solicitud)
	SET @responsable_solicitud = ( select emple.NOMBRECOMPLETO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   where soli.ID_SOLICITUD=@id_solicitud)

   SET @id_responsable_solicitud = ( select emple.ID_EMPLEADO from SOLICITUD soli
   inner join empleado emple on emple.ID_EMPLEADO=soli.SOLICITANTE_ID
   where soli.ID_SOLICITUD=@id_solicitud)

   set @Email_Usuario_aprobar=(select  co.CORREO from APROBACIONSOLICITUD apsoli

inner join EMPLEADO emple on apsoli.ENCARGADO_APROBACION_ID=emple.ID_EMPLEADO
inner join CORREO co on co.ID_CORREO=emple.CORREO_ID

where apsoli.SOLICITUD_ID=@id_solicitud and apsoli.SECUENCIA=1)

SET @horario_actual= (select hl.NOMBREHL from EMPLEADO empl
inner join HORARIOLABORAL hl on empl.HORARIOLABORAL_ID=hl.ID_HORARIOLABORAL
where empl.ID_EMPLEADO=@id_responsable_solicitud)

SET @horario_nuevo= (select hl.NOMBREHL from SOLICITUD soli
inner join HORARIOLABORAL hl on soli.ID_HORARIOLABORAL=hl.ID_HORARIOLABORAL
where soli.ID_SOLICITUD=@id_solicitud)


---TIPO DE PERMISO VACACIONES/INCAPACIDADES/PERMISOS ESPECIALES)

if(@id_tipo_solicitud=1 or @id_tipo_solicitud=2 or @id_tipo_solicitud=3)
begin
SET @INICIO_CORREO = 
		'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;padding:0;Margin:0">

		<head>
			<meta charset="UTF-8">
			<meta content="width=device-width, initial-scale=1" name="viewport">
			<meta name="x-apple-disable-message-reformatting">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta content="telephone=no" name="format-detection">
			<title>AMS</title>

			<style type="text/css">
				#outlook a {
					padding: 0;
				}
        
				.ExternalClass {
					width: 100%;
				}
        
				.ExternalClass,
				.ExternalClass p,
				.ExternalClass span,
				.ExternalClass font,
				.ExternalClass td,
				.ExternalClass div {
					line-height: 100%;
				}
        
				.es-button {
					mso-style-priority: 100!important;
					text-decoration: none!important;
				}
        
				a[x-apple-data-detectors] {
					color: inherit!important;
					text-decoration: none!important;
					font-size: inherit!important;
					font-family: inherit!important;
					font-weight: inherit!important;
					line-height: inherit!important;
				}
        
				.es-desk-hidden {
					display: none;
					float: left;
					overflow: hidden;
					width: 0;
					max-height: 0;
					line-height: 0;
					mso-hide: all;
				}
        
				[data-ogsb] .es-button {
					border-width: 0!important;
					padding: 10px 20px 10px 20px!important;
				}
        
				@media only screen and (max-width:600px) {
					p,
					ul li,
					ol li,
					a {
						line-height: 150%!important
					}
					h1,
					h2,
					h3,
					h1 a,
					h2 a,
					h3 a {
						line-height: 120%!important
					}
					h1 {
						font-size: 30px!important;
						text-align: center
					}
					h2 {
						font-size: 26px!important;
						text-align: center
					}
					h3 {
						font-size: 20px!important;
						text-align: center
					}
					.es-header-body h1 a,
					.es-content-body h1 a,
					.es-footer-body h1 a {
						font-size: 30px!important
					}
					.es-header-body h2 a,
					.es-content-body h2 a,
					.es-footer-body h2 a {
						font-size: 26px!important
					}
					.es-header-body h3 a,
					.es-content-body h3 a,
					.es-footer-body h3 a {
						font-size: 20px!important
					}
					.es-menu td a {
						font-size: 16px!important
					}
					.es-header-body p,
					.es-header-body ul li,
					.es-header-body ol li,
					.es-header-body a {
						font-size: 16px!important
					}
					.es-content-body p,
					.es-content-body ul li,
					.es-content-body ol li,
					.es-content-body a {
						font-size: 16px!important
					}
					.es-footer-body p,
					.es-footer-body ul li,
					.es-footer-body ol li,
					.es-footer-body a {
						font-size: 16px!important
					}
					.es-infoblock p,
					.es-infoblock ul li,
					.es-infoblock ol li,
					.es-infoblock a {
						font-size: 12px!important
					}
					*[class="gmail-fix"] {
						display: none!important
					}
					.es-m-txt-c,
					.es-m-txt-c h1,
					.es-m-txt-c h2,
					.es-m-txt-c h3 {
						text-align: center!important
					}
					.es-m-txt-r,
					.es-m-txt-r h1,
					.es-m-txt-r h2,
					.es-m-txt-r h3 {
						text-align: right!important
					}
					.es-m-txt-l,
					.es-m-txt-l h1,
					.es-m-txt-l h2,
					.es-m-txt-l h3 {
						text-align: left!important
					}
					.es-m-txt-r img,
					.es-m-txt-c img,
					.es-m-txt-l img {
						display: inline!important
					}
					.es-button-border {
						display: block!important
					}
					a.es-button,
					button.es-button {
						font-size: 20px!important;
						display: block!important;
						border-width: 10px 0px 10px 0px!important
					}
					.es-btn-fw {
						border-width: 10px 0px!important;
						text-align: center!important
					}
					.es-adaptive table,
					.es-btn-fw,
					.es-btn-fw-brdr,
					.es-left,
					.es-right {
						width: 100%!important
					}
					.es-content table,
					.es-header table,
					.es-footer table,
					.es-content,
					.es-footer,
					.es-header {
						width: 100%!important;
						max-width: 600px!important
					}
					.es-adapt-td {
						display: block!important;
						width: 100%!important
					}
					.adapt-img {
						width: 100%!important;
						height: auto!important
					}
					.es-m-p0 {
						padding: 0px!important
					}
					.es-m-p0r {
						padding-right: 0px!important
					}
					.es-m-p0l {
						padding-left: 0px!important
					}
					.es-m-p0t {
						padding-top: 0px!important
					}
					.es-m-p0b {
						padding-bottom: 0!important
					}
					.es-m-p20b {
						padding-bottom: 20px!important
					}
					.es-mobile-hidden,
					.es-hidden {
						display: none!important
					}
					tr.es-desk-hidden,
					td.es-desk-hidden,
					table.es-desk-hidden {
						width: auto!important;
						overflow: visible!important;
						float: none!important;
						max-height: inherit!important;
						line-height: inherit!important
					}
					tr.es-desk-hidden {
						display: table-row!important
					}
					table.es-desk-hidden {
						display: table!important
					}
					td.es-desk-menu-hidden {
						display: table-cell!important
					}
					.es-menu td {
						width: 1%!important
					}
					table.es-table-not-adapt,
					.esd-block-html table {
						width: auto!important
					}
					table.es-social {
						display: inline-block!important
					}
					table.es-social td {
						display: inline-block!important
					}
					.es-desk-hidden {
						display: table-row!important;
						width: auto!important;
						overflow: visible!important;
						max-height: inherit!important
					}
					.h-auto {
						height: auto!important
					}
				}
			</style>
		</head>

		<body style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:arial, ''helvetica neue'', helvetica, sans-serif;padding:0;Margin:0">
			<div class="es-wrapper-color" style="background-color:#E4E5E7">
				<table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;background-color:#E4E5E7">
					<tr style="border-collapse:collapse">
						<td valign="top" style="padding:0;Margin:0">
							<table class="es-header" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
								<tr style="border-collapse:collapse">
									<td align="center" style="padding:0;Margin:0">
										<table class="es-header-body" cellspacing="0" cellpadding="0" align="center" bgcolor="#094293" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#094293;width:600px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px">
													<table class="es-left" cellspacing="0" cellpadding="0" align="left" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left">
														<tr style="border-collapse:collapse">
															<td class="es-m-p0r es-m-p20b" valign="top" align="center" style="padding:0;Margin:0;width:178px">
																
															</td>
														</tr>
													</table>
													<table cellspacing="0" cellpadding="0" align="right" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td align="left" style="padding:0;Margin:0;width:362px">
																<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<td class="es-m-txt-c" align="right" style="padding:0;Margin:0;padding-top:15px;padding-bottom:20px">
																			<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#FFFFFF;font-size:14px">'+@fecha_solicitud+'</p>
																		</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
																
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>'

	SET @Alerta_Solicitud = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
													<td align="center" style="padding:0;Margin:0;padding-top:20px;padding-left:40px;padding-right:40px">
														<h1 style="Margin:0;line-height:31px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:26px;font-style:normal;font-weight:normal;color:#333333">Detalles Solicitud</h1>
														<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><br></p>
													</td>
												</tr>
												
												
												
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>'

	SET @Encabezado_Correo = 
				'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ffffff;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;padding-top:15px;padding-left:20px;padding-right:20px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;padding-bottom:25px">
										<table cellspacing="0" cellpadding="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:560px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>N mero de solicitud: </strong> '+ @id_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Fecha solicitud : </strong> '+ @fecha_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Responsable de la solicitud: </strong> '+@responsable_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Tipo de Permiso: </strong> '+@tipo_solicitud+'</p>
															</td>
														</tr>

													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td style="padding:0;Margin:0;background-color:#ededed" bgcolor="#ededed" align="left">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
				<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:40px;padding-right:40px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:520px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
																<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333">Datos del Permiso:</h3>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td style="padding:0;Margin:0">
																<table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<th></th>
																	</tr>
																</table>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="center" style="padding:0;Margin:0;padding-top:10px;padding-bottom:10px">
																<table border="1" align="center" cellspacing="1" cellpadding="3" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;height:70px;width:500px" class="es-table">
																	<thead>
																		<tr style="border-collapse:collapse">
																			<th style="font-size:12px;text-align:center" scope="col">Permiso</th>
																			<th style="font-size:12px;text-align:center" scope="col">Fecha Inicio</th>
					  													    <th style="font-size:12px;text-align:center" scope="col">Fecha Final</th>
																			<th style="font-size:12px;text-align:center" scope="col">Dias</th>
																			<th style="font-size:12px;text-align:center" scope="col">Tipo Permiso</th>
																			<th style="font-size:12px;text-align:center" scope="col">Comentario</th>
																			<th style="font-size:12px;text-align:center" scope="col">Detalle</th>
																		</tr>
																	</thead>
																	<tr style="border-collapse:collapse">' 
	
	

	

	SET @TablePermiso = 
	(	select soli.ID_SOLICITUD AS [TD]	,  CONVERT(VARCHAR, soli.FECHA_INICIO, 103) AS [TD]	, convert (VARCHAR,  soli.FECHA_FINAL, 103) AS [TD]	,
   soli.DIAS AS [TD]	 ,  tipo.NOMBRE_TIPO_SOLICITUD AS [TD]	 , soli.COMENTARIO AS [TD]	, soli.DETALLE as [TD] from SOLICITUD soli
  inner join TIPOSOLICITUD tipo
  on tipo.ID_TIPOSOLICITUD=soli.TIPOSOLICITUD_ID
  where soli.ID_SOLICITUD=@id_solicitud
		FOR XML RAW('tr'), ELEMENTS) + ' 
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333"><br></h3>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>' 

	
											
	SET @EncabezadoAprobacion = 
	'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
		<tr style="border-collapse:collapse">
			<td align="center" style="padding:0;Margin:0">
				<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
					<tr style="border-collapse:collapse">
						<td align="left" style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:40px;padding-right:40px">
							<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;width:520px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333">Aprobaciones:</h3>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td style="padding:0;Margin:0">
													<table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<th></th>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="center" style="padding:0;Margin:0;padding-top:10px;padding-bottom:10px">
													<table border="1" align="center" cellspacing="1" cellpadding="3" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;height:70px;width:500px" class="es-table">
														<thead>
															<tr style="border-collapse:collapse">
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Departamento</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Encargado</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Secuencia</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Estado</th>
															</tr>
														</thead>
														<tr style="border-collapse:collapse">'

	SET @TableAprobacion = 
		(SELECT DEPAP.DESCRIPCION AS [TD] ,EMPLE.NOMBRECOMPLETO AS [TD], APSOLI.SECUENCIA AS [TD],   CASE APSOLI.RESPUESTA_SOLICITUD
When 'P' Then 'PENDIENTE'
When 'A' Then 'APROBADO'
ELSE 'RECHAZADO' 
END  AS [TD] FROM APROBACIONSOLICITUD APSOLI
INNER JOIN EMPLEADO EMPLE ON APSOLI.ENCARGADO_APROBACION_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTOSUPERVISOR DEPASUP ON DEPASUP.EMPLEADO_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTO DEPAP ON DEPAP.ID_DEPARTAMENTO=DEPASUP.DEPARTAMENTO_ID

WHERE APSOLI.SOLICITUD_ID=@id_solicitud		

order by APSOLI.SECUENCIA ASC
		FOR XML RAW('tr'), ELEMENTS) + '
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333"><br></h3>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>'


	SET @APROBACION = '
						<tr>
                          <td>
                            <table cellpadding="0" cellspacing="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
                              <tr>
                                <td align="center" valign="top" style="padding:0;Margin:0;width:560px">
                                  <table cellpadding="0" cellspacing="0" width="100%" role="presentation" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
                                    <tr>
                                      <td align="center" style="padding:0;Margin:0;padding-top:15px;padding-bottom:15px">
                                        <span class="es-button-border" style="border-style:solid;color:#FFFFFF;border-color:#094293;background:#094293;border-width:4px;display:inline-block;border-radius:10px;width:auto">
										  
                                            Ingrese al m dulo Gesti n de Personal a consultar los detalles del registro del permiso
											
									    </span>
									  </td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
					'

	SET @footer = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table cellpadding="0" cellspacing="0" class="es-footer" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-footer-body" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;width:600px">
						<tr style="border-collapse:collapse">
							<td align="left" bgcolor="#094293" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;background-color:#094293">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
						</td>
					</tr>
				</table>
			</div>
		</body>
	</html> '


	
		SET  @MENSAJE_SOLICITUD =	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								   @TablePermiso 	+  @EncabezadoAprobacion	+ @TableAprobacion		+ @footer
	
	    SET  @MENSAJE_APROBACION=	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								   @TablePermiso 	+  @EncabezadoAprobacion	+ @TableAprobacion		+@APROBACION+ @footer
 
	
		IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @Email_Usuario,
					@subject = 'NOTIFICACION-REGISTRO DE PERMISO',
					@body =  @MENSAJE_SOLICITUD,
					@body_format = 'HTML';
			END

			IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @Email_Usuario_aprobar,
					@subject = 'REGISTRO DE PERMISO PARA APROBACION',
					@body =  @MENSAJE_APROBACION,
					@body_format = 'HTML';
			END

	select @responsable_solicitud
	select @MENSAJE_SOLICITUD
	select @Email_Usuario

    SET @Resultado = 1

end
else

begin

SET @INICIO_CORREO = 
		'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;padding:0;Margin:0">

		<head>
			<meta charset="UTF-8">
			<meta content="width=device-width, initial-scale=1" name="viewport">
			<meta name="x-apple-disable-message-reformatting">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta content="telephone=no" name="format-detection">
			<title>AMS</title>

			<style type="text/css">
				#outlook a {
					padding: 0;
				}
        
				.ExternalClass {
					width: 100%;
				}
        
				.ExternalClass,
				.ExternalClass p,
				.ExternalClass span,
				.ExternalClass font,
				.ExternalClass td,
				.ExternalClass div {
					line-height: 100%;
				}
        
				.es-button {
					mso-style-priority: 100!important;
					text-decoration: none!important;
				}
        
				a[x-apple-data-detectors] {
					color: inherit!important;
					text-decoration: none!important;
					font-size: inherit!important;
					font-family: inherit!important;
					font-weight: inherit!important;
					line-height: inherit!important;
				}
        
				.es-desk-hidden {
					display: none;
					float: left;
					overflow: hidden;
					width: 0;
					max-height: 0;
					line-height: 0;
					mso-hide: all;
				}
        
				[data-ogsb] .es-button {
					border-width: 0!important;
					padding: 10px 20px 10px 20px!important;
				}
        
				@media only screen and (max-width:600px) {
					p,
					ul li,
					ol li,
					a {
						line-height: 150%!important
					}
					h1,
					h2,
					h3,
					h1 a,
					h2 a,
					h3 a {
						line-height: 120%!important
					}
					h1 {
						font-size: 30px!important;
						text-align: center
					}
					h2 {
						font-size: 26px!important;
						text-align: center
					}
					h3 {
						font-size: 20px!important;
						text-align: center
					}
					.es-header-body h1 a,
					.es-content-body h1 a,
					.es-footer-body h1 a {
						font-size: 30px!important
					}
					.es-header-body h2 a,
					.es-content-body h2 a,
					.es-footer-body h2 a {
						font-size: 26px!important
					}
					.es-header-body h3 a,
					.es-content-body h3 a,
					.es-footer-body h3 a {
						font-size: 20px!important
					}
					.es-menu td a {
						font-size: 16px!important
					}
					.es-header-body p,
					.es-header-body ul li,
					.es-header-body ol li,
					.es-header-body a {
						font-size: 16px!important
					}
					.es-content-body p,
					.es-content-body ul li,
					.es-content-body ol li,
					.es-content-body a {
						font-size: 16px!important
					}
					.es-footer-body p,
					.es-footer-body ul li,
					.es-footer-body ol li,
					.es-footer-body a {
						font-size: 16px!important
					}
					.es-infoblock p,
					.es-infoblock ul li,
					.es-infoblock ol li,
					.es-infoblock a {
						font-size: 12px!important
					}
					*[class="gmail-fix"] {
						display: none!important
					}
					.es-m-txt-c,
					.es-m-txt-c h1,
					.es-m-txt-c h2,
					.es-m-txt-c h3 {
						text-align: center!important
					}
					.es-m-txt-r,
					.es-m-txt-r h1,
					.es-m-txt-r h2,
					.es-m-txt-r h3 {
						text-align: right!important
					}
					.es-m-txt-l,
					.es-m-txt-l h1,
					.es-m-txt-l h2,
					.es-m-txt-l h3 {
						text-align: left!important
					}
					.es-m-txt-r img,
					.es-m-txt-c img,
					.es-m-txt-l img {
						display: inline!important
					}
					.es-button-border {
						display: block!important
					}
					a.es-button,
					button.es-button {
						font-size: 20px!important;
						display: block!important;
						border-width: 10px 0px 10px 0px!important
					}
					.es-btn-fw {
						border-width: 10px 0px!important;
						text-align: center!important
					}
					.es-adaptive table,
					.es-btn-fw,
					.es-btn-fw-brdr,
					.es-left,
					.es-right {
						width: 100%!important
					}
					.es-content table,
					.es-header table,
					.es-footer table,
					.es-content,
					.es-footer,
					.es-header {
						width: 100%!important;
						max-width: 600px!important
					}
					.es-adapt-td {
						display: block!important;
						width: 100%!important
					}
					.adapt-img {
						width: 100%!important;
						height: auto!important
					}
					.es-m-p0 {
						padding: 0px!important
					}
					.es-m-p0r {
						padding-right: 0px!important
					}
					.es-m-p0l {
						padding-left: 0px!important
					}
					.es-m-p0t {
						padding-top: 0px!important
					}
					.es-m-p0b {
						padding-bottom: 0!important
					}
					.es-m-p20b {
						padding-bottom: 20px!important
					}
					.es-mobile-hidden,
					.es-hidden {
						display: none!important
					}
					tr.es-desk-hidden,
					td.es-desk-hidden,
					table.es-desk-hidden {
						width: auto!important;
						overflow: visible!important;
						float: none!important;
						max-height: inherit!important;
						line-height: inherit!important
					}
					tr.es-desk-hidden {
						display: table-row!important
					}
					table.es-desk-hidden {
						display: table!important
					}
					td.es-desk-menu-hidden {
						display: table-cell!important
					}
					.es-menu td {
						width: 1%!important
					}
					table.es-table-not-adapt,
					.esd-block-html table {
						width: auto!important
					}
					table.es-social {
						display: inline-block!important
					}
					table.es-social td {
						display: inline-block!important
					}
					.es-desk-hidden {
						display: table-row!important;
						width: auto!important;
						overflow: visible!important;
						max-height: inherit!important
					}
					.h-auto {
						height: auto!important
					}
				}
			</style>
		</head>

		<body style="width:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:arial, ''helvetica neue'', helvetica, sans-serif;padding:0;Margin:0">
			<div class="es-wrapper-color" style="background-color:#E4E5E7">
				<table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;background-color:#E4E5E7">
					<tr style="border-collapse:collapse">
						<td valign="top" style="padding:0;Margin:0">
							<table class="es-header" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
								<tr style="border-collapse:collapse">
									<td align="center" style="padding:0;Margin:0">
										<table class="es-header-body" cellspacing="0" cellpadding="0" align="center" bgcolor="#094293" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#094293;width:600px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px">
													<table class="es-left" cellspacing="0" cellpadding="0" align="left" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left">
														<tr style="border-collapse:collapse">
															<td class="es-m-p0r es-m-p20b" valign="top" align="center" style="padding:0;Margin:0;width:178px">
																
															</td>
														</tr>
													</table>
													<table cellspacing="0" cellpadding="0" align="right" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td align="left" style="padding:0;Margin:0;width:362px">
																<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
																	<tr style="border-collapse:collapse">
																		<td class="es-m-txt-c" align="right" style="padding:0;Margin:0;padding-top:15px;padding-bottom:20px">
																			<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#FFFFFF;font-size:14px">'+@fecha_solicitud+'</p>
																		</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
																
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>'

	SET @Alerta_Solicitud = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
													<td align="center" style="padding:0;Margin:0;padding-top:20px;padding-left:40px;padding-right:40px">
														<h1 style="Margin:0;line-height:31px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:26px;font-style:normal;font-weight:normal;color:#333333">Detalles Solicitud</h1>
														<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><br></p>
													</td>
												</tr>
												
												
												
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>'

	SET @Encabezado_Correo = 
				'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
					<tr style="border-collapse:collapse">
						<td align="center" style="padding:0;Margin:0">
							<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ffffff;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;padding-top:15px;padding-left:20px;padding-right:20px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td align="left" style="Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;padding-bottom:25px">
										<table cellspacing="0" cellpadding="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td align="left" style="padding:0;Margin:0;width:560px">
													<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>N mero de solicitud: </strong> '+ @id_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Fecha solicitud : </strong> '+ @fecha_solicitud +'</p>
															</td>
														</tr>
														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Responsable de la solicitud: </strong> '+@responsable_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Tipo de Permiso: </strong> '+@tipo_solicitud+'</p>
															</td>
														</tr>

														<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Horario Actual: </strong> '+@horario_actual+'</p>
															</td>
														</tr>

															<tr style="border-collapse:collapse">
															<td align="left" class="h-auto" height="30" style="padding:0;Margin:0">
																<p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:arial, ''helvetica neue'', helvetica, sans-serif;line-height:21px;color:#333333;font-size:14px"><strong>Horario Nuevo: </strong> '+@horario_nuevo+'</p>
															</td>
														</tr>

													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr style="border-collapse:collapse">
									<td style="padding:0;Margin:0;background-color:#ededed" bgcolor="#ededed" align="left">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
													
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>'
											
	SET @EncabezadoAprobacion = 
	'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
		<tr style="border-collapse:collapse">
			<td align="center" style="padding:0;Margin:0">
				<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
					<tr style="border-collapse:collapse">
						<td align="left" style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:40px;padding-right:40px">
							<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
								<tr style="border-collapse:collapse">
									<td align="left" style="padding:0;Margin:0;width:520px">
										<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333">Aprobaciones:</h3>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td style="padding:0;Margin:0">
													<table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
														<tr style="border-collapse:collapse">
															<th></th>
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td align="center" style="padding:0;Margin:0;padding-top:10px;padding-bottom:10px">
													<table border="1" align="center" cellspacing="1" cellpadding="3" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;height:70px;width:500px" class="es-table">
														<thead>
															<tr style="border-collapse:collapse">
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Departamento</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Encargado</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Secuencia</th>
																<th style="font-size:12px;text-align:center;color:#000000" scope="col">Estado</th>
															</tr>
														</thead>
														<tr style="border-collapse:collapse">'

	SET @TableAprobacion = 
		(SELECT DEPAP.DESCRIPCION AS [TD] ,EMPLE.NOMBRECOMPLETO AS [TD], APSOLI.SECUENCIA AS [TD],   CASE APSOLI.RESPUESTA_SOLICITUD
When 'P' Then 'PENDIENTE'
When 'A' Then 'APROBADO'
ELSE 'RECHAZADO' 
END  AS [TD] FROM APROBACIONSOLICITUD APSOLI
INNER JOIN EMPLEADO EMPLE ON APSOLI.ENCARGADO_APROBACION_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTOSUPERVISOR DEPASUP ON DEPASUP.EMPLEADO_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTO DEPAP ON DEPAP.ID_DEPARTAMENTO=DEPASUP.DEPARTAMENTO_ID

WHERE APSOLI.SOLICITUD_ID=@id_solicitud		

order by APSOLI.SECUENCIA ASC
		FOR XML RAW('tr'), ELEMENTS) + '
														</tr>
													</table>
												</td>
											</tr>
											<tr style="border-collapse:collapse">
												<td class="h-auto" align="center" height="30" style="padding:0;Margin:0">
													<h3 style="Margin:0;line-height:24px;mso-line-height-rule:exactly;font-family:tahoma, verdana, segoe, sans-serif;font-size:20px;font-style:normal;font-weight:normal;color:#333333"><br></h3>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>'


	SET @APROBACION = '
						<tr>
                          <td>
                            <table cellpadding="0" cellspacing="0" width="100%" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
                              <tr>
                                <td align="center" valign="top" style="padding:0;Margin:0;width:560px">
                                  <table cellpadding="0" cellspacing="0" width="100%" role="presentation" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
                                    <tr>
                                      <td align="center" style="padding:0;Margin:0;padding-top:15px;padding-bottom:15px">
                                        <span class="es-button-border" style="border-style:solid;color:#FFFFFF;border-color:#094293;background:#094293;border-width:4px;display:inline-block;border-radius:10px;width:auto">
										  
                                            Ingrese al m dulo Gesti n de Personal a consultar los detalles del registro del permiso
											
									    </span>
									  </td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
					'

	SET @footer = 
		'<table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#ededed;width:600px" cellspacing="0" cellpadding="0" bgcolor="#ededed" align="center">
						<tr style="border-collapse:collapse">
							<td align="left" style="padding:0;Margin:0">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:600px">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table cellpadding="0" cellspacing="0" class="es-footer" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;background-color:transparent;background-repeat:repeat;background-position:center top">
			<tr style="border-collapse:collapse">
				<td align="center" style="padding:0;Margin:0">
					<table class="es-footer-body" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;width:600px">
						<tr style="border-collapse:collapse">
							<td align="left" bgcolor="#094293" style="padding:0;Margin:0;padding-top:20px;padding-left:20px;padding-right:20px;background-color:#094293">
								<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
									<tr style="border-collapse:collapse">
										<td valign="top" align="center" style="padding:0;Margin:0;width:560px">
											<table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px">
												<tr style="border-collapse:collapse">
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
						</td>
					</tr>
				</table>
			</div>
		</body>
	</html> '


	
		SET  @MENSAJE_SOLICITUD =	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								   	+  @EncabezadoAprobacion	+ @TableAprobacion		+ @footer
	
	    SET  @MENSAJE_APROBACION=	@INICIO_CORREO			+ @Alerta_Solicitud			+ @Encabezado_Correo	+
								 	+  @EncabezadoAprobacion	+ @TableAprobacion		+@APROBACION+ @footer
 
	
		IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @Email_Usuario,
					@subject = 'NOTIFICACION-REGISTRO DE PERMISO',
					@body =  @MENSAJE_SOLICITUD,
					@body_format = 'HTML';
			END

			IF @Email_Usuario <> ''
			BEGIN
				EXEC msdb.dbo.sp_send_dbmail
					@profile_name = 'EnvioMail',
					@recipients =  @Email_Usuario_aprobar,
					@subject = 'REGISTRO DE PERMISO PARA APROBACION',
					@body =  @MENSAJE_APROBACION,
					@body_format = 'HTML';
			END

	select @responsable_solicitud
	select @MENSAJE_SOLICITUD
	select @Email_Usuario

    SET @Resultado = 1

end
	
	
	
	
END TRY
BEGIN CATCH
	
  INSERT INTO [dbo].[DB_ERRORES]
           ([UserName]
           ,[ErrorNumber]
           ,[ErrorState]
           ,[ErrorSeverity]
           ,[ErrorLine]
           ,[ErrorProcedure]
           ,[ErrorMessage]
           ,[ErrorDateTime])

    VALUES
  (SUSER_SNAME(),
   ERROR_NUMBER(),
   ERROR_STATE(),
   ERROR_SEVERITY(),
   ERROR_LINE(),
   ERROR_PROCEDURE(),
   ERROR_MESSAGE(),
   GETDATE());
END CATCH
GO
/****** Object:  StoredProcedure [dbo].[ObtenerAprobacionFlujo]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE PROC [dbo].[ObtenerAprobacionFlujo] 
@id_solicitud bigint
as begin
SELECT DEPAP.DESCRIPCION AS DEPARTAMENTO ,EMPLE.NOMBRECOMPLETO AS NOMBRE_ENCARGADO, 
AP.SECUENCIA ,  CASE AP.RESPUESTA_SOLICITUD 
When 'P' Then 'PENDIENTE'
When 'A' Then 'APROBADO'
ELSE 'RECHAZADO' 
END  AS RESPUESTA_SOLICITUD FROM APROBACIONSOLICITUD AP
INNER JOIN EMPLEADO EMPLE ON AP.ENCARGADO_APROBACION_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTOSUPERVISOR DEPASUP ON DEPASUP.EMPLEADO_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTO DEPAP ON DEPAP.ID_DEPARTAMENTO=DEPASUP.DEPARTAMENTO_ID

WHERE AP.SOLICITUD_ID=@id_solicitud
end
GO
/****** Object:  StoredProcedure [dbo].[ObtenerAprobacionPendiente]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE PROCEDURE [dbo].[ObtenerAprobacionPendiente]  
@ID_EMPLEADO BIGINT
AS
BEGIN

SELECT 
    SOLI.ID_SOLICITUD, 
	SOLI.FECHA_SOLICITUD,
    EMPLEPER.NOMBRECOMPLETO AS SOLICITANTE, 
    EMPLEPER.IDENTIFICACION AS IDENTIFICACION,
    TIPO.DESCRIPCION AS TIPOPERMISO,
    ISNULL(HL.NOMBREHL,'') AS HORARIO,
    ISNULL(SOLI.DIAS,'') AS DIAS,
	
    CASE 
        WHEN AP.RESPUESTA_SOLICITUD = 'P' THEN 'PENDIENTE'
        WHEN AP.RESPUESTA_SOLICITUD = 'A' THEN 'APROBADO'
        ELSE 'RECHAZADO'
    END AS RESPUESTASOLICITUD 
FROM 
    APROBACIONSOLICITUD AP
INNER JOIN 
    EMPLEADO EMPLE ON AP.ENCARGADO_APROBACION_ID = EMPLE.ID_EMPLEADO
INNER JOIN 
    DEPARTAMENTOSUPERVISOR DEPASUP ON DEPASUP.EMPLEADO_ID = EMPLE.ID_EMPLEADO
INNER JOIN 
    DEPARTAMENTO DEPAP ON DEPAP.ID_DEPARTAMENTO = DEPASUP.DEPARTAMENTO_ID
INNER JOIN 
    SOLICITUD SOLI ON SOLI.ID_SOLICITUD = AP.SOLICITUD_ID
INNER JOIN 
    EMPLEADO EMPLEPER ON EMPLEPER.ID_EMPLEADO = SOLI.SOLICITANTE_ID
INNER JOIN 
    TIPOSOLICITUD TIPO ON TIPO.ID_TIPOSOLICITUD = SOLI.TIPOSOLICITUD_ID

LEFT JOIN HORARIOLABORAL HL ON HL.ID_HORARIOLABORAL=SOLI.ID_HORARIOLABORAL
WHERE 
    AP.ENCARGADO_APROBACION_ID = @ID_EMPLEADO
    AND AP.RESPUESTA_SOLICITUD = 'P' 
    AND NOT EXISTS (
        SELECT 1 
        FROM APROBACIONSOLICITUD AP2 
        WHERE AP2.SOLICITUD_ID = AP.SOLICITUD_ID 
          AND AP2.SECUENCIA < AP.SECUENCIA 
          AND AP2.RESPUESTA_SOLICITUD <> 'A'
    )

END

GO
/****** Object:  StoredProcedure [dbo].[ObtenerAprobacionPendienteDetalle]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE PROCEDURE [dbo].[ObtenerAprobacionPendienteDetalle]  
@ID_SOLICITUD BIGINT,
@ID_EMPLEADO BIGINT
as begin


SELECT SOLI.ID_SOLICITUD, 
EMPLEPER.NOMBRECOMPLETO AS SOLICITANTE ,
EMPLEPER.ID_EMPLEADO AS ID_EMPLEADO,
EMPLEPER.IDENTIFICACION AS IDENTIFICACION,
TIPO.DESCRIPCION AS TIPOPERMISO
,ISNULL(SOLI.DIAS,'') AS DIAS,
CASE AP.RESPUESTA_SOLICITUD
When 'P' Then 'PENDIENTE' 
When 'A' Then 'APROBADO'
ELSE 'RECHAZADO' 
END   RESPUESTASOLICITUD ,
SOLI.FECHA_SOLICITUD,
ISNULL(FECHA_INICIO, '') AS FECHA_INICIO,
ISNULL(FECHA_FINAL,'') AS FECHA_FINAL, 
SOLI.COMENTARIO
,SOLI.DETALLE,ap.SECUENCIA, 
ISNULL(HL.NOMBREHL ,'') AS HORARIO_NUEVO,
HOL.NOMBREHL AS HORARIO_ACTUAL

FROM APROBACIONSOLICITUD AP
INNER JOIN EMPLEADO EMPLE ON AP.ENCARGADO_APROBACION_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTOSUPERVISOR DEPASUP ON DEPASUP.EMPLEADO_ID=EMPLE.ID_EMPLEADO
INNER JOIN DEPARTAMENTO DEPAP ON DEPAP.ID_DEPARTAMENTO=DEPASUP.DEPARTAMENTO_ID
INNER JOIN SOLICITUD SOLI ON SOLI.ID_SOLICITUD=AP.SOLICITUD_ID
INNER JOIN EMPLEADO EMPLEPER ON EMPLEPER.ID_EMPLEADO=SOLI.SOLICITANTE_ID
INNER JOIN TIPOSOLICITUD TIPO ON TIPO.ID_TIPOSOLICITUD=SOLI.TIPOSOLICITUD_ID
LEFT JOIN HORARIOLABORAL HL ON HL.ID_HORARIOLABORAL=SOLI.ID_HORARIOLABORAL
LEFT JOIN HORARIOLABORAL HOL ON HOL.ID_HORARIOLABORAL=EMPLE.HORARIOLABORAL_ID

WHERE SOLI.ID_SOLICITUD=@ID_SOLICITUD and  AP.ENCARGADO_APROBACION_ID=@ID_EMPLEADO

END

GO
/****** Object:  StoredProcedure [dbo].[ObtenerDeducciones]    Script Date: 20/7/2024 11:19:04 p. m. ******/


create PROC [dbo].[ObtenerDeducciones]
  as begin
  
  select  ID_DEDUCCION, NOMBRE_DEDUCCION, DESCRIPCION,PORCENTAJE from DEDUCCION


  end

GO
/****** Object:  StoredProcedure [dbo].[ObtenerDireccionesPorEmpleado]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/23/2024
-- Description: Lista todas las direcciones de un empleado
-- =============================================
CREATE PROCEDURE [dbo].[ObtenerDireccionesPorEmpleado]
(
    -- Add the parameters for the stored procedure here
    @ID_EMPLEADO BIGINT
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
        SELECT 
        D.ID_DIRECCION,
        D.DIRRECION
    FROM 
        [dbo].[DIRRECCION] D
    INNER JOIN 
        [dbo].[EMPLEADODIRRECCION] ED ON D.ID_DIRECCION = ED.DIRRECION_ID
    WHERE 
        ED.EMPLEADO_ID = @ID_EMPLEADO;
END
GO
/****** Object:  StoredProcedure [dbo].[ObtenerHorarioLaboralEmpleado]    Script Date: 20/7/2024 11:19:04 p. m. ******/


create proc [dbo].[ObtenerHorarioLaboralEmpleado] 
  @Correo varchar(256) 
  as begin

  select hl.ID_HORARIOLABORAL,   CONCAT(hl.DESCRIPCION, ' - ', CONVERT(varchar(5), hl.HORA_INGRESO, 108), ' hasta ', CONVERT(varchar(5), hl.HORA_SALIDA, 108)) AS HORARIO from empleado emple 
  inner join HORARIOLABORAL hl on hl.ID_HORARIOLABORAL=emple.HORARIOLABORAL_ID
  INNER JOIN CORREO CO ON CO.ID_CORREO=emple.CORREO_ID
  where co.CORREO=@Correo
  end

  -- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
/****** Object:  StoredProcedure [dbo].[ObtenerHorariosDisponibles]    Script Date: 20/7/2024 11:19:04 p. m. ******/


create PROC [dbo].[ObtenerHorariosDisponibles]
    @id_empleado bigint
AS
BEGIN
    DECLARE @horario_actual bigint;

    
    SET @horario_actual = (SELECT HORARIOLABORAL_ID FROM EMPLEADO WHERE ID_EMPLEADO = @id_empleado);

   
    SELECT 
        ID_HORARIOLABORAL, 
        CONCAT(NOMBREHL, ' - ', CONVERT(varchar(5), HORA_INGRESO, 108), ' hasta ', CONVERT(varchar(5), HORA_SALIDA, 108)) AS Horario
    FROM 
        HORARIOLABORAL
    WHERE 
        ID_HORARIOLABORAL != @horario_actual;
END;

GO
/****** Object:  StoredProcedure [dbo].[ObtenerInformacionEmpleado]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE procedure [dbo].[ObtenerInformacionEmpleado]
as begin
SELECT 
    em.IDENTIFICACION,
    em.NOMBRECOMPLETO,
    em.FECHA_NACIMIENTO,
    em.FOTO,
    co.CORREO,
    roles.Name as ROL,
    de.DESCRIPCION AS DEPARTAMENTO,
    ca.NOMBRE_CARGO AS CARGO,
    ho.DESCRIPCION AS HORARIO,
    em.SALARIO,
    em.SALDO_VACACIONES,
    STRING_AGG(direc.DIRRECION, ',') AS DIRRECIONES,
	STRING_AGG(tel.TELEFONO, ', ') AS TELEFONOS,
	em.ESTADO
FROM 
    EMPLEADO em
LEFT JOIN 
    CARGO ca ON em.CARGO_ID = ca.ID_CARGO
INNER JOIN 
    CORREO co ON co.ID_CORREO = em.CORREO_ID
LEFT JOIN  
    HORARIOLABORAL ho ON ho.ID_HORARIOLABORAL = em.HORARIOLABORAL_ID
LEFT JOIN 
    DEPARTAMENTO de ON de.ID_DEPARTAMENTO = em.DEPARTAMENTO_ID
INNER JOIN 
    AspNetUsers users ON users.Email = co.CORREO
INNER JOIN 
    AspNetUserRoles userol ON userol.UserId = users.Id
INNER JOIN 
    AspNetRoles roles ON roles.Id = userol.RoleId
LEFT JOIN 
    EMPLEADODIRRECCION empledirec ON empledirec.EMPLEADO_ID = em.ID_EMPLEADO
LEFT JOIN 
    DIRRECCION direc ON direc.ID_DIRECCION = empledirec.DIRRECION_ID

	LEFT JOIN EMPLEADOTELEFONO empletel on empletel.EMPLEADO_ID=em.ID_EMPLEADO

	LEFT join TELEFONO tel on tel.ID_TELEFONO=empletel.TELEFONO_ID
GROUP BY 
    em.IDENTIFICACION,
    em.NOMBRECOMPLETO,
    em.FECHA_NACIMIENTO,
    em.FOTO,
    co.CORREO,
    roles.Name,
    de.DESCRIPCION,
    ca.NOMBRE_CARGO,
    ho.DESCRIPCION,
    em.SALARIO,
    em.SALDO_VACACIONES,
	em.ESTADO
	END
GO
/****** Object:  StoredProcedure [dbo].[ObtenerIngresos]    Script Date: 20/7/2024 11:19:04 p. m. ******/


  create PROC [dbo].[ObtenerIngresos]
  as begin
  
  select  ID_INGRESO, NOMBRE_INGRESO, DESCRIPCION, MONTO, PORCENTAJE from INGRESO


  end

GO
/****** Object:  StoredProcedure [dbo].[ObtenerSolicitudesEmpleados]    Script Date: 20/7/2024 11:19:04 p. m. ******/


  create PROCEDURE [dbo].[ObtenerSolicitudesEmpleados] 
    @id_empleado BIGINT
AS
BEGIN
    SELECT 
        soli.FECHA_SOLICITUD,
        emp.NOMBRECOMPLETO,
        emp.IDENTIFICACION,
        tiposoli.NOMBRE_TIPO_SOLICITUD,
        CASE soli.ESTADO_SOLICITUD
            WHEN 'P' THEN 'PENDIENTE'
            WHEN 'A' THEN 'APROBADO'
            WHEN 'R' THEN 'RECHAZADO'
        END AS ESTADO
    FROM 
        SOLICITUD soli
    INNER JOIN 
        EMPLEADO emp ON emp.ID_EMPLEADO = soli.SOLICITANTE_ID
    INNER JOIN 
        TIPOSOLICITUD tiposoli ON tiposoli.ID_TIPOSOLICITUD = soli.TIPOSOLICITUD_ID

		

    WHERE 
        emp.ID_EMPLEADO = @id_empleado

		order by soli.FECHA_SOLICITUD desc
		
END;

GO
/****** Object:  StoredProcedure [dbo].[ObtenerTelefonosPorEmpleado]    Script Date: 20/7/2024 11:19:04 p. m. ******/


-- =============================================
-- Author:      Wilson Arias
-- Create Date: 06/23/2024
-- Description: Lista todos los telefonos que tenga un empleado
-- =============================================
CREATE PROCEDURE [dbo].[ObtenerTelefonosPorEmpleado]
(
    -- Add the parameters for the stored procedure here
    @ID_EMPLEADO BIGINT
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
    SELECT 
        T.ID_TELEFONO,
        T.TELEFONO
    FROM 
        [dbo].[TELEFONO] T
    INNER JOIN 
        [dbo].[EMPLEADOTELEFONO] ET ON T.ID_TELEFONO = ET.TELEFONO_ID
    WHERE 
        ET.EMPLEADO_ID = @ID_EMPLEADO;
END
GO
/****** Object:  StoredProcedure [dbo].[ObtenerTelefonosUsuario]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE   PROCEDURE [dbo].[ObtenerTelefonosUsuario]
@ID_EMPLEADO BIGINT
AS
BEGIN
	SELECT t.ID_TELEFONO AS ID_TELEFONO, t.TELEFONO AS TELEFONO
    FROM EMPLEADOTELEFONO et
    INNER JOIN TELEFONO t ON et.TELEFONO_ID = t.ID_TELEFONO
    WHERE et.EMPLEADO_ID = @ID_EMPLEADO
END
GO
/****** Object:  StoredProcedure [dbo].[ObtenerTipoNomina]    Script Date: 20/7/2024 11:19:04 p. m. ******/


create proc [dbo].[ObtenerTipoNomina]
as begin

select ID_TIPONOMINA, DESCRIPCION from TIPONOMINA

end

GO
/****** Object:  StoredProcedure [dbo].[ObtenerTiposSolicitudes]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE    PROC [dbo].[ObtenerTiposSolicitudes]
as begin

select ID_TIPOSOLICITUD AS ID, NOMBRE_TIPO_SOLICITUD AS DESCRIPCION from TIPOSOLICITUD

where ID_TIPOSOLICITUD in (1,2,3)


end
GO
/****** Object:  StoredProcedure [dbo].[Registrar_Documento]    Script Date: 20/7/2024 10:48:04 p. m. ******/

CREATE   PROCEDURE [dbo].[Registrar_Documento]
@NOMBRE_DOCUMENTO	NVARCHAR (50),
@COMENTARIO			NVARCHAR(200),
@TIPODOCUMENTO_ID	BIGINT,
@EMPLEADO_ID		BIGINT,
@DOCUMENTO			VARBINARY (MAX)
AS
BEGIN

	INSERT INTO [dbo].[EMPLEADODOCUMENTO] ([NOMBRE_DOCUMENTO],[COMENTARIO],[DOCUMENTO],[TIPODOCUMENTO_ID],[EMPLEADO_ID])
	VALUES(@NOMBRE_DOCUMENTO,@COMENTARIO,@DOCUMENTO,@TIPODOCUMENTO_ID,@EMPLEADO_ID)

END
GO
/****** Object:  StoredProcedure [dbo].[RegistrarActualizarIngreso]    Script Date: 20/7/2024 11:19:04 p. m. ******/

CREATE PROCEDURE [dbo].[RegistrarActualizarIngreso] 
    @Nombre_Ingreso VARCHAR(50),
    @Descripcion VARCHAR(200),
    @Monto DECIMAL(10, 2) = NULL,
    @Porcentaje DECIMAL(10, 2) = NULL
AS
BEGIN
    
    MERGE INTO [dbo].[INGRESO] AS target
    USING (SELECT @Nombre_Ingreso AS NOMBRE_INGRESO) AS source
    ON (target.NOMBRE_INGRESO = source.NOMBRE_INGRESO)
    WHEN MATCHED THEN
        UPDATE SET 
            DESCRIPCION = @Descripcion,
            MONTO = ISNULL(@Monto, target.MONTO),
            PORCENTAJE = ISNULL(@Porcentaje, target.PORCENTAJE)
    WHEN NOT MATCHED THEN
        INSERT (NOMBRE_INGRESO, DESCRIPCION, MONTO, PORCENTAJE)
        VALUES (@Nombre_Ingreso, @Descripcion, @Monto, @Porcentaje);
END;
GO
/****** Object:  StoredProcedure [dbo].[RegistrarAprobaciones]    Script Date: 20/7/2024 11:19:04 p. m. ******/


------------------------------------- procedimientos-------------
CREATE PROCEDURE [dbo].[RegistrarAprobaciones] 
    @ID_SOLICITUD bigint
AS 
BEGIN
    -- Declaraci n de variables
    DECLARE @ENCARGADO_APROBACION bigint;
    DECLARE @SECUENCIA varchar(200);
    DECLARE @RESPUESTA_SOLICITUD varchar(1) = 'P'; 

    BEGIN TRY
        -- Declaraci n del cursor
        DECLARE cursorAprobaciones CURSOR FOR
        SELECT d.SECUENCIA, e.EMPLEADO_ID
        FROM [dbo].[SOLICITUD] a 
        INNER JOIN [dbo].[EMPLEADO] b ON a.SOLICITANTE_ID = b.ID_EMPLEADO
        INNER JOIN DEPARTAMENTO c ON c.ID_DEPARTAMENTO = b.DEPARTAMENTO_ID
        INNER JOIN FLUJOAPROBACION d ON d.DEPARTAMENTO_APROBACION_ID = c.ID_DEPARTAMENTO
        INNER JOIN [dbo].[DEPARTAMENTOSUPERVISOR] e ON e.DEPARTAMENTO_ID = d.DEPARTAMENTO_ID
        WHERE a.ID_SOLICITUD = @ID_SOLICITUD;

        -- Apertura del cursor
        OPEN cursorAprobaciones;

        -- Obtenci n del primer registro
        FETCH NEXT FROM cursorAprobaciones INTO @SECUENCIA, @ENCARGADO_APROBACION;

        -- Bucle para manejar los datos obtenidos del cursor
        WHILE @@FETCH_STATUS = 0
        BEGIN
            -- Insertar datos en la tabla APROBACIONSOLICITUD
            INSERT INTO APROBACIONSOLICITUD(
               SECUENCIA,
               RESPUESTA_SOLICITUD,
               ENCARGADO_APROBACION_ID,
               SOLICITUD_ID
             
            )
            VALUES (
               @SECUENCIA,
               @RESPUESTA_SOLICITUD,
               @ENCARGADO_APROBACION,
               @ID_SOLICITUD
        
            );

            -- Obtenci n del siguiente registro
            FETCH NEXT FROM cursorAprobaciones INTO @SECUENCIA, @ENCARGADO_APROBACION;
        END;

        -- Cierre del cursor
        CLOSE cursorAprobaciones;
        DEALLOCATE cursorAprobaciones;

--		 exec [dbo].[NotificacionSolicitud]  @ID_SOLICITUD

    END TRY
    BEGIN CATCH
        INSERT INTO [dbo].[DB_ERRORES]
           ([UserName],
            [ErrorNumber],
            [ErrorState],
            [ErrorSeverity],
            [ErrorLine],
            [ErrorProcedure],
            [ErrorMessage],
            [ErrorDateTime])
        VALUES
          (SUSER_SNAME(),
           ERROR_NUMBER(),
           ERROR_STATE(),
           ERROR_SEVERITY(),
           ERROR_LINE(),
           ERROR_PROCEDURE(),
           ERROR_MESSAGE(),
           GETDATE());
    END CATCH;
END;
GO
/****** Object:  StoredProcedure [dbo].[RegistrarDeduccionesNominaDetalle]    Script Date: 20/7/2024 11:19:04 p. m. ******/

create PROCEDURE [dbo].[RegistrarDeduccionesNominaDetalle]
    @DeduccionesNominaDetalle [dbo].[DeduccionNominaDetalleType] READONLY
AS
BEGIN
    DECLARE @Fecha DATETIME;
    DECLARE @Mes INT;

    SET @Fecha = GETDATE();
    SET @Mes = MONTH(@Fecha);

    BEGIN TRY
        
        DECLARE @MONTO DECIMAL(10,2);
        DECLARE @DETALLE VARCHAR(100);
        DECLARE @DEDUCCION_ID BIGINT;
        DECLARE @EMPLEADO_ID BIGINT;
        DECLARE @NOMINA_DETALLEID BIGINT;

        DECLARE deducciones_cursor CURSOR FOR
        SELECT [MONTO], [DETALLE], [DEDUCCION_ID], [EMPLEADO_ID]
        FROM @DeduccionesNominaDetalle;

        OPEN deducciones_cursor;

        FETCH NEXT FROM deducciones_cursor INTO @MONTO, @DETALLE, @DEDUCCION_ID, @EMPLEADO_ID;

        WHILE @@FETCH_STATUS = 0
        BEGIN
           
            SET @NOMINA_DETALLEID = (
                SELECT  ID_NOMINADETALLE
                FROM NOMINADETALLE nd
                INNER JOIN NOMINA n ON nd.NOMINA_ID = n.ID_NOMINA
                WHERE n.EMPLEADO_ID = @EMPLEADO_ID AND n.PERIODO = @Mes
            );

           
            INSERT INTO [dbo].[DEDUCCIONNOMINADETALLE]
                   ([MONTO]
                   ,[DETALLE]
                   ,[DEDUCCION_ID]
                   ,[NOMINADETALLE_ID]
                   ,[EMPLEADO_ID])
            VALUES
                   (@MONTO
                   ,@DETALLE
                   ,@DEDUCCION_ID
                   ,@NOMINA_DETALLEID
                   ,@EMPLEADO_ID);

            FETCH NEXT FROM deducciones_cursor INTO @MONTO, @DETALLE, @DEDUCCION_ID, @EMPLEADO_ID;
        END;

        CLOSE deducciones_cursor;
        DEALLOCATE deducciones_cursor;
    END TRY
    BEGIN CATCH
        
        INSERT INTO [dbo].[DB_ERRORES]
                   ([UserName]
                   ,[ErrorNumber]
                   ,[ErrorState]
                   ,[ErrorSeverity]
                   ,[ErrorLine]
                   ,[ErrorProcedure]
                   ,[ErrorMessage]
                   ,[ErrorDateTime])
        VALUES
                  (SUSER_SNAME(),
                   ERROR_NUMBER(),
                   ERROR_STATE(),
                   ERROR_SEVERITY(),
                   ERROR_LINE(),
                   ERROR_PROCEDURE(),
                   ERROR_MESSAGE(),
                   GETDATE());
    END CATCH;
END;

GO
/****** Object:  StoredProcedure [dbo].[RegistrarIngresosNominaDetalle]    Script Date: 20/7/2024 11:19:04 p. m. ******/


create PROCEDURE [dbo].[RegistrarIngresosNominaDetalle]
    @IngresosNominaDetalle [dbo].[IngresoNominaDetalleType] READONLY
AS
BEGIN
    DECLARE @Fecha DATETIME;
    DECLARE @Mes INT;

    SET @Fecha = GETDATE();
    SET @Mes = MONTH(@Fecha);

    BEGIN TRY
        DECLARE @MONTO DECIMAL(10,2);
        DECLARE @DETALLE VARCHAR(100);
        DECLARE @INGRESO_ID BIGINT;
        DECLARE @EMPLEADO_ID BIGINT;
        DECLARE @CANTIDAD INT;
        DECLARE @NOMINA_DETALLEID BIGINT;

        DECLARE ingresos_cursor CURSOR FOR
        SELECT [MONTO], [DETALLE], [INGRESO_ID], [EMPLEADO_ID], [CANTIDAD]
        FROM @IngresosNominaDetalle;

        OPEN ingresos_cursor;

        FETCH NEXT FROM ingresos_cursor INTO @MONTO, @DETALLE, @INGRESO_ID, @EMPLEADO_ID, @CANTIDAD;

        WHILE @@FETCH_STATUS = 0
        BEGIN
            SET @NOMINA_DETALLEID = (
                SELECT ID_NOMINADETALLE
                FROM NOMINADETALLE nd
                INNER JOIN NOMINA n ON nd.NOMINA_ID = n.ID_NOMINA
                WHERE n.EMPLEADO_ID = @EMPLEADO_ID AND n.PERIODO = @Mes
            );

            IF @INGRESO_ID = 2
            BEGIN
                -- Insertar el registro en INGRESONOMINADETALLE
                INSERT INTO [dbo].[INGRESONOMINADETALLE]
                       ([MONTO]
                       ,[DETALLE]
                       ,[INGRESO_ID]
                       ,[NOMINADETALLE_ID]
                       ,[EMPLEADO_ID]
                       ,[CANTIDAD])
                VALUES
                       (@MONTO
                       ,@DETALLE
                       ,@INGRESO_ID
                       ,@NOMINA_DETALLEID
                       ,@EMPLEADO_ID
                       ,@CANTIDAD);

                -- Actualizar el total de horas extra en NOMINADETALLE
                UPDATE [dbo].[NOMINADETALLE]
                SET TOTAL_HORAS_EXTRA = ISNULL(TOTAL_HORAS_EXTRA, 0) + @CANTIDAD
                WHERE ID_NOMINADETALLE = @NOMINA_DETALLEID;
            END
            ELSE IF @INGRESO_ID = 3
            BEGIN
                -- Insertar el registro en INGRESONOMINADETALLE
                INSERT INTO [dbo].[INGRESONOMINADETALLE]
                       ([MONTO]
                       ,[DETALLE]
                       ,[INGRESO_ID]
                       ,[NOMINADETALLE_ID]
                       ,[EMPLEADO_ID]
                       ,[CANTIDAD])
                VALUES
                       (@MONTO
                       ,@DETALLE
                       ,@INGRESO_ID
                       ,@NOMINA_DETALLEID
                       ,@EMPLEADO_ID
                       ,@CANTIDAD);

                -- Actualizar el total de días extra en NOMINADETALLE
                UPDATE [dbo].[NOMINADETALLE]
                SET TOTAL_DIAS_EXTRA = ISNULL(TOTAL_DIAS_EXTRA, 0) + @CANTIDAD
                WHERE ID_NOMINADETALLE = @NOMINA_DETALLEID;
            END

            FETCH NEXT FROM ingresos_cursor INTO @MONTO, @DETALLE, @INGRESO_ID, @EMPLEADO_ID, @CANTIDAD;
        END;

        CLOSE ingresos_cursor;
        DEALLOCATE ingresos_cursor;
    END TRY
    BEGIN CATCH
        INSERT INTO [dbo].[DB_ERRORES]
                   ([UserName]
                   ,[ErrorNumber]
                   ,[ErrorState]
                   ,[ErrorSeverity]
                   ,[ErrorLine]
                   ,[ErrorProcedure]
                   ,[ErrorMessage]
                   ,[ErrorDateTime])
        VALUES
                  (SUSER_SNAME(),
                   ERROR_NUMBER(),
                   ERROR_STATE(),
                   ERROR_SEVERITY(),
                   ERROR_LINE(),
                   ERROR_PROCEDURE(),
                   ERROR_MESSAGE(),
                   GETDATE());
    END CATCH;
END;


/****** Object:  StoredProcedure [dbo].[RegistrarNomina]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE PROCEDURE [dbo].[RegistrarNomina]
    @Descripcion VARCHAR(100),
    @Observaciones VARCHAR(500),
    @TipoNomina INT,
    @CreadorID BIGINT
AS
BEGIN
    BEGIN TRY
       
        DECLARE @Fecha DATETIME;
        DECLARE @Mes INT;
        DECLARE @UltimoDiaDelMes DATETIME;
        DECLARE @EmpleadoID BIGINT;
        DECLARE @SalarioEmpleado DECIMAL(18, 2);
        DECLARE @Estado BIT = 0;
        DECLARE @Revisiones INT = 0;
        DECLARE @ID_NOMINA BIGINT;
        
      
        SET @Fecha = GETDATE();
        SET @Mes = MONTH(@Fecha);
        SET @UltimoDiaDelMes = EOMONTH(@Fecha);
        
      
        BEGIN TRANSACTION;
        
       
        DECLARE empleado_cursor CURSOR FOR
        SELECT ID_EMPLEADO, SALARIO
        FROM Empleado;
        
        OPEN empleado_cursor;
        
        FETCH NEXT FROM empleado_cursor INTO @EmpleadoID, @SalarioEmpleado;
        
        WHILE @@FETCH_STATUS = 0
        BEGIN
          
            INSERT INTO [dbo].[NOMINA]
                   ([DESCRIPCION]
                   ,[PERIODO]
                   ,[FECHA_CALCULO]
                   ,[FECHA_PAGO]
                   ,[OBSERVACIONES]
                   ,[REVISIONES]
                   ,[FECHACREACION]
                   ,[ESTADO]
                   ,[SALARIO_BRUTO]
                   ,[EMPLEADO_ID]
                   ,[TIPONOMINA_ID]
                   ,[CREADOR_ID])
            VALUES
                   (@Descripcion
                   ,@Mes
                   ,@Fecha
                   ,@UltimoDiaDelMes
                   ,@Observaciones
                   ,@Revisiones
                   ,@Fecha
                   ,@Estado
                   ,@SalarioEmpleado
                   ,@EmpleadoID
                   ,@TipoNomina
                   ,@CreadorID);

            FETCH NEXT FROM empleado_cursor INTO @EmpleadoID, @SalarioEmpleado;
        END;
        
        
        CLOSE empleado_cursor;
        DEALLOCATE empleado_cursor;
        
       
        DECLARE nomina_cursor CURSOR FOR
        SELECT ID_NOMINA
        FROM NOMINA
        WHERE FECHACREACION = @Fecha;
        
        OPEN nomina_cursor;
        
        FETCH NEXT FROM nomina_cursor INTO @ID_NOMINA;
        
        WHILE @@FETCH_STATUS = 0
        BEGIN
          
            INSERT INTO [dbo].[NOMINADETALLE]
                   (NOMINA_ID)
            VALUES
                   (@ID_NOMINA);
            
            FETCH NEXT FROM nomina_cursor INTO @ID_NOMINA;
        END;
        
       
        CLOSE nomina_cursor;
        DEALLOCATE nomina_cursor;
        
      
        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH
      
        IF @@TRANCOUNT > 0
            ROLLBACK TRANSACTION;
        
      
        INSERT INTO [dbo].[DB_ERRORES]
                   ([UserName]
                   ,[ErrorNumber]
                   ,[ErrorState]
                   ,[ErrorSeverity]
                   ,[ErrorLine]
                   ,[ErrorProcedure]
                   ,[ErrorMessage]
                   ,[ErrorDateTime])
        VALUES
                  (SUSER_SNAME(),
                   ERROR_NUMBER(),
                   ERROR_STATE(),
                   ERROR_SEVERITY(),
                   ERROR_LINE(),
                   ERROR_PROCEDURE(),
                   ERROR_MESSAGE(),
                   GETDATE());
    END CATCH;
END;
GO
/****** Object:  StoredProcedure [dbo].[RegistrarSolicitud]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE PROCEDURE [dbo].[RegistrarSolicitud]
  @FECHA_INICIO datetime,
  @FECHA_FINAL datetime,
  @COMENTARIO varchar(max),
  @DETALLE varchar(max),
  @SOLICITANTE_ID bigint,
  @TIPOSOLICITUD_ID bigint
AS
BEGIN

  BEGIN TRY
  DECLARE @ID_SOLICITUD BIGINT

  IF (@TIPOSOLICITUD_ID IN (1, 2, 3))
  BEGIN
  DECLARE @DIAS INT
  DECLARE @SALDO_DISPONIBLE BIGINT
SET @DIAS=[dbo].[CalcularDias](@FECHA_INICIO,@FECHA_FINAL);
SET @SALDO_DISPONIBLE=( SELECT SALDO_VACACIONES FROM EMPLEADO WHERE ID_EMPLEADO=@SOLICITANTE_ID)

IF(@SALDO_DISPONIBLE>=@DIAS)
BEGIN
    -- Insert the new solicitud record
    INSERT INTO SOLICITUD (
        FECHA_SOLICITUD,
        FECHA_INICIO,
        FECHA_FINAL,
        COMENTARIO,
        DIAS,
        DETALLE,
        ESTADO_SOLICITUD,
        SOLICITANTE_ID,
        TIPOSOLICITUD_ID
    ) VALUES (
        GETDATE(),
        @FECHA_INICIO,
        @FECHA_FINAL,
        @COMENTARIO,
        @DIAS,
        @DETALLE,
        'P',
        @SOLICITANTE_ID,
        @TIPOSOLICITUD_ID
    );
  END
  SET @ID_SOLICITUD=SCOPE_IDENTITY()
  exec [dbo].[RegistrarAprobaciones] @ID_SOLICITUD
  END
  ELSE
  BEGIN
 
    PRINT 'El tipo de solicitud ';
  END
END TRY
BEGIN CATCH
  INSERT INTO [dbo].[DB_ERRORES]
           ([UserName]
           ,[ErrorNumber]
           ,[ErrorState]
           ,[ErrorSeverity]
           ,[ErrorLine]
           ,[ErrorProcedure]
           ,[ErrorMessage]
           ,[ErrorDateTime])

    VALUES
  (SUSER_SNAME(),
   ERROR_NUMBER(),
   ERROR_STATE(),
   ERROR_SEVERITY(),
   ERROR_LINE(),
   ERROR_PROCEDURE(),
   ERROR_MESSAGE(),
   GETDATE());
END CATCH;
END
GO
/****** Object:  StoredProcedure [dbo].[RegistrarSolicitudCambioHorario]    Script Date: 20/7/2024 11:19:04 p. m. ******/


CREATE proc [dbo].[RegistrarSolicitudCambioHorario] 
  @COMENTARIO varchar(max),
  @DETALLE varchar(max),
  @SOLICITANTE_ID bigint,
  @ID_HORARIOLABORAL bigint
  

  as begin

  DECLARE @ID_SOLICITUD BIGINT

   BEGIN TRY
  insert into SOLICITUD(FECHA_SOLICITUD, COMENTARIO, DETALLE, ESTADO_SOLICITUD, SOLICITANTE_ID,TIPOSOLICITUD_ID,ID_HORARIOLABORAL)
  VALUES( GETDATE(), @COMENTARIO,@DETALLE,'P',@SOLICITANTE_ID,4,@ID_HORARIOLABORAL)

  SET @ID_SOLICITUD=SCOPE_IDENTITY()
  exec [dbo].[RegistrarAprobaciones] @ID_SOLICITUD
   
END TRY
BEGIN CATCH

INSERT INTO [dbo].[DB_ERRORES]
           ([UserName]
           ,[ErrorNumber]
           ,[ErrorState]
           ,[ErrorSeverity]
           ,[ErrorLine]
           ,[ErrorProcedure]
           ,[ErrorMessage]
           ,[ErrorDateTime])

    VALUES
  (SUSER_SNAME(),
   ERROR_NUMBER(),
   ERROR_STATE(),
   ERROR_SEVERITY(),
   ERROR_LINE(),
   ERROR_PROCEDURE(),
   ERROR_MESSAGE(),
   GETDATE());
END CATCH;

  END

GO
/****** Object:  StoredProcedure [dbo].[RegitsrarActualizarDeduccion]    Script Date: 20/7/2024 11:19:04 p. m. ******/



create PROCEDURE [dbo].[RegitsrarActualizarDeduccion]
    @Nombre_Deduccion VARCHAR(50),
    @Descripcion VARCHAR(200),
    @Porcentaje DECIMAL(10, 2) = NULL
AS
BEGIN
    
    MERGE INTO [dbo].[DEDUCCION] AS target
    USING (SELECT @Nombre_Deduccion AS NOMBRE_DEDUCCION) AS source
    ON (target.NOMBRE_DEDUCCION = source.NOMBRE_DEDUCCION)
    WHEN MATCHED THEN
        UPDATE SET 
            DESCRIPCION = @Descripcion,
            PORCENTAJE = ISNULL(@Porcentaje, target.PORCENTAJE)
    WHEN NOT MATCHED THEN
        INSERT (NOMBRE_DEDUCCION, DESCRIPCION, PORCENTAJE)
        VALUES (@Nombre_Deduccion, @Descripcion, @Porcentaje);
END;
GO

ALTER DATABASE [GestionPersonalProinsa] SET  READ_WRITE 
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/20/2024
-- Description: Permite crear nuevos clientes en el sistema.
-- =============================================
CREATE PROCEDURE dbo.AgregarCliente
(
    -- Add the parameters for the stored procedure here
	@NOMBRE varchar(50) NULL,
	@DETALLE varchar(500) Null,
	@PAIS varchar(50) NULL,
	@SECTOR varchar(50) NULL
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    -- Insert statements for procedure here
    INSERT INTO [dbo].[CLIENTE]
           ([NOMBRE]
           ,[DETALLE]
           ,[PAIS]
           ,[SECTOR]
           ,[ESTADO])
     VALUES
           (@NOMBRE,
			@DETALLE,
            @PAIS,
            @SECTOR,
            1)
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/20/2024
-- Description: Permite modificar clientes existentes en el sistema.
-- =============================================
CREATE PROCEDURE dbo.ModificarCliente
(
    -- Add the parameters for the stored procedure here
	@ID_CLIENTE bigint,
	@NOMBRE varchar(50) NULL,
	@DETALLE varchar(500) Null,
	@PAIS varchar(50) NULL,
	@SECTOR varchar(50) NULL,
	@ESTADO bit
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
	UPDATE [dbo].[CLIENTE]
		SET [NOMBRE] = @NOMBRE,
			 [DETALLE] = @DETALLE,
			 [PAIS] = @PAIS,
			 [SECTOR] = @SECTOR,
			 [ESTADO] = @ESTADO
		WHERE ID_CLIENTE = @ID_CLIENTE
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/20/2024
-- Description: Permite Listar todos los clientes existentes en el sistema.
-- =============================================
CREATE PROCEDURE dbo.ListarClientes

    -- Add the parameters for the stored procedure here
	

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
	SELECT [ID_CLIENTE]
      ,[NOMBRE]
	  ,[PAIS]
      ,[SECTOR]
      ,CASE WHEN ESTADO = 1 THEN 'Activo' ELSE 'Inactivo' END AS ESTADO
	FROM [dbo].[CLIENTE]
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/20/2024
-- Description: Una lista del nombre de los clientes activos en el sistema.
-- =============================================
CREATE PROCEDURE dbo.ListarClientesNombres

    -- Add the parameters for the stored procedure here
	

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON

    -- Insert statements for procedure here
	SELECT [ID_CLIENTE]
      ,[NOMBRE]
	FROM [dbo].[CLIENTE]
	WHERE ESTADO = 1;
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Busca clientes por nombre con coincidencias parciales e insensible a mayúsculas/minúsculas.
-- =============================================
CREATE PROCEDURE dbo.BuscarClientePorNombre
(
    @Nombre VARCHAR(50)
)
AS
BEGIN


    -- Convertir el parámetro de búsqueda a minúsculas
    DECLARE @Busqueda NVARCHAR(50);
    SET @Busqueda = UPPER(@Nombre);

    SELECT 
        [ID_CLIENTE],
        [NOMBRE],
        [DETALLE],
        [PAIS],
        [SECTOR],
        [ESTADO]
    FROM 
        [dbo].[CLIENTE]
    WHERE 
        UPPER([NOMBRE]) LIKE '%' + @Busqueda + '%'
		AND [ESTADO] = 1;
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/20/2024
-- Description: Permite detallar un cliente existente en el sistema.
-- =============================================
CREATE PROCEDURE dbo.DetallarCliente
(
    -- Add the parameters for the stored procedure here
	@ID_CLIENTE bigint
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    -- Insert statements for procedure here
	SELECT [ID_CLIENTE]
      ,[NOMBRE]
	  ,[DETALLE]
	  ,[PAIS]
      ,[SECTOR]
      ,CASE WHEN ESTADO = 1 THEN 'Activo' ELSE 'Inactivo' END AS ESTADO
	FROM [dbo].[CLIENTE]
	WHERE ID_CLIENTE = @ID_CLIENTE;
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/20/2024
-- Description: Cambia el estado de un cliente al contrario que tenga seteado.
-- =============================================
CREATE PROCEDURE dbo.CambiarEstadoCliente
(
    -- Add the parameters for the stored procedure here
	@ID_CLIENTE bigint
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

	DECLARE @estado_actual bit;

	SET @estado_actual = (SELECT ESTADO FROM CLIENTE WHERE ID_CLIENTE = @ID_CLIENTE);

    -- Insert statements for procedure here
	IF @estado_actual = 0
	BEGIN
		UPDATE CLIENTE
		SET ESTADO = 1
		WHERE ID_CLIENTE = @ID_CLIENTE;
	END
	ELSE
	BEGIN
		UPDATE CLIENTE
		SET ESTADO = 0
		WHERE ID_CLIENTE = @ID_CLIENTE;
	END
END
GO
-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Agrega nuevos proyectos.
-- =============================================
CREATE PROCEDURE dbo.AgregarProyecto
(
    -- Add the parameters for the stored procedure here
	@NOMBRE varchar (50),
	@TOTAL_HORAS decimal (18,2),
	@INICIO_FECHA datetime,
	@FINAL_FECHA datetime,
	@COD_PROYECTO varchar (50),
	@COMENTARIO varchar (200),
	@CONTACTO_ID bigint,
	@CLIENTE_ID bigint
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    -- Insert statements for procedure here
	INSERT INTO [dbo].[PROYECTO]
           ([NOMBRE]
           ,[TOTAL_HORAS]
           ,[INICIO_FECHA]
           ,[FINAL_FECHA]
           ,[COD_PROYECTO]
           ,[COMENTARIO]
           ,[CONTACTO_ID]
           ,[CLIENTE_ID]
           ,[ESTADO])
     VALUES
           (@NOMBRE,
			@TOTAL_HORAS,
            @INICIO_FECHA,
            @FINAL_FECHA,
            @COD_PROYECTO,
            @COMENTARIO,
            @CONTACTO_ID,
            @CLIENTE_ID,
            1)
END
GO
-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Modifica un proyecto existente.
-- =============================================
CREATE PROCEDURE dbo.ModificarProyecto
(
    -- Add the parameters for the stored procedure here
	@ID_PROYECTO bigint,
	@NOMBRE varchar (50),
	@TOTAL_HORAS decimal (18,2),
	@INICIO_FECHA datetime,
	@FINAL_FECHA datetime,
	@COD_PROYECTO varchar (50),
	@COMENTARIO varchar (200),
	@CONTACTO_ID bigint,
	@CLIENTE_ID bigint,
	@ESTADO bit
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    -- Insert statements for procedure here
	UPDATE [dbo].[PROYECTO]
		SET [NOMBRE] = @NOMBRE,
		 [TOTAL_HORAS] = @TOTAL_HORAS,
		 [INICIO_FECHA] = @INICIO_FECHA,
		 [FINAL_FECHA] = @FINAL_FECHA,
		 [COD_PROYECTO] = @COD_PROYECTO,
		 [COMENTARIO] = @COMENTARIO,
		 [CONTACTO_ID] = @CONTACTO_ID,
		 [CLIENTE_ID] = @CLIENTE_ID,
		 [ESTADO] = @ESTADO
		WHERE ID_PROYECTO = @ID_PROYECTO;
END
GO
-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Cambia el estado de un PROYECTO al contrario que tenga seteado.
-- =============================================
CREATE PROCEDURE dbo.CambiarEstadoProyecto
(
    -- Add the parameters for the stored procedure here
	@ID_PROYECTO bigint
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

	DECLARE @estado_actual bit;

	SET @estado_actual = (SELECT ESTADO FROM PROYECTO WHERE ID_PROYECTO = @ID_PROYECTO);

    -- Insert statements for procedure here
	IF @estado_actual = 0
	BEGIN
		UPDATE PROYECTO
		SET ESTADO = 1
		WHERE ID_PROYECTO = @ID_PROYECTO;
	END
	ELSE
	BEGIN
		UPDATE PROYECTO
		SET ESTADO = 0
		WHERE ID_PROYECTO = @ID_PROYECTO;
	END
END
GO
-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Lista todos los Proyectos del sistema para verlos en la lista de proyectos
-- =============================================
CREATE PROCEDURE dbo.ListarProyectos

    -- Add the parameters for the stored procedure here
	

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    -- Insert statements for procedure here
	SELECT [ID_PROYECTO]
      ,[NOMBRE]
      ,[TOTAL_HORAS]
      ,[COD_PROYECTO]
      ,[CONTACTO_ID]
      ,[CLIENTE_ID]
      ,CASE WHEN ESTADO = 1 THEN 'Activo' ELSE 'Inactivo' END AS ESTADO
  FROM [dbo].[PROYECTO]
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Lista todos los nombres de los proyectos en el sistemas que esten activos.
-- =============================================
CREATE PROCEDURE dbo.ListarProyectosNombres

    -- Add the parameters for the stored procedure here
	

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    -- Insert statements for procedure here
	SELECT [ID_PROYECTO]
      ,[NOMBRE]
  FROM [dbo].[PROYECTO]
  WHERE ESTADO = 1;
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Detalla un Proyecto especifico por ID del sistema.
-- =============================================
CREATE PROCEDURE dbo.DetallarProyecto
(
    -- Add the parameters for the stored procedure here
	@ID_PROYECTO bigint
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    -- Insert statements for procedure here
	SELECT [ID_PROYECTO]
      ,[NOMBRE]
      ,[TOTAL_HORAS]
	  ,[INICIO_FECHA]
	  ,[FINAL_FECHA]
      ,[COD_PROYECTO]
	  ,[COMENTARIO]
      ,[CONTACTO_ID]
      ,[CLIENTE_ID]
      ,CASE WHEN ESTADO = 1 THEN 'Activo' ELSE 'Inactivo' END AS ESTADO
	FROM [dbo].[PROYECTO]
	WHERE ID_PROYECTO = @ID_PROYECTO;
END
GO


-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: .
-- =============================================
CREATE PROCEDURE dbo.IngresorRegistroActividad
(
    @FECHA_INICIO datetime,
    @FECHA_FIN datetime,
	@TOTALHORAS decimal(18,2),
	@DETALLE varchar(500),
	@ESTADO bit,
	@PROYECTO_ID bigint,
	@EMPLEADO_ID bigint
)
AS
BEGIN

    BEGIN 
        INSERT INTO [dbo].[REGISTROACTIVIDAD]
           ([FECHA_INICIO]
           ,[FECHA_FINAL]
           ,[TOTALHORAS]
           ,[DETALLE]
		   ,[ESTADO]
		   ,[PROYECTO_ID]
           ,[EMPLEADO_ID])
     VALUES
           (@FECHA_INICIO,
            @FECHA_FIN,
            @TOTALHORAS,
			@DETALLE,
			1,
			@PROYECTO_ID,
            @EMPLEADO_ID)
    END
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Lista todas las actividades sin parametros
-- =============================================
CREATE PROCEDURE dbo.ListarTodasActividades

-- Add the parameters for the stored procedure here

AS
BEGIN

    BEGIN 
        SELECT [ID_REGISTROACTIVIDAD]
			,[FECHA_INICIO]
			,[FECHA_FINAL]
			,[TOTALHORAS]
			,[EMPLEADO_ID]
			,[PROYECTO_ID]
		 FROM [dbo].[REGISTROACTIVIDAD]
    END
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Lista las actividades de un empleado específico
-- =============================================
CREATE PROCEDURE dbo.ListarActividadesPorEmpleado
(
    @EMPLEADO_ID bigint
)
AS
BEGIN

    BEGIN 
        SELECT [ID_REGISTROACTIVIDAD]
            ,[FECHA_INICIO]
            ,[FECHA_FINAL]
            ,[TOTALHORAS]
            ,[EMPLEADO_ID]
            ,[PROYECTO_ID]
        FROM [dbo].[REGISTROACTIVIDAD]
        WHERE [EMPLEADO_ID] = @EMPLEADO_ID
    END
END
GO
-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Permite modificar una actividad existente
-- =============================================
CREATE PROCEDURE dbo.ModificarRegistroActividad
(
	-- Add the parameters for the stored procedure here
	@ID_REGISTROACTIVIDAD bigint,
    @FECHA_INICIO datetime,
    @FECHA_FIN datetime,
	@TOTALHORAS decimal(18,2),
	@DETALLE varchar(500),
	@ESTADO bit,
	@PROYECTO_ID bigint,
	@EMPLEADO_ID bigint
)
AS
BEGIN

    BEGIN 
		UPDATE [dbo].[REGISTROACTIVIDAD]
		SET [FECHA_INICIO] = @FECHA_INICIO,
			[FECHA_FINAL] =  @FECHA_FIN,
			[TOTALHORAS] = @TOTALHORAS,
			[DETALLE] = @DETALLE,
			[ESTADO] = @ESTADO,
			[PROYECTO_ID] = @PROYECTO_ID,
			[EMPLEADO_ID] = @EMPLEADO_ID
		WHERE ID_REGISTROACTIVIDAD = @ID_REGISTROACTIVIDAD;
    END
END
GO
-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Permite detallar un registro de actividad especifico por el ID
-- =============================================
CREATE PROCEDURE dbo.DetallarRegistroActividadPorID
(
	-- Add the parameters for the stored procedure here
	@ID_REGISTROACTIVIDAD bigint
)
AS
BEGIN

    BEGIN 
		SELECT [ID_REGISTROACTIVIDAD]
			,[FECHA_INICIO]
			,[FECHA_FINAL]
			,[TOTALHORAS]
			,[DETALLE]
			,[EMPLEADO_ID]
			,[ESTADO]
			,[PROYECTO_ID]
		FROM [dbo].[REGISTROACTIVIDAD]
		WHERE ID_REGISTROACTIVIDAD = @ID_REGISTROACTIVIDAD;
    END
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Permite cambiar el estado de una actividad al contrario que tenga seteado
-- =============================================
CREATE PROCEDURE dbo.CambiarEstadoRegistroActividad
(
	-- Add the parameters for the stored procedure here
	@ID_REGISTROACTIVIDAD bigint
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

	DECLARE @estado_actual bit;

	SET @estado_actual = (SELECT ESTADO FROM REGISTROACTIVIDAD WHERE ID_REGISTROACTIVIDAD = @ID_REGISTROACTIVIDAD);

    -- Insert statements for procedure here
	IF @estado_actual = 0
	BEGIN
		UPDATE REGISTROACTIVIDAD
		SET ESTADO = 1
		WHERE ID_REGISTROACTIVIDAD = @ID_REGISTROACTIVIDAD;
	END
	ELSE
	BEGIN
		UPDATE REGISTROACTIVIDAD
		SET ESTADO = 0
		WHERE ID_REGISTROACTIVIDAD = @ID_REGISTROACTIVIDAD;
	END
END
GO

CREATE OR ALTER PROCEDURE ActualizarDocumento
    @ID_EMPLEADODOCUMENTO   BIGINT,
    @NOMBRE_DOCUMENTO       NVARCHAR(50),
    @COMENTARIO             NVARCHAR(200),
    @DOCUMENTO              VARBINARY(MAX),
    @TIPODOCUMENTO_ID       BIGINT
AS
BEGIN
    DECLARE @Referencia VARBINARY(MAX) = 0x4E;

    UPDATE [dbo].[EMPLEADODOCUMENTO]
    SET NOMBRE_DOCUMENTO = CASE WHEN @NOMBRE_DOCUMENTO IS NOT NULL THEN @NOMBRE_DOCUMENTO ELSE NOMBRE_DOCUMENTO END,
        COMENTARIO = CASE WHEN @COMENTARIO IS NOT NULL THEN @COMENTARIO ELSE COMENTARIO END,
        DOCUMENTO = CASE WHEN @DOCUMENTO IS NOT NULL AND @DOCUMENTO != @Referencia THEN @DOCUMENTO ELSE DOCUMENTO END,
        TIPODOCUMENTO_ID = CASE WHEN @TIPODOCUMENTO_ID IS NOT NULL THEN @TIPODOCUMENTO_ID ELSE TIPODOCUMENTO_ID END
    WHERE ID_EMPLEADODOCUMENTO = @ID_EMPLEADODOCUMENTO;
END
GO

CREATE OR ALTER PROCEDURE EliminarDocumento
@ID_EMPLEADODOCUMENTO	BIGINT
AS
BEGIN

	DELETE FROM [dbo].[EMPLEADODOCUMENTO]
	WHERE ID_EMPLEADODOCUMENTO = @ID_EMPLEADODOCUMENTO

END
GO

CREATE OR ALTER PROCEDURE ConsultarDocumentoEmpleado
@ID_EMPLEADODOCUMENTO   BIGINT
AS
BEGIN

	SELECT [ID_EMPLEADODOCUMENTO],[NOMBRE_DOCUMENTO],[COMENTARIO],[DOCUMENTO],[TIPODOCUMENTO_ID],TD.DESCRIPCION AS NOMBRE_TIPODOCUMENTO,[EMPLEADO_ID]
	FROM [dbo].[EMPLEADODOCUMENTO] ED
	INNER JOIN TIPODOCUMENTO TD ON ED.TIPODOCUMENTO_ID = TD.ID_TIPODOCUMENTO
	WHERE ID_EMPLEADODOCUMENTO = @ID_EMPLEADODOCUMENTO
END
GO

CREATE OR ALTER PROCEDURE ConsultarEmpleados
AS
BEGIN
	SELECT [ID_EMPLEADO] 'value',[NOMBRECOMPLETO] 'text'
	FROM [dbo].[EMPLEADO]
	WHERE ESTADO = 1
END
GO

ALTER TABLE [dbo].[NOMINADETALLE] DROP CONSTRAINT [FK_NOMINADETALLE_CALCULOIMPUESTO]
GO

drop table CALCULOIMPUESTO

go
alter table [dbo].[NOMINADETALLE]

ADD IMPUESTORENTA_ID BIGINT NULL

ALTER TABLE [dbo].[NOMINADETALLE]  WITH CHECK ADD  CONSTRAINT [FK_NOMINADETALLE_IMPUESTO] FOREIGN KEY([IMPUESTORENTA_ID])
REFERENCES [dbo].[IMPUESTORENTA] ([ID_IMPUESTORENTA])
GO

ALTER TABLE [dbo].[NOMINADETALLE] CHECK CONSTRAINT [FK_NOMINADETALLE_IMPUESTO]
GO

ALTER TABLE [dbo].[NOMINADETALLE] DROP CONSTRAINT [FK_NOMINADETALLE_DEEXTRAORNIDARIO]
GO

drop table [dbo].[DEEXTRAORNIDARIO]
go

ALTER TABLE [dbo].[NOMINADETALLE] DROP CONSTRAINT [FK_NOMINADETALLE_HORASEXTRA]
GO

drop table HORASEXTRA
go

ALTER TABLE [dbo].[NOMINADETALLE] DROP CONSTRAINT [FK_NOMINADETALLE_HORASTRABAJADAS]
GO

drop table HORASTRABAJADAS
GO
alter table [dbo].[NOMINADETALLE]

drop column [HORASEXTRA_ID]

go

alter table [dbo].[NOMINADETALLE]

drop column [HORASTRABAJADAS_ID]

GO

alter table [dbo].[NOMINADETALLE]

drop column [DEEXTRAORNIDARIO_ID]

GO

alter table [dbo].[NOMINADETALLE]

drop column [CALCULOIMPUESTO_ID]
GO
ALTER TABLE [dbo].[NOMINADETALLE]
ADD TOTAL_HORAS_EXTRA INT NULL
GO

ALTER TABLE [dbo].[NOMINADETALLE]
ADD TOTAL_DIAS_EXTRA INT NULL
GO

ALTER TABLE [dbo].[INGRESONOMINADETALLE]

ADD CANTIDAD INT NULL
GO

create PROCEDURE [dbo].[CalculoNominaInicial]
AS
BEGIN
    BEGIN TRY
        DECLARE empleado_cursor CURSOR FOR
        SELECT ID_EMPLEADO
        FROM [dbo].[EMPLEADO];

        DECLARE @EmpleadoID bigint;
        DECLARE @Salario decimal(10, 2);
        DECLARE @DeduccionCCSS decimal(10, 2);
        DECLARE @DeduccionImpuesto decimal(10, 2);
        DECLARE @TotalDeducciones decimal(10, 2);
        DECLARE @SalarioNeto decimal(10, 2);
        DECLARE @NominaID bigint;
        DECLARE @NominaIDetalle bigint;
        DECLARE @Fecha DATETIME;
        DECLARE @Mes INT;
        DECLARE @PorcentajeDeduccionCCSS decimal(5, 2);
        DECLARE @PorcentajeDeduccionImpuesto decimal(5, 2);
		DECLARE @ImpuestoID bigint;

        SET @Fecha = GETDATE();
        SET @Mes = MONTH(@Fecha);

        BEGIN TRANSACTION;

       
        SELECT @PorcentajeDeduccionCCSS = PORCENTAJE
        FROM [dbo].[DEDUCCION]
        WHERE ID_DEDUCCION = 1;

        SET @PorcentajeDeduccionCCSS = @PorcentajeDeduccionCCSS / 100;

        OPEN empleado_cursor;

        FETCH NEXT FROM empleado_cursor INTO @EmpleadoID;

        WHILE @@FETCH_STATUS = 0
        BEGIN
            SELECT @Salario = SALARIO
            FROM [dbo].[EMPLEADO]
            WHERE ID_EMPLEADO = @EmpleadoID;

           
            SET @DeduccionCCSS = @Salario * @PorcentajeDeduccionCCSS;

            
            SELECT @PorcentajeDeduccionImpuesto = ISNULL(
                (SELECT TOP 1 PORCENTAJE 
                 FROM [dbo].[IMPUESTORENTA]
                 WHERE @Salario BETWEEN MIN_SALARY AND ISNULL(MAX_SALARY, @Salario + 1)), 0.00);

		   SELECT @ImpuestoID = ISNULL(
                (SELECT TOP 1 ID_IMPUESTORENTA
                 FROM [dbo].[IMPUESTORENTA]
                 WHERE @Salario BETWEEN MIN_SALARY AND ISNULL(MAX_SALARY, @Salario + 1)), 0);

            SET @PorcentajeDeduccionImpuesto = @PorcentajeDeduccionImpuesto / 100;
            SET @DeduccionImpuesto = @Salario * @PorcentajeDeduccionImpuesto;

         
            SET @TotalDeducciones = @DeduccionCCSS + @DeduccionImpuesto;
            SET @SalarioNeto = @Salario - @TotalDeducciones;

            SELECT @NominaIDetalle = (SELECT ID_NOMINADETALLE
                                      FROM NOMINADETALLE nd
                                      INNER JOIN NOMINA n ON nd.NOMINA_ID = n.ID_NOMINA
                                      WHERE n.EMPLEADO_ID = @EmpleadoID AND n.PERIODO = @Mes);

            SELECT @NominaID = (SELECT ID_NOMINA
                                FROM NOMINA nd
                                WHERE EMPLEADO_ID = @EmpleadoID AND ND.PERIODO = @Mes);

           
            INSERT INTO [dbo].[INGRESONOMINADETALLE] (MONTO, DETALLE, INGRESO_ID, NOMINADETALLE_ID, EMPLEADO_ID)
            VALUES (@Salario, 'Salario Mensual', 1, @NominaIDetalle, @EmpleadoID);

            INSERT INTO [dbo].[DEDUCCIONNOMINADETALLE] (MONTO, DETALLE, DEDUCCION_ID, NOMINADETALLE_ID, EMPLEADO_ID)
            VALUES (@DeduccionCCSS, 'Deducción CCSS', 1, @NominaIDetalle, @EmpleadoID);

            INSERT INTO [dbo].[DEDUCCIONNOMINADETALLE] (MONTO, DETALLE, DEDUCCION_ID, NOMINADETALLE_ID, EMPLEADO_ID)
            VALUES (@DeduccionImpuesto, 'Deducción Impuesto Renta', 2, @NominaIDetalle, @EmpleadoID);

			

           
            UPDATE [dbo].[NOMINA]
            SET SALARIO_NETO = @SalarioNeto
            WHERE ID_NOMINA = @NominaID;

			UPDATE [dbo].[NOMINADETALLE] SET IMPUESTORENTA_ID=@ImpuestoID 

			WHERE NOMINA_ID=@NominaID

            FETCH NEXT FROM empleado_cursor INTO @EmpleadoID;
        END;

        CLOSE empleado_cursor;
        DEALLOCATE empleado_cursor;

        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > 0
            ROLLBACK TRANSACTION;

        INSERT INTO [dbo].[DB_ERRORES]
               ([UserName]
               ,[ErrorNumber]
               ,[ErrorState]
               ,[ErrorSeverity]
               ,[ErrorLine]
               ,[ErrorProcedure]
               ,[ErrorMessage]
               ,[ErrorDateTime])
        VALUES
              (SUSER_SNAME(),
               ERROR_NUMBER(),
               ERROR_STATE(),
               ERROR_SEVERITY(),
               ERROR_LINE(),
               ERROR_PROCEDURE(),
               ERROR_MESSAGE(),
               GETDATE());
    END CATCH;
END;

go

create PROCEDURE [dbo].[CalculoNominaFinal]
AS
BEGIN
    DECLARE @Fecha DATETIME;
    DECLARE @Mes INT;

    SET @Fecha = GETDATE();
    SET @Mes = MONTH(@Fecha);

    BEGIN TRY
        BEGIN TRANSACTION;

        DECLARE @EmpleadoID BIGINT;
        DECLARE @NominaID BIGINT;
        DECLARE @IngresoPrincipal DECIMAL(10,2);
        DECLARE @DeduccionCCSS DECIMAL(10,2);
        DECLARE @DeduccionImpuesto DECIMAL(10,2);
        DECLARE @TotalIngresos DECIMAL(10,2);
        DECLARE @TotalDeducciones DECIMAL(10,2);
        DECLARE @SalarioNeto DECIMAL(10,2);

        DECLARE empleados_cursor CURSOR FOR
        SELECT DISTINCT EMPLEADO_ID
        FROM NOMINA
        WHERE PERIODO = @Mes;

        OPEN empleados_cursor;
        FETCH NEXT FROM empleados_cursor INTO @EmpleadoID;

        WHILE @@FETCH_STATUS = 0
        BEGIN
           
            SELECT @NominaID = ID_NOMINA
            FROM NOMINA
            WHERE EMPLEADO_ID = @EmpleadoID AND PERIODO = @Mes;

           
            SELECT @IngresoPrincipal = SUM(MONTO)
            FROM INGRESONOMINADETALLE ind
            INNER JOIN NOMINADETALLE nd ON ind.NOMINADETALLE_ID = nd.ID_NOMINADETALLE
            INNER JOIN NOMINA n ON nd.NOMINA_ID = n.ID_NOMINA
            WHERE n.EMPLEADO_ID = @EmpleadoID AND n.PERIODO = @Mes AND ind.INGRESO_ID = 1;

          
            SELECT @DeduccionCCSS = SUM(MONTO)
            FROM DEDUCCIONNOMINADETALLE dnd
            INNER JOIN NOMINADETALLE nd ON dnd.NOMINADETALLE_ID = nd.ID_NOMINADETALLE
            INNER JOIN NOMINA n ON nd.NOMINA_ID = n.ID_NOMINA
            WHERE n.EMPLEADO_ID = @EmpleadoID AND n.PERIODO = @Mes AND dnd.DEDUCCION_ID = 1;

            
            SELECT @DeduccionImpuesto = SUM(MONTO)
            FROM DEDUCCIONNOMINADETALLE dnd
            INNER JOIN NOMINADETALLE nd ON dnd.NOMINADETALLE_ID = nd.ID_NOMINADETALLE
            INNER JOIN NOMINA n ON nd.NOMINA_ID = n.ID_NOMINA
            WHERE n.EMPLEADO_ID = @EmpleadoID AND n.PERIODO = @Mes AND dnd.DEDUCCION_ID = 2;

         
            SELECT @TotalIngresos = SUM(MONTO)
            FROM INGRESONOMINADETALLE ind
            INNER JOIN NOMINADETALLE nd ON ind.NOMINADETALLE_ID = nd.ID_NOMINADETALLE
            INNER JOIN NOMINA n ON nd.NOMINA_ID = n.ID_NOMINA
            WHERE n.EMPLEADO_ID = @EmpleadoID AND n.PERIODO = @Mes AND ind.INGRESO_ID != 1;

           
            SELECT @TotalDeducciones = SUM(MONTO)
            FROM DEDUCCIONNOMINADETALLE dnd
            INNER JOIN NOMINADETALLE nd ON dnd.NOMINADETALLE_ID = nd.ID_NOMINADETALLE
            INNER JOIN NOMINA n ON nd.NOMINA_ID = n.ID_NOMINA
            WHERE n.EMPLEADO_ID = @EmpleadoID AND n.PERIODO = @Mes AND dnd.DEDUCCION_ID NOT IN (1, 2);

            SET @SalarioNeto = ISNULL(@IngresoPrincipal, 0) 
                               - ISNULL(@DeduccionCCSS, 0) 
                               - ISNULL(@DeduccionImpuesto, 0)
                               + ISNULL(@TotalIngresos, 0) 
                               - ISNULL(@TotalDeducciones, 0);

            
            UPDATE NOMINA
            SET SALARIO_NETO = @SalarioNeto
            WHERE ID_NOMINA = @NominaID;

            FETCH NEXT FROM empleados_cursor INTO @EmpleadoID;
        END;

        CLOSE empleados_cursor;
        DEALLOCATE empleados_cursor;

        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > 0
            ROLLBACK TRANSACTION;

        INSERT INTO [dbo].[DB_ERRORES]
               ([UserName]
               ,[ErrorNumber]
               ,[ErrorState]
               ,[ErrorSeverity]
               ,[ErrorLine]
               ,[ErrorProcedure]
               ,[ErrorMessage]
               ,[ErrorDateTime])
        VALUES
              (SUSER_SNAME(),
               ERROR_NUMBER(),
               ERROR_STATE(),
               ERROR_SEVERITY(),
               ERROR_LINE(),
               ERROR_PROCEDURE(),
               ERROR_MESSAGE(),
               GETDATE());
    END CATCH;
END;
GO

CREATE proc ObtenerNominaMensualEmpleado 
		@EMPLEADO_ID BIGINT
		AS begin
		DECLARE @MES INT
		DECLARE @FECHA DATETIME
		DECLARE @ID_NOMINA INT
		
		 SET @FECHA = GETDATE();
         SET @MES = MONTH(@Fecha);
		 SET @ID_NOMINA=(SELECT  ID_NOMINA
         FROM NOMINA
         WHERE EMPLEADO_ID = @EMPLEADO_ID AND PERIODO=@MES)

		 --INGRESOS

		 SELECT 'INGRESO' AS TIPO ,ingre.NOMBRE_INGRESO as NOMBRE, ingreso.DETALLE, ingreso.MONTO, ISNULL(ingreso.CANTIDAD,0) AS CANTIDAD FROM INGRESONOMINADETALLE ingreso 
		 inner join NOMINADETALLE nominade on nominade.ID_NOMINADETALLE=ingreso.NOMINADETALLE_ID
		 inner join NOMINA nomina on nomina.ID_NOMINA=nominade.NOMINA_ID
		 inner join INGRESO ingre on ingre.ID_INGRESO=ingreso.INGRESO_ID
		 where ingreso.EMPLEADO_ID=@EMPLEADO_ID and nomina.PERIODO=@MES

          ---- DEDUCCIONES
		  UNION
		 
		 SELECT  'DEDUCCION' AS TIPO,DEDUCCION.NOMBRE_DEDUCCION AS NOMBRE , DEDU.DETALLE, DEDU.MONTO, 0  AS CANTIDAD FROM DEDUCCIONNOMINADETALLE DEDU
		 inner join NOMINADETALLE nominade on nominade.ID_NOMINADETALLE=DEDU.NOMINADETALLE_ID
		 inner join NOMINA nomina on nomina.ID_NOMINA=nominade.NOMINA_ID
		 inner join DEDUCCION DEDUCCION on DEDU.DEDUCCION_ID=DEDUCCION.ID_DEDUCCION
		 where DEDU.EMPLEADO_ID=@EMPLEADO_ID and nomina.PERIODO=@MES

		 AND DEDU.MONTO>0.00


		 END

		 GO

CREATE proc ObtenerNominaMensualEmpleados 
@fechapago datetime
as begin

select nomina.DESCRIPCION AS NOMINA , NOMINA.FECHA_PAGO, emple.NOMBRECOMPLETO as EMPLEADO , emple.IDENTIFICACION , cargo.DESCRIPCION as CARGO, nomina.SALARIO_NETO  as SALARIO from NOMINA nomina
inner join EMPLEADO emple on nomina.EMPLEADO_ID=emple.ID_EMPLEADO
inner join CARGO cargo on cargo.ID_CARGO=emple.CARGO_ID
where NOMINA.FECHA_PAGO=@fechapago

end
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/28/2024
-- Description: Asocia un proyecto con empleado.
-- =============================================
CREATE PROCEDURE AgregarEmpleadoProyecto
(
    -- Add the parameters for the stored procedure here
    @EMPLEADO_ID bigint,
    @PROYECTO_ID bigint
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.


    -- Insert statements for procedure here
	INSERT INTO [dbo].[EMPLEADOPROYECTO]
           ([EMPLEADO_ID]
           ,[PROYECTO_ID])
    VALUES
           (@EMPLEADO_ID,
            @PROYECTO_ID)
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Lista los proyectos asignados a un empleado específico
-- =============================================
CREATE PROCEDURE dbo.ListarProyectosPorEmpleado
(
    @EMPLEADO_ID bigint
)
AS
BEGIN

    SELECT 
        p.[ID_PROYECTO],
        p.[NOMBRE] AS PROYECTO_NOMBRE
    FROM 
        [dbo].[PROYECTO] p
    INNER JOIN 
        [dbo].[EMPLEADOPROYECTO] ep ON p.[ID_PROYECTO] = ep.[PROYECTO_ID]
    WHERE 
        ep.[EMPLEADO_ID] = @EMPLEADO_ID
		AND p.[ESTADO] = 1;
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Lista los nombres de los empleados asociados a un proyecto específico
-- =============================================
CREATE PROCEDURE dbo.ListarEmpleadosPorProyecto
(
    @PROYECTO_ID bigint
)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT 
        e.[NOMBRECOMPLETO]
    FROM 
        [dbo].[EMPLEADO] e
    INNER JOIN 
        [dbo].[EMPLEADOPROYECTO] ep ON e.[ID_EMPLEADO] = ep.[EMPLEADO_ID]
    WHERE 
        ep.[PROYECTO_ID] = @PROYECTO_ID;
END
GO

-- =======================================================
-- Create Stored Procedure Template for Azure SQL Database
-- =======================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Wilson Arias
-- Create Date: 07/21/2024
-- Description: Busca empleados por nombre con coincidencias parciales e insensible a mayúsculas/minúsculas
-- =============================================
CREATE PROCEDURE dbo.BuscarEmpleadoPorNombre
(
    @Nombre NVARCHAR(250)
)
AS
BEGIN
    SET NOCOUNT ON;

    -- Convertir el parámetro de búsqueda a minúsculas
    DECLARE @Busqueda VARCHAR(250);
    SET @Busqueda = UPPER(@Nombre);

    SELECT 
        [ID_EMPLEADO],
        [NOMBRECOMPLETO]
    FROM 
        [dbo].[EMPLEADO]
    WHERE 
        UPPER([NOMBRECOMPLETO]) LIKE '%' + @Busqueda + '%';
END
GO


